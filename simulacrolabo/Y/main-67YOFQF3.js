import{A as Xi,B as Dn,a as ne,b as qe,c as SN,d as aI,e as jm,f as O,g as uI,h as gh,i as cI,j as lI,k as dI,l as Bm,m as hI,n as Rc,o as Um,p as mh,q as fI,r as pI,s as $m,t as at,u as ss,v as kr,w as yh,x as Pc,y as gI,z as mI}from"./chunk-5DLNJBMX.js";var kb=SN((ri,Nb)=>{"use strict";(function(t,e){typeof ri=="object"&&typeof Nb<"u"?Nb.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(ri,function(){"use strict";function t(v,d,h){if(typeof v=="function"?v===d:v.has(d))return arguments.length<3?d:h;throw new TypeError("Private element is not present on this object")}function e(v,d,h){return d=M(d),B(v,o()?Reflect.construct(d,h||[],M(v).constructor):d.apply(v,h))}function n(v,d){return v.get(t(v,d))}function r(v,d,h){return v.set(t(v,d),h),h}function i(v,d,h){if(o())return Reflect.construct.apply(null,arguments);var y=[null];y.push.apply(y,d);var I=new(v.bind.apply(v,y));return h&&N(I,h.prototype),I}function o(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o=function(){return!!v})()}function s(v,d){var h=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(h!=null){var y,I,j,J,De=[],Te=!0,lt=!1;try{if(j=(h=h.call(v)).next,d===0){if(Object(h)!==h)return;Te=!1}else for(;!(Te=(y=j.call(h)).done)&&(De.push(y.value),De.length!==d);Te=!0);}catch(Mc){lt=!0,I=Mc}finally{try{if(!Te&&h.return!=null&&(J=h.return(),Object(J)!==J))return}finally{if(lt)throw I}}return De}}function a(v,d){if(typeof v!="object"||!v)return v;var h=v[Symbol.toPrimitive];if(h!==void 0){var y=h.call(v,d||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(v)}function c(v){var d=a(v,"string");return typeof d=="symbol"?d:d+""}function l(v){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},l(v)}function f(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function g(v,d){for(var h=0;h<d.length;h++){var y=d[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,c(y.key),y)}}function w(v,d,h){return d&&g(v.prototype,d),h&&g(v,h),Object.defineProperty(v,"prototype",{writable:!1}),v}function E(v,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(d&&d.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),d&&N(v,d)}function M(v){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},M(v)}function N(v,d){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,I){return y.__proto__=I,y},N(v,d)}function R(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function B(v,d){if(d&&(typeof d=="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(v)}function W(v,d){for(;!Object.prototype.hasOwnProperty.call(v,d)&&(v=M(v),v!==null););return v}function q(){return typeof Reflect<"u"&&Reflect.get?q=Reflect.get.bind():q=function(d,h,y){var I=W(d,h);if(I){var j=Object.getOwnPropertyDescriptor(I,h);return j.get?j.get.call(arguments.length<3?d:y):j.value}},q.apply(this,arguments)}function K(v,d){return T(v)||s(v,d)||C(v,d)||P()}function se(v){return ie(v)||b(v)||C(v)||S()}function ie(v){if(Array.isArray(v))return A(v)}function T(v){if(Array.isArray(v))return v}function b(v){if(typeof Symbol<"u"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function C(v,d){if(v){if(typeof v=="string")return A(v,d);var h=Object.prototype.toString.call(v).slice(8,-1);if(h==="Object"&&v.constructor&&(h=v.constructor.name),h==="Map"||h==="Set")return Array.from(v);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return A(v,d)}}function A(v,d){(d==null||d>v.length)&&(d=v.length);for(var h=0,y=new Array(d);h<d;h++)y[h]=v[h];return y}function S(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(v,d){if(d.has(v))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rr(v,d,h){D(v,d),d.set(v,h)}var $o=100,ve={},qo=function(){ve.previousActiveElement instanceof HTMLElement?(ve.previousActiveElement.focus(),ve.previousActiveElement=null):document.body&&document.body.focus()},Ho=function(d){return new Promise(function(h){if(!d)return h();var y=window.scrollX,I=window.scrollY;ve.restoreFocusTimeout=setTimeout(function(){qo(),h()},$o),window.scrollTo(y,I)})},la="swal2-",Dd=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],L=Dd.reduce(function(v,d){return v[d]=la+d,v},{}),Cr=["success","warning","info","question","error"],pt=Cr.reduce(function(v,d){return v[d]=la+d,v},{}),Cd="SweetAlert2:",ii=function(d){return d.charAt(0).toUpperCase()+d.slice(1)},Zt=function(d){console.warn("".concat(Cd," ").concat(l(d)==="object"?d.join(" "):d))},Pn=function(d){console.error("".concat(Cd," ").concat(d))},Td=[],bm=function(d){Td.includes(d)||(Td.push(d),Zt(d))},da=function(d,h){bm('"'.concat(d,'" is deprecated and will be removed in the next major release. Please use "').concat(h,'" instead.'))},oi=function(d){return typeof d=="function"?d():d},zo=function(d){return d&&typeof d.toPromise=="function"},si=function(d){return zo(d)?d.toPromise():Promise.resolve(d)},Go=function(d){return d&&Promise.resolve(d)===d},$t=function(){return document.body.querySelector(".".concat(L.container))},Ui=function(d){var h=$t();return h?h.querySelector(d):null},Jt=function(d){return Ui(".".concat(d))},Ve=function(){return Jt(L.popup)},$i=function(){return Jt(L.icon)},Ad=function(){return Jt(L["icon-content"])},ha=function(){return Jt(L.title)},fa=function(){return Jt(L["html-container"])},Sd=function(){return Jt(L.image)},Wo=function(){return Jt(L["progress-steps"])},qi=function(){return Jt(L["validation-message"])},En=function(){return Ui(".".concat(L.actions," .").concat(L.confirm))},ot=function(){return Ui(".".concat(L.actions," .").concat(L.cancel))},st=function(){return Ui(".".concat(L.actions," .").concat(L.deny))},pa=function(){return Jt(L["input-label"])},ai=function(){return Ui(".".concat(L.loader))},Hi=function(){return Jt(L.actions)},xd=function(){return Jt(L.footer)},Tr=function(){return Jt(L["timer-progress-bar"])},ga=function(){return Jt(L.close)},Md=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Ko=function(){var d=Ve();if(!d)return[];var h=d.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),y=Array.from(h).sort(function(J,De){var Te=parseInt(J.getAttribute("tabindex")||"0"),lt=parseInt(De.getAttribute("tabindex")||"0");return Te>lt?1:Te<lt?-1:0}),I=d.querySelectorAll(Md),j=Array.from(I).filter(function(J){return J.getAttribute("tabindex")!=="-1"});return se(new Set(y.concat(j))).filter(function(J){return sn(J)})},gc=function(){return Un(document.body,L.shown)&&!Un(document.body,L["toast-shown"])&&!Un(document.body,L["no-backdrop"])},ma=function(){var d=Ve();return d?Un(d,L.toast):!1},mc=function(){var d=Ve();return d?d.hasAttribute("data-loading"):!1},Xt=function(d,h){if(d.textContent="",h){var y=new DOMParser,I=y.parseFromString(h,"text/html"),j=I.querySelector("head");j&&Array.from(j.childNodes).forEach(function(De){d.appendChild(De)});var J=I.querySelector("body");J&&Array.from(J.childNodes).forEach(function(De){De instanceof HTMLVideoElement||De instanceof HTMLAudioElement?d.appendChild(De.cloneNode(!0)):d.appendChild(De)})}},Un=function(d,h){if(!h)return!1;for(var y=h.split(/\s+/),I=0;I<y.length;I++)if(!d.classList.contains(y[I]))return!1;return!0},Qo=function(d,h){Array.from(d.classList).forEach(function(y){!Object.values(L).includes(y)&&!Object.values(pt).includes(y)&&!Object.values(h.showClass||{}).includes(y)&&d.classList.remove(y)})},en=function(d,h,y){if(Qo(d,h),h.customClass&&h.customClass[y]){if(typeof h.customClass[y]!="string"&&!h.customClass[y].forEach){Zt("Invalid type of customClass.".concat(y,'! Expected string or iterable object, got "').concat(l(h.customClass[y]),'"'));return}Ie(d,h.customClass[y])}},zi=function(d,h){if(!h)return null;switch(h){case"select":case"textarea":case"file":return d.querySelector(".".concat(L.popup," > .").concat(L[h]));case"checkbox":return d.querySelector(".".concat(L.popup," > .").concat(L.checkbox," input"));case"radio":return d.querySelector(".".concat(L.popup," > .").concat(L.radio," input:checked"))||d.querySelector(".".concat(L.popup," > .").concat(L.radio," input:first-child"));case"range":return d.querySelector(".".concat(L.popup," > .").concat(L.range," input"));default:return d.querySelector(".".concat(L.popup," > .").concat(L.input))}},Ar=function(d){if(d.focus(),d.type!=="file"){var h=d.value;d.value="",d.value=h}},yc=function(d,h,y){!d||!h||(typeof h=="string"&&(h=h.split(/\s+/).filter(Boolean)),h.forEach(function(I){Array.isArray(d)?d.forEach(function(j){y?j.classList.add(I):j.classList.remove(I)}):y?d.classList.add(I):d.classList.remove(I)}))},Ie=function(d,h){yc(d,h,!0)},Nn=function(d,h){yc(d,h,!1)},bn=function(d,h){for(var y=Array.from(d.children),I=0;I<y.length;I++){var j=y[I];if(j instanceof HTMLElement&&Un(j,h))return j}},Sr=function(d,h,y){y==="".concat(parseInt(y))&&(y=parseInt(y)),y||parseInt(y)===0?d.style.setProperty(h,typeof y=="number"?"".concat(y,"px"):y):d.style.removeProperty(h)},Re=function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";d&&(d.style.display=h)},Nt=function(d){d&&(d.style.display="none")},ui=function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";d&&new MutationObserver(function(){Yo(d,d.innerHTML,h)}).observe(d,{childList:!0,subtree:!0})},Gi=function(d,h,y,I){var j=d.querySelector(h);j&&j.style.setProperty(y,I)},Yo=function(d,h){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";h?Re(d,y):Nt(d)},sn=function(d){return!!(d&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length))},Wi=function(){return!sn(En())&&!sn(st())&&!sn(ot())},Rd=function(d){return d.scrollHeight>d.clientHeight},Pd=function(d){var h=window.getComputedStyle(d),y=parseFloat(h.getPropertyValue("animation-duration")||"0"),I=parseFloat(h.getPropertyValue("transition-duration")||"0");return y>0||I>0},Ki=function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=Tr();y&&sn(y)&&(h&&(y.style.transition="none",y.style.width="100%"),setTimeout(function(){y.style.transition="width ".concat(d/1e3,"s linear"),y.style.width="0%"},10))},Nd=function(){var d=Tr();if(d){var h=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";var y=parseInt(window.getComputedStyle(d).width),I=h/y*100;d.style.width="".concat(I,"%")}},ya=function(){return typeof window>"u"||typeof document>"u"},va=`
 <div aria-labelledby="`.concat(L.title,'" aria-describedby="').concat(L["html-container"],'" class="').concat(L.popup,`" tabindex="-1">
   <button type="button" class="`).concat(L.close,`"></button>
   <ul class="`).concat(L["progress-steps"],`"></ul>
   <div class="`).concat(L.icon,`"></div>
   <img class="`).concat(L.image,`" />
   <h2 class="`).concat(L.title,'" id="').concat(L.title,`"></h2>
   <div class="`).concat(L["html-container"],'" id="').concat(L["html-container"],`"></div>
   <input class="`).concat(L.input,'" id="').concat(L.input,`" />
   <input type="file" class="`).concat(L.file,`" />
   <div class="`).concat(L.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(L.select,'" id="').concat(L.select,`"></select>
   <div class="`).concat(L.radio,`"></div>
   <label class="`).concat(L.checkbox,`">
     <input type="checkbox" id="`).concat(L.checkbox,`" />
     <span class="`).concat(L.label,`"></span>
   </label>
   <textarea class="`).concat(L.textarea,'" id="').concat(L.textarea,`"></textarea>
   <div class="`).concat(L["validation-message"],'" id="').concat(L["validation-message"],`"></div>
   <div class="`).concat(L.actions,`">
     <div class="`).concat(L.loader,`"></div>
     <button type="button" class="`).concat(L.confirm,`"></button>
     <button type="button" class="`).concat(L.deny,`"></button>
     <button type="button" class="`).concat(L.cancel,`"></button>
   </div>
   <div class="`).concat(L.footer,`"></div>
   <div class="`).concat(L["timer-progress-bar-container"],`">
     <div class="`).concat(L["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),xr=function(){var d=$t();return d?(d.remove(),Nn([document.documentElement,document.body],[L["no-backdrop"],L["toast-shown"],L["has-column"]]),!0):!1},Mr=function(){ve.currentInstance.resetValidationMessage()},kd=function(){var d=Ve(),h=bn(d,L.input),y=bn(d,L.file),I=d.querySelector(".".concat(L.range," input")),j=d.querySelector(".".concat(L.range," output")),J=bn(d,L.select),De=d.querySelector(".".concat(L.checkbox," input")),Te=bn(d,L.textarea);h.oninput=Mr,y.onchange=Mr,J.onchange=Mr,De.onchange=Mr,Te.oninput=Mr,I.oninput=function(){Mr(),j.value=I.value},I.onchange=function(){Mr(),j.value=I.value}},vc=function(d){return typeof d=="string"?document.querySelector(d):d},wc=function(d){var h=Ve();h.setAttribute("role",d.toast?"alert":"dialog"),h.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||h.setAttribute("aria-modal","true")},Od=function(d){window.getComputedStyle(d).direction==="rtl"&&Ie($t(),L.rtl)},Fd=function(d){var h=xr();if(ya()){Pn("SweetAlert2 requires document to initialize");return}var y=document.createElement("div");y.className=L.container,h&&Ie(y,L["no-transition"]),Xt(y,va);var I=vc(d.target);I.appendChild(y),wc(d),Od(I),kd()},_c=function(d,h){d instanceof HTMLElement?h.appendChild(d):l(d)==="object"?wa(d,h):d&&Xt(h,d)},wa=function(d,h){d.jquery?Vd(h,d):Xt(h,d.toString())},Vd=function(d,h){if(d.textContent="",0 in h)for(var y=0;y in h;y++)d.appendChild(h[y].cloneNode(!0));else d.appendChild(h.cloneNode(!0))},ir=function(){if(ya())return!1;var v=document.createElement("div");return typeof v.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof v.style.animation<"u"?"animationend":!1}(),Zo=function(d,h){var y=Hi(),I=ai();!y||!I||(!h.showConfirmButton&&!h.showDenyButton&&!h.showCancelButton?Nt(y):Re(y),en(y,h,"actions"),ci(y,I,h),Xt(I,h.loaderHtml||""),en(I,h,"loader"))};function ci(v,d,h){var y=En(),I=st(),j=ot();!y||!I||!j||(bc(y,"confirm",h),bc(I,"deny",h),bc(j,"cancel",h),Ec(y,I,j,h),h.reverseButtons&&(h.toast?(v.insertBefore(j,y),v.insertBefore(I,y)):(v.insertBefore(j,d),v.insertBefore(I,d),v.insertBefore(y,d))))}function Ec(v,d,h,y){if(!y.buttonsStyling){Nn([v,d,h],L.styled);return}Ie([v,d,h],L.styled),y.confirmButtonColor&&(v.style.backgroundColor=y.confirmButtonColor,Ie(v,L["default-outline"])),y.denyButtonColor&&(d.style.backgroundColor=y.denyButtonColor,Ie(d,L["default-outline"])),y.cancelButtonColor&&(h.style.backgroundColor=y.cancelButtonColor,Ie(h,L["default-outline"]))}function bc(v,d,h){var y=ii(d);Yo(v,h["show".concat(y,"Button")],"inline-block"),Xt(v,h["".concat(d,"ButtonText")]||""),v.setAttribute("aria-label",h["".concat(d,"ButtonAriaLabel")]||""),v.className=L[d],en(v,h,"".concat(d,"Button"))}var Ld=function(d,h){var y=ga();y&&(Xt(y,h.closeButtonHtml||""),en(y,h,"closeButton"),Yo(y,h.showCloseButton),y.setAttribute("aria-label",h.closeButtonAriaLabel||""))},jd=function(d,h){var y=$t();y&&(Bd(y,h.backdrop),Ic(y,h.position),Dc(y,h.grow),en(y,h,"container"))};function Bd(v,d){typeof d=="string"?v.style.background=d:d||Ie([document.documentElement,document.body],L["no-backdrop"])}function Ic(v,d){d&&(d in L?Ie(v,L[d]):(Zt('The "position" parameter is not valid, defaulting to "center"'),Ie(v,L.center)))}function Dc(v,d){d&&Ie(v,L["grow-".concat(d)])}var $e={innerParams:new WeakMap,domCache:new WeakMap},Ud=["input","file","range","select","radio","checkbox","textarea"],Im=function(d,h){var y=Ve();if(y){var I=$e.innerParams.get(d),j=!I||h.input!==I.input;Ud.forEach(function(J){var De=bn(y,L[J]);De&&(qd(J,h.inputAttributes),De.className=L[J],j&&Nt(De))}),h.input&&(j&&Dm(h),Cm(h))}},Dm=function(d){if(d.input){if(!nt[d.input]){Pn("Unexpected type of input! Expected ".concat(Object.keys(nt).join(" | "),', got "').concat(d.input,'"'));return}var h=Jo(d.input),y=nt[d.input](h,d);Re(h),d.inputAutoFocus&&setTimeout(function(){Ar(y)})}},$d=function(d){for(var h=0;h<d.attributes.length;h++){var y=d.attributes[h].name;["id","type","value","style"].includes(y)||d.removeAttribute(y)}},qd=function(d,h){var y=zi(Ve(),d);if(y){$d(y);for(var I in h)y.setAttribute(I,h[I])}},Cm=function(d){var h=Jo(d.input);l(d.customClass)==="object"&&Ie(h,d.customClass.input)},or=function(d,h){(!d.placeholder||h.inputPlaceholder)&&(d.placeholder=h.inputPlaceholder)},an=function(d,h,y){if(y.inputLabel){var I=document.createElement("label"),j=L["input-label"];I.setAttribute("for",d.id),I.className=j,l(y.customClass)==="object"&&Ie(I,y.customClass.inputLabel),I.innerText=y.inputLabel,h.insertAdjacentElement("beforebegin",I)}},Jo=function(d){return bn(Ve(),L[d]||L.input)},li=function(d,h){["string","number"].includes(l(h))?d.value="".concat(h):Go(h)||Zt('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(l(h),'"'))},nt={};nt.text=nt.email=nt.password=nt.number=nt.tel=nt.url=nt.search=nt.date=nt["datetime-local"]=nt.time=nt.week=nt.month=function(v,d){return li(v,d.inputValue),an(v,v,d),or(v,d),v.type=d.input,v},nt.file=function(v,d){return an(v,v,d),or(v,d),v},nt.range=function(v,d){var h=v.querySelector("input"),y=v.querySelector("output");return li(h,d.inputValue),h.type=d.input,li(y,d.inputValue),an(h,v,d),v},nt.select=function(v,d){if(v.textContent="",d.inputPlaceholder){var h=document.createElement("option");Xt(h,d.inputPlaceholder),h.value="",h.disabled=!0,h.selected=!0,v.appendChild(h)}return an(v,v,d),v},nt.radio=function(v){return v.textContent="",v},nt.checkbox=function(v,d){var h=zi(Ve(),"checkbox");h.value="1",h.checked=!!d.inputValue;var y=v.querySelector("span");return Xt(y,d.inputPlaceholder),h},nt.textarea=function(v,d){li(v,d.inputValue),or(v,d),an(v,v,d);var h=function(I){return parseInt(window.getComputedStyle(I).marginLeft)+parseInt(window.getComputedStyle(I).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var y=parseInt(window.getComputedStyle(Ve()).width),I=function(){if(document.body.contains(v)){var J=v.offsetWidth+h(v);J>y?Ve().style.width="".concat(J,"px"):Sr(Ve(),"width",d.width)}};new MutationObserver(I).observe(v,{attributes:!0,attributeFilter:["style"]})}}),v};var We=function(d,h){var y=fa();y&&(ui(y),en(y,h,"htmlContainer"),h.html?(_c(h.html,y),Re(y,"block")):h.text?(y.textContent=h.text,Re(y,"block")):Nt(y),Im(d,h))},_a=function(d,h){var y=xd();y&&(ui(y),Yo(y,h.footer,"block"),h.footer&&_c(h.footer,y),en(y,h,"footer"))},Xo=function(d,h){var y=$e.innerParams.get(d),I=$i();if(I){if(y&&h.icon===y.icon){zd(I,h),Qi(I,h);return}if(!h.icon&&!h.iconHtml){Nt(I);return}if(h.icon&&Object.keys(pt).indexOf(h.icon)===-1){Pn('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(h.icon,'"')),Nt(I);return}Re(I),zd(I,h),Qi(I,h),Ie(I,h.showClass&&h.showClass.icon)}},Qi=function(d,h){for(var y=0,I=Object.entries(pt);y<I.length;y++){var j=K(I[y],2),J=j[0],De=j[1];h.icon!==J&&Nn(d,De)}Ie(d,h.icon&&pt[h.icon]),Sm(d,h),Tm(),en(d,h,"icon")},Tm=function(){var d=Ve();if(d)for(var h=window.getComputedStyle(d).getPropertyValue("background-color"),y=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),I=0;I<y.length;I++)y[I].style.backgroundColor=h},Hd=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Am=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,zd=function(d,h){if(!(!h.icon&&!h.iconHtml)){var y=d.innerHTML,I="";if(h.iconHtml)I=Gd(h.iconHtml);else if(h.icon==="success")I=Hd,y=y.replace(/ style=".*?"/g,"");else if(h.icon==="error")I=Am;else if(h.icon){var j={question:"?",warning:"!",info:"i"};I=Gd(j[h.icon])}y.trim()!==I.trim()&&Xt(d,I)}},Sm=function(d,h){if(h.iconColor){d.style.color=h.iconColor,d.style.borderColor=h.iconColor;for(var y=0,I=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];y<I.length;y++){var j=I[y];Gi(d,j,"background-color",h.iconColor)}Gi(d,".swal2-success-ring","border-color",h.iconColor)}},Gd=function(d){return'<div class="'.concat(L["icon-content"],'">').concat(d,"</div>")},es=function(d,h){var y=Sd();if(y){if(!h.imageUrl){Nt(y);return}Re(y,""),y.setAttribute("src",h.imageUrl),y.setAttribute("alt",h.imageAlt||""),Sr(y,"width",h.imageWidth),Sr(y,"height",h.imageHeight),y.className=L.image,en(y,h,"image")}},Rr=function(d,h){var y=$t(),I=Ve();if(!(!y||!I)){if(h.toast){Sr(y,"width",h.width),I.style.width="100%";var j=ai();j&&I.insertBefore(j,$i())}else Sr(I,"width",h.width);Sr(I,"padding",h.padding),h.color&&(I.style.color=h.color),h.background&&(I.style.background=h.background),Nt(qi()),Wd(I,h)}},Wd=function(d,h){var y=h.showClass||{};d.className="".concat(L.popup," ").concat(sn(d)?y.popup:""),h.toast?(Ie([document.documentElement,document.body],L["toast-shown"]),Ie(d,L.toast)):Ie(d,L.modal),en(d,h,"popup"),typeof h.customClass=="string"&&Ie(d,h.customClass),h.icon&&Ie(d,L["icon-".concat(h.icon)])},Kd=function(d,h){var y=Wo();if(y){var I=h.progressSteps,j=h.currentProgressStep;if(!I||I.length===0||j===void 0){Nt(y);return}Re(y),y.textContent="",j>=I.length&&Zt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),I.forEach(function(J,De){var Te=Qd(J);if(y.appendChild(Te),De===j&&Ie(Te,L["active-progress-step"]),De!==I.length-1){var lt=Yi(h);y.appendChild(lt)}})}},Qd=function(d){var h=document.createElement("li");return Ie(h,L["progress-step"]),Xt(h,d),h},Yi=function(d){var h=document.createElement("li");return Ie(h,L["progress-step-line"]),d.progressStepsDistance&&Sr(h,"width",d.progressStepsDistance),h},xm=function(d,h){var y=ha();y&&(ui(y),Yo(y,h.title||h.titleText,"block"),h.title&&_c(h.title,y),h.titleText&&(y.innerText=h.titleText),en(y,h,"title"))},Yd=function(d,h){Rr(d,h),jd(d,h),Kd(d,h),Xo(d,h),es(d,h),xm(d,h),Ld(d,h),We(d,h),Zo(d,h),_a(d,h);var y=Ve();typeof h.didRender=="function"&&y&&h.didRender(y)},Mm=function(){return sn(Ve())},sr=function(){var d;return(d=En())===null||d===void 0?void 0:d.click()},Rm=function(){var d;return(d=st())===null||d===void 0?void 0:d.click()},Pm=function(){var d;return(d=ot())===null||d===void 0?void 0:d.click()},$n=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),ts=function(d){d.keydownTarget&&d.keydownHandlerAdded&&(d.keydownTarget.removeEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!1)},Zd=function(d,h,y){ts(d),h.toast||(d.keydownHandler=function(I){return Cc(h,I,y)},d.keydownTarget=h.keydownListenerCapture?window:Ve(),d.keydownListenerCapture=h.keydownListenerCapture,d.keydownTarget.addEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!0)},di=function(d,h){var y,I=Ko();if(I.length){d=d+h,d===I.length?d=0:d===-1&&(d=I.length-1),I[d].focus();return}(y=Ve())===null||y===void 0||y.focus()},Zi=["ArrowRight","ArrowDown"],Jd=["ArrowLeft","ArrowUp"],Cc=function(d,h,y){d&&(h.isComposing||h.keyCode===229||(d.stopKeydownPropagation&&h.stopPropagation(),h.key==="Enter"?rt(h,d):h.key==="Tab"?Nm(h):[].concat(Zi,Jd).includes(h.key)?km(h.key):h.key==="Escape"&&Xd(h,d,y)))},rt=function(d,h){if(oi(h.allowEnterKey)){var y=zi(Ve(),h.input);if(d.target&&y&&d.target instanceof HTMLElement&&d.target.outerHTML===y.outerHTML){if(["textarea","file"].includes(h.input))return;sr(),d.preventDefault()}}},Nm=function(d){for(var h=d.target,y=Ko(),I=-1,j=0;j<y.length;j++)if(h===y[j]){I=j;break}d.shiftKey?di(I,-1):di(I,1),d.stopPropagation(),d.preventDefault()},km=function(d){var h=Hi(),y=En(),I=st(),j=ot();if(!(!h||!y||!I||!j)){var J=[y,I,j];if(!(document.activeElement instanceof HTMLElement&&!J.includes(document.activeElement))){var De=Zi.includes(d)?"nextElementSibling":"previousElementSibling",Te=document.activeElement;if(Te){for(var lt=0;lt<h.children.length;lt++){if(Te=Te[De],!Te)return;if(Te instanceof HTMLButtonElement&&sn(Te))break}Te instanceof HTMLButtonElement&&Te.focus()}}}},Xd=function(d,h,y){oi(h.allowEscapeKey)&&(d.preventDefault(),y($n.esc))},hi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},eh=function(){var d=$t(),h=Array.from(document.body.children);h.forEach(function(y){y.contains(d)||(y.hasAttribute("aria-hidden")&&y.setAttribute("data-previous-aria-hidden",y.getAttribute("aria-hidden")||""),y.setAttribute("aria-hidden","true"))})},ns=function(){var d=Array.from(document.body.children);d.forEach(function(h){h.hasAttribute("data-previous-aria-hidden")?(h.setAttribute("aria-hidden",h.getAttribute("data-previous-aria-hidden")||""),h.removeAttribute("data-previous-aria-hidden")):h.removeAttribute("aria-hidden")})},Tc=typeof window<"u"&&!!window.GestureEvent,ar=function(){if(Tc&&!Un(document.body,L.iosfix)){var d=document.body.scrollTop;document.body.style.top="".concat(d*-1,"px"),Ie(document.body,L.iosfix),th()}},th=function(){var d=$t();if(d){var h;d.ontouchstart=function(y){h=Om(y)},d.ontouchmove=function(y){h&&(y.preventDefault(),y.stopPropagation())}}},Om=function(d){var h=d.target,y=$t(),I=fa();return!y||!I||rs(d)||nh(d)?!1:h===y||!Rd(y)&&h instanceof HTMLElement&&h.tagName!=="INPUT"&&h.tagName!=="TEXTAREA"&&!(Rd(I)&&I.contains(h))},rs=function(d){return d.touches&&d.touches.length&&d.touches[0].touchType==="stylus"},nh=function(d){return d.touches&&d.touches.length>1},Ac=function(){if(Un(document.body,L.iosfix)){var d=parseInt(document.body.style.top,10);Nn(document.body,L.iosfix),document.body.style.top="",document.body.scrollTop=d*-1}},Ea=function(){var d=document.createElement("div");d.className=L["scrollbar-measure"],document.body.appendChild(d);var h=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),h},fi=null,ba=function(d){fi===null&&(document.body.scrollHeight>window.innerHeight||d==="scroll")&&(fi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(fi+Ea(),"px"))},Fm=function(){fi!==null&&(document.body.style.paddingRight="".concat(fi,"px"),fi=null)};function Sc(v,d,h,y){ma()?xc(v,y):(Ho(h).then(function(){return xc(v,y)}),ts(ve)),Tc?(d.setAttribute("style","display:none !important"),d.removeAttribute("class"),d.innerHTML=""):d.remove(),gc()&&(Fm(),Ac(),ns()),is()}function is(){Nn([document.documentElement,document.body],[L.shown,L["height-auto"],L["no-backdrop"],L["toast-shown"]])}function ur(v){v=ih(v);var d=hi.swalPromiseResolve.get(this),h=rh(this);this.isAwaitingPromise?v.isDismissed||(pi(this),d(v)):h&&d(v)}var rh=function(d){var h=Ve();if(!h)return!1;var y=$e.innerParams.get(d);if(!y||Un(h,y.hideClass.popup))return!1;Nn(h,y.showClass.popup),Ie(h,y.hideClass.popup);var I=$t();return Nn(I,y.showClass.backdrop),Ie(I,y.hideClass.backdrop),Da(d,h,y),!0};function Ia(v){var d=hi.swalPromiseReject.get(this);pi(this),d&&d(v)}var pi=function(d){d.isAwaitingPromise&&(delete d.isAwaitingPromise,$e.innerParams.get(d)||d._destroy())},ih=function(d){return typeof d>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d)},Da=function(d,h,y){var I=$t(),j=ir&&Pd(h);typeof y.willClose=="function"&&y.willClose(h),j?oh(d,h,I,y.returnFocus,y.didClose):Sc(d,I,y.returnFocus,y.didClose)},oh=function(d,h,y,I,j){ir&&(ve.swalCloseEventFinishedCallback=Sc.bind(null,d,y,I,j),h.addEventListener(ir,function(J){J.target===h&&(ve.swalCloseEventFinishedCallback(),delete ve.swalCloseEventFinishedCallback)}))},xc=function(d,h){setTimeout(function(){typeof h=="function"&&h.bind(d.params)(),d._destroy&&d._destroy()})},In=function(d){var h=Ve();if(h||new ph,h=Ve(),!!h){var y=ai();ma()?Nt($i()):sh(h,d),Re(y),h.setAttribute("data-loading","true"),h.setAttribute("aria-busy","true"),h.focus()}},sh=function(d,h){var y=Hi(),I=ai();!y||!I||(!h&&sn(En())&&(h=En()),Re(y),h&&(Nt(h),I.setAttribute("data-button-to-replace",h.className),y.insertBefore(I,h)),Ie([d,y],L.loading))},ah=function(d,h){h.input==="select"||h.input==="radio"?lh(d,h):["text","email","number","tel","textarea"].some(function(y){return y===h.input})&&(zo(h.inputValue)||Go(h.inputValue))&&(In(En()),dh(d,h))},uh=function(d,h){var y=d.getInput();if(!y)return null;switch(h.input){case"checkbox":return ch(y);case"radio":return Ca(y);case"file":return un(y);default:return h.inputAutoTrim?y.value.trim():y.value}},ch=function(d){return d.checked?1:0},Ca=function(d){return d.checked?d.value:null},un=function(d){return d.files&&d.files.length?d.getAttribute("multiple")!==null?d.files:d.files[0]:null},lh=function(d,h){var y=Ve();if(y){var I=function(J){h.input==="select"?Ji(y,p(J),h):h.input==="radio"&&u(y,p(J),h)};zo(h.inputOptions)||Go(h.inputOptions)?(In(En()),si(h.inputOptions).then(function(j){d.hideLoading(),I(j)})):l(h.inputOptions)==="object"?I(h.inputOptions):Pn("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(l(h.inputOptions)))}},dh=function(d,h){var y=d.getInput();y&&(Nt(y),si(h.inputValue).then(function(I){y.value=h.input==="number"?"".concat(parseFloat(I)||0):"".concat(I),Re(y),y.focus(),d.hideLoading()}).catch(function(I){Pn("Error in inputValue promise: ".concat(I)),y.value="",Re(y),y.focus(),d.hideLoading()}))};function Ji(v,d,h){var y=bn(v,L.select);if(y){var I=function(J,De,Te){var lt=document.createElement("option");lt.value=Te,Xt(lt,De),lt.selected=m(Te,h.inputValue),J.appendChild(lt)};d.forEach(function(j){var J=j[0],De=j[1];if(Array.isArray(De)){var Te=document.createElement("optgroup");Te.label=J,Te.disabled=!1,y.appendChild(Te),De.forEach(function(lt){return I(Te,lt[1],lt[0])})}else I(y,De,J)}),y.focus()}}function u(v,d,h){var y=bn(v,L.radio);if(y){d.forEach(function(j){var J=j[0],De=j[1],Te=document.createElement("input"),lt=document.createElement("label");Te.type="radio",Te.name=L.radio,Te.value=J,m(J,h.inputValue)&&(Te.checked=!0);var Mc=document.createElement("span");Xt(Mc,De),Mc.className=L.label,lt.appendChild(Te),lt.appendChild(Mc),y.appendChild(lt)});var I=y.querySelectorAll("input");I.length&&I[0].focus()}}var p=function v(d){var h=[];return d instanceof Map?d.forEach(function(y,I){var j=y;l(j)==="object"&&(j=v(j)),h.push([I,j])}):Object.keys(d).forEach(function(y){var I=d[y];l(I)==="object"&&(I=v(I)),h.push([y,I])}),h},m=function(d,h){return!!h&&h.toString()===d.toString()},_=void 0,x=function(d){var h=$e.innerParams.get(d);d.disableButtons(),h.input?Be(d,"confirm"):Pr(d,!0)},F=function(d){var h=$e.innerParams.get(d);d.disableButtons(),h.returnInputValueOnDeny?Be(d,"deny"):Se(d,!1)},H=function(d,h){d.disableButtons(),h($n.cancel)},Be=function(d,h){var y=$e.innerParams.get(d);if(!y.input){Pn('The "input" parameter is needed to be set when using returnInputValueOn'.concat(ii(h)));return}var I=d.getInput(),j=uh(d,y);y.inputValidator?kt(d,j,h):I&&!I.checkValidity()?(d.enableButtons(),d.showValidationMessage(y.validationMessage||I.validationMessage)):h==="deny"?Se(d,j):Pr(d,j)},kt=function(d,h,y){var I=$e.innerParams.get(d);d.disableInput();var j=Promise.resolve().then(function(){return si(I.inputValidator(h,I.validationMessage))});j.then(function(J){d.enableButtons(),d.enableInput(),J?d.showValidationMessage(J):y==="deny"?Se(d,h):Pr(d,h)})},Se=function(d,h){var y=$e.innerParams.get(d||_);if(y.showLoaderOnDeny&&In(st()),y.preDeny){d.isAwaitingPromise=!0;var I=Promise.resolve().then(function(){return si(y.preDeny(h,y.validationMessage))});I.then(function(j){j===!1?(d.hideLoading(),pi(d)):d.close({isDenied:!0,value:typeof j>"u"?h:j})}).catch(function(j){return Ft(d||_,j)})}else d.close({isDenied:!0,value:h})},Ot=function(d,h){d.close({isConfirmed:!0,value:h})},Ft=function(d,h){d.rejectPromise(h)},Pr=function(d,h){var y=$e.innerParams.get(d||_);if(y.showLoaderOnConfirm&&In(),y.preConfirm){d.resetValidationMessage(),d.isAwaitingPromise=!0;var I=Promise.resolve().then(function(){return si(y.preConfirm(h,y.validationMessage))});I.then(function(j){sn(qi())||j===!1?(d.hideLoading(),pi(d)):Ot(d,typeof j>"u"?h:j)}).catch(function(j){return Ft(d||_,j)})}else Ot(d,h)};function tn(){var v=$e.innerParams.get(this);if(v){var d=$e.domCache.get(this);Nt(d.loader),ma()?v.icon&&Re($i()):Ta(d),Nn([d.popup,d.actions],L.loading),d.popup.removeAttribute("aria-busy"),d.popup.removeAttribute("data-loading"),d.confirmButton.disabled=!1,d.denyButton.disabled=!1,d.cancelButton.disabled=!1}}var Ta=function(d){var h=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));h.length?Re(h[0],"inline-block"):Wi()&&Nt(d.actions)};function Aa(){var v=$e.innerParams.get(this),d=$e.domCache.get(this);return d?zi(d.popup,v.input):null}function Lb(v,d,h){var y=$e.domCache.get(v);d.forEach(function(I){y[I].disabled=h})}function jb(v,d){var h=Ve();if(!(!h||!v))if(v.type==="radio")for(var y=h.querySelectorAll('[name="'.concat(L.radio,'"]')),I=0;I<y.length;I++)y[I].disabled=d;else v.disabled=d}function Bb(){Lb(this,["confirmButton","denyButton","cancelButton"],!1)}function Ub(){Lb(this,["confirmButton","denyButton","cancelButton"],!0)}function $b(){jb(this.getInput(),!1)}function qb(){jb(this.getInput(),!0)}function Hb(v){var d=$e.domCache.get(this),h=$e.innerParams.get(this);Xt(d.validationMessage,v),d.validationMessage.className=L["validation-message"],h.customClass&&h.customClass.validationMessage&&Ie(d.validationMessage,h.customClass.validationMessage),Re(d.validationMessage);var y=this.getInput();y&&(y.setAttribute("aria-invalid","true"),y.setAttribute("aria-describedby",L["validation-message"]),Ar(y),Ie(y,L.inputerror))}function zb(){var v=$e.domCache.get(this);v.validationMessage&&Nt(v.validationMessage);var d=this.getInput();d&&(d.removeAttribute("aria-invalid"),d.removeAttribute("aria-describedby"),Nn(d,L.inputerror))}var Sa={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},MP=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],RP={},PP=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Gb=function(d){return Object.prototype.hasOwnProperty.call(Sa,d)},Wb=function(d){return MP.indexOf(d)!==-1},Kb=function(d){return RP[d]},NP=function(d){Gb(d)||Zt('Unknown parameter "'.concat(d,'"'))},kP=function(d){PP.includes(d)&&Zt('The parameter "'.concat(d,'" is incompatible with toasts'))},OP=function(d){var h=Kb(d);h&&da(d,h)},FP=function(d){d.backdrop===!1&&d.allowOutsideClick&&Zt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var h in d)NP(h),d.toast&&kP(h),OP(h)};function Qb(v){var d=Ve(),h=$e.innerParams.get(this);if(!d||Un(d,h.hideClass.popup)){Zt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var y=VP(v),I=Object.assign({},h,y);Yd(this,I),$e.innerParams.set(this,I),Object.defineProperties(this,{params:{value:Object.assign({},this.params,v),writable:!1,enumerable:!0}})}var VP=function(d){var h={};return Object.keys(d).forEach(function(y){Wb(y)?h[y]=d[y]:Zt("Invalid parameter to update: ".concat(y))}),h};function Yb(){var v=$e.domCache.get(this),d=$e.innerParams.get(this);if(!d){Zb(this);return}v.popup&&ve.swalCloseEventFinishedCallback&&(ve.swalCloseEventFinishedCallback(),delete ve.swalCloseEventFinishedCallback),typeof d.didDestroy=="function"&&d.didDestroy(),LP(this)}var LP=function(d){Zb(d),delete d.params,delete ve.keydownHandler,delete ve.keydownTarget,delete ve.currentInstance},Zb=function(d){d.isAwaitingPromise?(Vm($e,d),d.isAwaitingPromise=!0):(Vm(hi,d),Vm($e,d),delete d.isAwaitingPromise,delete d.disableButtons,delete d.enableButtons,delete d.getInput,delete d.disableInput,delete d.enableInput,delete d.hideLoading,delete d.disableLoading,delete d.showValidationMessage,delete d.resetValidationMessage,delete d.close,delete d.closePopup,delete d.closeModal,delete d.closeToast,delete d.rejectPromise,delete d.update,delete d._destroy)},Vm=function(d,h){for(var y in d)d[y].delete(h)},jP=Object.freeze({__proto__:null,_destroy:Yb,close:ur,closeModal:ur,closePopup:ur,closeToast:ur,disableButtons:Ub,disableInput:qb,disableLoading:tn,enableButtons:Bb,enableInput:$b,getInput:Aa,handleAwaitingPromise:pi,hideLoading:tn,rejectPromise:Ia,resetValidationMessage:zb,showValidationMessage:Hb,update:Qb}),BP=function(d,h,y){d.toast?UP(d,h,y):(qP(h),HP(h),zP(d,h,y))},UP=function(d,h,y){h.popup.onclick=function(){d&&($P(d)||d.timer||d.input)||y($n.close)}},$P=function(d){return!!(d.showConfirmButton||d.showDenyButton||d.showCancelButton||d.showCloseButton)},hh=!1,qP=function(d){d.popup.onmousedown=function(){d.container.onmouseup=function(h){d.container.onmouseup=function(){},h.target===d.container&&(hh=!0)}}},HP=function(d){d.container.onmousedown=function(h){h.target===d.container&&h.preventDefault(),d.popup.onmouseup=function(y){d.popup.onmouseup=function(){},(y.target===d.popup||y.target instanceof HTMLElement&&d.popup.contains(y.target))&&(hh=!0)}}},zP=function(d,h,y){h.container.onclick=function(I){if(hh){hh=!1;return}I.target===h.container&&oi(d.allowOutsideClick)&&y($n.backdrop)}},GP=function(d){return l(d)==="object"&&d.jquery},Jb=function(d){return d instanceof Element||GP(d)},WP=function(d){var h={};return l(d[0])==="object"&&!Jb(d[0])?Object.assign(h,d[0]):["title","html","icon"].forEach(function(y,I){var j=d[I];typeof j=="string"||Jb(j)?h[y]=j:j!==void 0&&Pn("Unexpected type of ".concat(y,'! Expected "string" or "Element", got ').concat(l(j)))}),h};function KP(){for(var v=this,d=arguments.length,h=new Array(d),y=0;y<d;y++)h[y]=arguments[y];return i(v,h)}function QP(v){var d=function(h){function y(){return f(this,y),e(this,y,arguments)}return E(y,h),w(y,[{key:"_main",value:function(j,J){return q(M(y.prototype),"_main",this).call(this,j,Object.assign({},v,J))}}])}(this);return d}var YP=function(){return ve.timeout&&ve.timeout.getTimerLeft()},Xb=function(){if(ve.timeout)return Nd(),ve.timeout.stop()},eI=function(){if(ve.timeout){var d=ve.timeout.start();return Ki(d),d}},ZP=function(){var d=ve.timeout;return d&&(d.running?Xb():eI())},JP=function(d){if(ve.timeout){var h=ve.timeout.increase(d);return Ki(h,!0),h}},XP=function(){return!!(ve.timeout&&ve.timeout.isRunning())},tI=!1,Lm={};function eN(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Lm[v]=this,tI||(document.body.addEventListener("click",tN),tI=!0)}var tN=function(d){for(var h=d.target;h&&h!==document;h=h.parentNode)for(var y in Lm){var I=h.getAttribute(y);if(I){Lm[y].fire({template:I});return}}},nN=Object.freeze({__proto__:null,argsToParams:WP,bindClickHandler:eN,clickCancel:Pm,clickConfirm:sr,clickDeny:Rm,enableLoading:In,fire:KP,getActions:Hi,getCancelButton:ot,getCloseButton:ga,getConfirmButton:En,getContainer:$t,getDenyButton:st,getFocusableElements:Ko,getFooter:xd,getHtmlContainer:fa,getIcon:$i,getIconContent:Ad,getImage:Sd,getInputLabel:pa,getLoader:ai,getPopup:Ve,getProgressSteps:Wo,getTimerLeft:YP,getTimerProgressBar:Tr,getTitle:ha,getValidationMessage:qi,increaseTimer:JP,isDeprecatedParameter:Kb,isLoading:mc,isTimerRunning:XP,isUpdatableParameter:Wb,isValidParameter:Gb,isVisible:Mm,mixin:QP,resumeTimer:eI,showLoading:In,stopTimer:Xb,toggleTimer:ZP}),rN=function(){function v(d,h){f(this,v),this.callback=d,this.remaining=h,this.running=!1,this.start()}return w(v,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(h){var y=this.running;return y&&this.stop(),this.remaining+=h,y&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),nI=["swal-title","swal-html","swal-footer"],iN=function(d){var h=typeof d.template=="string"?document.querySelector(d.template):d.template;if(!h)return{};var y=h.content;hN(y);var I=Object.assign(oN(y),sN(y),aN(y),uN(y),cN(y),lN(y),dN(y,nI));return I},oN=function(d){var h={},y=Array.from(d.querySelectorAll("swal-param"));return y.forEach(function(I){os(I,["name","value"]);var j=I.getAttribute("name"),J=I.getAttribute("value");typeof Sa[j]=="boolean"?h[j]=J!=="false":l(Sa[j])==="object"?h[j]=JSON.parse(J):h[j]=J}),h},sN=function(d){var h={},y=Array.from(d.querySelectorAll("swal-function-param"));return y.forEach(function(I){var j=I.getAttribute("name"),J=I.getAttribute("value");h[j]=new Function("return ".concat(J))()}),h},aN=function(d){var h={},y=Array.from(d.querySelectorAll("swal-button"));return y.forEach(function(I){os(I,["type","color","aria-label"]);var j=I.getAttribute("type");h["".concat(j,"ButtonText")]=I.innerHTML,h["show".concat(ii(j),"Button")]=!0,I.hasAttribute("color")&&(h["".concat(j,"ButtonColor")]=I.getAttribute("color")),I.hasAttribute("aria-label")&&(h["".concat(j,"ButtonAriaLabel")]=I.getAttribute("aria-label"))}),h},uN=function(d){var h={},y=d.querySelector("swal-image");return y&&(os(y,["src","width","height","alt"]),y.hasAttribute("src")&&(h.imageUrl=y.getAttribute("src")),y.hasAttribute("width")&&(h.imageWidth=y.getAttribute("width")),y.hasAttribute("height")&&(h.imageHeight=y.getAttribute("height")),y.hasAttribute("alt")&&(h.imageAlt=y.getAttribute("alt"))),h},cN=function(d){var h={},y=d.querySelector("swal-icon");return y&&(os(y,["type","color"]),y.hasAttribute("type")&&(h.icon=y.getAttribute("type")),y.hasAttribute("color")&&(h.iconColor=y.getAttribute("color")),h.iconHtml=y.innerHTML),h},lN=function(d){var h={},y=d.querySelector("swal-input");y&&(os(y,["type","label","placeholder","value"]),h.input=y.getAttribute("type")||"text",y.hasAttribute("label")&&(h.inputLabel=y.getAttribute("label")),y.hasAttribute("placeholder")&&(h.inputPlaceholder=y.getAttribute("placeholder")),y.hasAttribute("value")&&(h.inputValue=y.getAttribute("value")));var I=Array.from(d.querySelectorAll("swal-input-option"));return I.length&&(h.inputOptions={},I.forEach(function(j){os(j,["value"]);var J=j.getAttribute("value"),De=j.innerHTML;h.inputOptions[J]=De})),h},dN=function(d,h){var y={};for(var I in h){var j=h[I],J=d.querySelector(j);J&&(os(J,[]),y[j.replace(/^swal-/,"")]=J.innerHTML.trim())}return y},hN=function(d){var h=nI.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(d.children).forEach(function(y){var I=y.tagName.toLowerCase();h.includes(I)||Zt("Unrecognized element <".concat(I,">"))})},os=function(d,h){Array.from(d.attributes).forEach(function(y){h.indexOf(y.name)===-1&&Zt(['Unrecognized attribute "'.concat(y.name,'" on <').concat(d.tagName.toLowerCase(),">."),"".concat(h.length?"Allowed attributes are: ".concat(h.join(", ")):"To set the value, use HTML within the element.")])})},rI=10,fN=function(d){var h=$t(),y=Ve();typeof d.willOpen=="function"&&d.willOpen(y);var I=window.getComputedStyle(document.body),j=I.overflowY;yN(h,y,d),setTimeout(function(){gN(h,y)},rI),gc()&&(mN(h,d.scrollbarPadding,j),eh()),!ma()&&!ve.previousActiveElement&&(ve.previousActiveElement=document.activeElement),typeof d.didOpen=="function"&&setTimeout(function(){return d.didOpen(y)}),Nn(h,L["no-transition"])},pN=function v(d){var h=Ve();if(!(d.target!==h||!ir)){var y=$t();h.removeEventListener(ir,v),y.style.overflowY="auto"}},gN=function(d,h){ir&&Pd(h)?(d.style.overflowY="hidden",h.addEventListener(ir,pN)):d.style.overflowY="auto"},mN=function(d,h,y){ar(),h&&y!=="hidden"&&ba(y),setTimeout(function(){d.scrollTop=0})},yN=function(d,h,y){Ie(d,y.showClass.backdrop),y.animation?(h.style.setProperty("opacity","0","important"),Re(h,"grid"),setTimeout(function(){Ie(h,y.showClass.popup),h.style.removeProperty("opacity")},rI)):Re(h,"grid"),Ie([document.documentElement,document.body],L.shown),y.heightAuto&&y.backdrop&&!y.toast&&Ie([document.documentElement,document.body],L["height-auto"])},iI={email:function(d,h){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(d)?Promise.resolve():Promise.resolve(h||"Invalid email address")},url:function(d,h){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(h||"Invalid URL")}};function vN(v){v.inputValidator||(v.input==="email"&&(v.inputValidator=iI.email),v.input==="url"&&(v.inputValidator=iI.url))}function wN(v){(!v.target||typeof v.target=="string"&&!document.querySelector(v.target)||typeof v.target!="string"&&!v.target.appendChild)&&(Zt('Target parameter is not valid, defaulting to "body"'),v.target="body")}function _N(v){vN(v),v.showLoaderOnConfirm&&!v.preConfirm&&Zt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),wN(v),typeof v.title=="string"&&(v.title=v.title.split(`
`).join("<br />")),Fd(v)}var Nr,fh=new WeakMap,gt=function(){function v(){if(f(this,v),rr(this,fh,void 0),!(typeof window>"u")){Nr=this;for(var d=arguments.length,h=new Array(d),y=0;y<d;y++)h[y]=arguments[y];var I=Object.freeze(this.constructor.argsToParams(h));this.params=I,this.isAwaitingPromise=!1,r(fh,this,this._main(Nr.params))}}return w(v,[{key:"_main",value:function(h){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(FP(Object.assign({},y,h)),ve.currentInstance){var I=hi.swalPromiseResolve.get(ve.currentInstance),j=ve.currentInstance.isAwaitingPromise;ve.currentInstance._destroy(),j||I({isDismissed:!0}),gc()&&ns()}ve.currentInstance=Nr;var J=bN(h,y);_N(J),Object.freeze(J),ve.timeout&&(ve.timeout.stop(),delete ve.timeout),clearTimeout(ve.restoreFocusTimeout);var De=IN(Nr);return Yd(Nr,J),$e.innerParams.set(Nr,J),EN(Nr,De,J)}},{key:"then",value:function(h){return n(fh,this).then(h)}},{key:"finally",value:function(h){return n(fh,this).finally(h)}}])}(),EN=function(d,h,y){return new Promise(function(I,j){var J=function(Te){d.close({isDismissed:!0,dismiss:Te})};hi.swalPromiseResolve.set(d,I),hi.swalPromiseReject.set(d,j),h.confirmButton.onclick=function(){x(d)},h.denyButton.onclick=function(){F(d)},h.cancelButton.onclick=function(){H(d,J)},h.closeButton.onclick=function(){J($n.close)},BP(y,h,J),Zd(ve,y,J),ah(d,y),fN(y),DN(ve,y,J),CN(h,y),setTimeout(function(){h.container.scrollTop=0})})},bN=function(d,h){var y=iN(d),I=Object.assign({},Sa,h,y,d);return I.showClass=Object.assign({},Sa.showClass,I.showClass),I.hideClass=Object.assign({},Sa.hideClass,I.hideClass),I.animation===!1&&(I.showClass={backdrop:"swal2-noanimation"},I.hideClass={}),I},IN=function(d){var h={popup:Ve(),container:$t(),actions:Hi(),confirmButton:En(),denyButton:st(),cancelButton:ot(),loader:ai(),closeButton:ga(),validationMessage:qi(),progressSteps:Wo()};return $e.domCache.set(d,h),h},DN=function(d,h,y){var I=Tr();Nt(I),h.timer&&(d.timeout=new rN(function(){y("timer"),delete d.timeout},h.timer),h.timerProgressBar&&(Re(I),en(I,h,"timerProgressBar"),setTimeout(function(){d.timeout&&d.timeout.running&&Ki(h.timer)})))},CN=function(d,h){if(!h.toast){if(!oi(h.allowEnterKey)){AN();return}TN(d,h)||di(-1,1)}},TN=function(d,h){return h.focusDeny&&sn(d.denyButton)?(d.denyButton.focus(),!0):h.focusCancel&&sn(d.cancelButton)?(d.cancelButton.focus(),!0):h.focusConfirm&&sn(d.confirmButton)?(d.confirmButton.focus(),!0):!1},AN=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var oI=new Date,sI=localStorage.getItem("swal-initiation");sI?(oI.getTime()-Date.parse(sI))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var v=document.createElement("audio");v.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",v.loop=!0,document.body.appendChild(v),setTimeout(function(){v.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(oI))}gt.prototype.disableButtons=Ub,gt.prototype.enableButtons=Bb,gt.prototype.getInput=Aa,gt.prototype.disableInput=qb,gt.prototype.enableInput=$b,gt.prototype.hideLoading=tn,gt.prototype.disableLoading=tn,gt.prototype.showValidationMessage=Hb,gt.prototype.resetValidationMessage=zb,gt.prototype.close=ur,gt.prototype.closePopup=ur,gt.prototype.closeModal=ur,gt.prototype.closeToast=ur,gt.prototype.rejectPromise=Ia,gt.prototype.update=Qb,gt.prototype._destroy=Yb,Object.assign(gt,nN),Object.keys(jP).forEach(function(v){gt[v]=function(){if(Nr&&Nr[v]){var d;return(d=Nr)[v].apply(d,arguments)}return null}}),gt.DismissReason=$n,gt.version="11.11.0";var ph=gt;return ph.default=ph,ph});typeof ri<"u"&&ri.Sweetalert2&&(ri.swal=ri.sweetAlert=ri.Swal=ri.SweetAlert=ri.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var yI=null;var qm=1,Hm=Symbol("SIGNAL");function Oe(t){let e=yI;return yI=t,e}var vI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xN(t){if(!(Wm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===qm)){if(!t.producerMustRecompute(t)&&!zm(t)){t.dirty=!1,t.lastCleanEpoch=qm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=qm}}function wI(t){return t&&(t.nextProducerIndex=0),Oe(t)}function _I(t,e){if(Oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Wm(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Gm(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function zm(t){vh(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(xN(n),r!==n.version))return!0}return!1}function EI(t){if(vh(t),Wm(t))for(let e=0;e<t.producerNode.length;e++)Gm(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Gm(t,e){if(MN(t),vh(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Gm(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];vh(i),i.producerIndexOfThis[r]=e}}function Wm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function vh(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function MN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function RN(){throw new Error}var PN=RN;function bI(t){PN=t}function fe(t){return typeof t=="function"}function xa(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wh=xa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function as(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var mt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(fe(r))try{r()}catch(o){e=o instanceof wh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{II(o)}catch(s){e=e??[],s instanceof wh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)II(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&as(n,e)}remove(e){let{_finalizers:n}=this;n&&as(n,e),e instanceof t&&e._removeParent(this)}};mt.EMPTY=(()=>{let t=new mt;return t.closed=!0,t})();var Km=mt.EMPTY;function _h(t){return t instanceof mt||t&&"closed"in t&&fe(t.remove)&&fe(t.add)&&fe(t.unsubscribe)}function II(t){fe(t)?t():t.unsubscribe()}var cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ma={setTimeout(t,e,...n){let{delegate:r}=Ma;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ma;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Eh(t){Ma.setTimeout(()=>{let{onUnhandledError:e}=cr;if(e)e(t);else throw t})}function Nc(){}var DI=Qm("C",void 0,void 0);function CI(t){return Qm("E",void 0,t)}function TI(t){return Qm("N",t,void 0)}function Qm(t,e,n){return{kind:t,value:e,error:n}}var us=null;function Ra(t){if(cr.useDeprecatedSynchronousErrorHandling){let e=!us;if(e&&(us={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=us;if(us=null,n)throw r}}else t()}function AI(t){cr.useDeprecatedSynchronousErrorHandling&&us&&(us.errorThrown=!0,us.error=t)}var cs=class extends mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_h(e)&&e.add(this)):this.destination=ON}static create(e,n,r){return new gi(e,n,r)}next(e){this.isStopped?Zm(TI(e),this):this._next(e)}error(e){this.isStopped?Zm(CI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zm(DI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NN=Function.prototype.bind;function Ym(t,e){return NN.call(t,e)}var Jm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){bh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){bh(r)}else bh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){bh(n)}}},gi=class extends cs{constructor(e,n,r){super();let i;if(fe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&cr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ym(e.next,o),error:e.error&&Ym(e.error,o),complete:e.complete&&Ym(e.complete,o)}):i=e}this.destination=new Jm(i)}};function bh(t){cr.useDeprecatedSynchronousErrorHandling?AI(t):Eh(t)}function kN(t){throw t}function Zm(t,e){let{onStoppedNotification:n}=cr;n&&Ma.setTimeout(()=>n(t,e))}var ON={closed:!0,next:Nc,error:kN,complete:Nc};var Pa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function cn(t){return t}function Xm(...t){return ey(t)}function ey(t){return t.length===0?cn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var we=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=VN(n)?n:new gi(n,r,i);return Ra(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=SI(r),new r((i,o)=>{let s=new gi({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Pa](){return this}pipe(...n){return ey(n)(this)}toPromise(n){return n=SI(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function SI(t){var e;return(e=t??cr.Promise)!==null&&e!==void 0?e:Promise}function FN(t){return t&&fe(t.next)&&fe(t.error)&&fe(t.complete)}function VN(t){return t&&t instanceof cs||FN(t)&&_h(t)}function ty(t){return fe(t?.lift)}function Ee(t){return e=>{if(ty(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(t,e,n,r,i){return new ny(t,e,n,r,i)}var ny=class extends cs{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Na(){return Ee((t,e)=>{let n=null;t._refCount++;let r=be(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ka=class extends we{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ty(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mt;let n=this.getSubject();e.add(this.source.subscribe(be(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mt.EMPTY)}return e}refCount(){return Na()(this)}};var xI=xa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yt=(()=>{class t extends we{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ih(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new xI}next(n){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Km:(this.currentObservers=null,o.push(n),new mt(()=>{this.currentObservers=null,as(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new we;return n.source=this,n}}return t.create=(e,n)=>new Ih(e,n),t})(),Ih=class extends yt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Km}};var Kt=class extends yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var kc={now(){return(kc.delegate||Date).now()},delegate:void 0};var Dh=class extends yt{constructor(e=1/0,n=1/0,r=kc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ch=class extends mt{constructor(e,n){super()}schedule(e,n=0){return this}};var Oc={setInterval(t,e,...n){let{delegate:r}=Oc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Oc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Oa=class extends Ch{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Oc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Oc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,as(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Fa=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Fa.now=kc.now;var Va=class extends Fa{constructor(e,n=Fa.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Fc=new Va(Oa);var Th=class extends Oa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ah=class extends Va{};var ry=new Ah(Th);var ln=new we(t=>t.complete());function MI(t){return t&&fe(t.schedule)}function iy(t){return t[t.length-1]}function Sh(t){return fe(iy(t))?t.pop():void 0}function Or(t){return MI(iy(t))?t.pop():void 0}function RI(t,e){return typeof iy(t)=="number"?t.pop():e}var xh=t=>t&&typeof t.length=="number"&&typeof t!="function";function Mh(t){return fe(t?.then)}function Rh(t){return fe(t[Pa])}function Ph(t){return Symbol.asyncIterator&&fe(t?.[Symbol.asyncIterator])}function Nh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function LN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var kh=LN();function Oh(t){return fe(t?.[kh])}function Fh(t){return cI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield gh(n.read());if(i)return yield gh(void 0);yield yield gh(r)}}finally{n.releaseLock()}})}function Vh(t){return fe(t?.getReader)}function Xe(t){if(t instanceof we)return t;if(t!=null){if(Rh(t))return jN(t);if(xh(t))return BN(t);if(Mh(t))return UN(t);if(Ph(t))return PI(t);if(Oh(t))return $N(t);if(Vh(t))return qN(t)}throw Nh(t)}function jN(t){return new we(e=>{let n=t[Pa]();if(fe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BN(t){return new we(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function UN(t){return new we(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Eh)})}function $N(t){return new we(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function PI(t){return new we(e=>{HN(t,e).catch(n=>e.error(n))})}function qN(t){return PI(Fh(t))}function HN(t,e){var n,r,i,o;return uI(this,void 0,void 0,function*(){try{for(n=lI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Cn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function qn(t,e=0){return Ee((n,r)=>{n.subscribe(be(r,i=>Cn(r,t,()=>r.next(i),e),()=>Cn(r,t,()=>r.complete(),e),i=>Cn(r,t,()=>r.error(i),e)))})}function lr(t,e=0){return Ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function NI(t,e){return Xe(t).pipe(lr(e),qn(e))}function kI(t,e){return Xe(t).pipe(lr(e),qn(e))}function OI(t,e){return new we(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function FI(t,e){return new we(n=>{let r;return Cn(n,e,()=>{r=t[kh](),Cn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}function Lh(t,e){if(!t)throw new Error("Iterable cannot be null");return new we(n=>{Cn(n,e,()=>{let r=t[Symbol.asyncIterator]();Cn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function VI(t,e){return Lh(Fh(t),e)}function LI(t,e){if(t!=null){if(Rh(t))return NI(t,e);if(xh(t))return OI(t,e);if(Mh(t))return kI(t,e);if(Ph(t))return Lh(t,e);if(Oh(t))return FI(t,e);if(Vh(t))return VI(t,e)}throw Nh(t)}function Fe(t,e){return e?LI(t,e):Xe(t)}function ce(...t){let e=Or(t);return Fe(t,e)}function La(t,e){let n=fe(t)?t:()=>t,r=i=>i.error(n());return new we(e?i=>e.schedule(r,0,i):r)}function oy(t){return!!t&&(t instanceof we||fe(t.lift)&&fe(t.subscribe))}var mi=xa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(t,e){return Ee((n,r)=>{let i=0;n.subscribe(be(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:zN}=Array;function GN(t,e){return zN(e)?t(...e):t(e)}function jh(t){return ae(e=>GN(t,e))}var{isArray:WN}=Array,{getPrototypeOf:KN,prototype:QN,keys:YN}=Object;function Bh(t){if(t.length===1){let e=t[0];if(WN(e))return{args:e,keys:null};if(ZN(e)){let n=YN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function ZN(t){return t&&typeof t=="object"&&KN(t)===QN}function Uh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function $h(...t){let e=Or(t),n=Sh(t),{args:r,keys:i}=Bh(t);if(r.length===0)return Fe([],e);let o=new we(JN(r,e,i?s=>Uh(i,s):cn));return n?o.pipe(jh(n)):o}function JN(t,e,n=cn){return r=>{jI(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)jI(e,()=>{let l=Fe(t[c],e),f=!1;l.subscribe(be(r,g=>{o[c]=g,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function jI(t,e,n){t?Cn(n,t,e):e()}function BI(t,e,n,r,i,o,s,a){let c=[],l=0,f=0,g=!1,w=()=>{g&&!c.length&&!l&&e.complete()},E=N=>l<r?M(N):c.push(N),M=N=>{o&&e.next(N),l++;let R=!1;Xe(n(N,f++)).subscribe(be(e,B=>{i?.(B),o?E(B):e.next(B)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let B=c.shift();s?Cn(e,s,()=>M(B)):M(B)}w()}catch(B){e.error(B)}}))};return t.subscribe(be(e,E,()=>{g=!0,w()})),()=>{a?.()}}function Vt(t,e,n=1/0){return fe(e)?Vt((r,i)=>ae((o,s)=>e(r,o,i,s))(Xe(t(r,i))),n):(typeof e=="number"&&(n=e),Ee((r,i)=>BI(r,i,t,n)))}function Vc(t=1/0){return Vt(cn,t)}function UI(){return Vc(1)}function ja(...t){return UI()(Fe(t,Or(t)))}function qh(t){return new we(e=>{Xe(t()).subscribe(e)})}function sy(...t){let e=Sh(t),{args:n,keys:r}=Bh(t),i=new we(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let f=0;f<s;f++){let g=!1;Xe(n[f]).subscribe(be(o,w=>{g||(g=!0,l--),a[f]=w},()=>c--,void 0,()=>{(!c||!g)&&(l||o.next(r?Uh(r,a):a),o.complete())}))}});return e?i.pipe(jh(e)):i}function ay(...t){let e=Or(t),n=RI(t,1/0),r=t;return r.length?r.length===1?Xe(r[0]):Vc(n)(Fe(r,e)):ln}function qt(t,e){return Ee((n,r)=>{let i=0;n.subscribe(be(r,o=>t.call(e,o,i++)&&r.next(o)))})}function dr(t){return Ee((e,n)=>{let r=null,i=!1,o;r=e.subscribe(be(n,void 0,void 0,s=>{o=Xe(t(s,dr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function $I(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(be(s,f=>{let g=l++;c=a?t(c,f,g):(a=!0,f),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function eo(t,e){return fe(e)?Vt(t,e,1):Vt(t,1)}function to(t){return Ee((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function yi(t){return t<=0?()=>ln:Ee((e,n)=>{let r=0;e.subscribe(be(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function uy(t){return ae(()=>t)}function cy(t,e=cn){return t=t??XN,Ee((n,r)=>{let i,o=!0;n.subscribe(be(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function XN(t,e){return t===e}function Hh(t=e1){return Ee((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function e1(){return new mi}function no(t){return Ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Hn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?qt((i,o)=>t(i,o,r)):cn,yi(1),n?to(e):Hh(()=>new mi))}function Ba(t){return t<=0?()=>ln:Ee((e,n)=>{let r=[];e.subscribe(be(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ly(t,e){let n=arguments.length>=2;return r=>r.pipe(t?qt((i,o)=>t(i,o,r)):cn,Ba(1),n?to(e):Hh(()=>new mi))}function Lc(){return Ee((t,e)=>{let n,r=!1;t.subscribe(be(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function ls(t,e){return Ee($I(t,e,arguments.length>=2,!0))}function qI(t={}){let{connector:e=()=>new yt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,f=!1,g=!1,w=()=>{a?.unsubscribe(),a=void 0},E=()=>{w(),s=c=void 0,f=g=!1},M=()=>{let N=s;E(),N?.unsubscribe()};return Ee((N,R)=>{l++,!g&&!f&&w();let B=c=c??e();R.add(()=>{l--,l===0&&!g&&!f&&(a=dy(M,i))}),B.subscribe(R),!s&&l>0&&(s=new gi({next:W=>B.next(W),error:W=>{g=!0,w(),a=dy(E,n,W),B.error(W)},complete:()=>{f=!0,w(),a=dy(E,r),B.complete()}}),Xe(N).subscribe(s))})(o)}}function dy(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new gi({next:()=>{r.unsubscribe(),t()}});return Xe(e(...n)).subscribe(r)}function zh(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,qI({connector:()=>new Dh(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ds(...t){let e=Or(t);return Ee((n,r)=>{(e?ja(t,n,e):ja(t,n)).subscribe(r)})}function ut(t,e){return Ee((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(be(r,c=>{i?.unsubscribe();let l=0,f=o++;Xe(t(c,f)).subscribe(i=be(r,g=>r.next(e?e(c,g,f,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Gh(t,e){return fe(e)?ut(()=>t,e):ut(()=>t)}function hy(t){return Ee((e,n)=>{Xe(t).subscribe(be(n,()=>n.complete(),Nc)),!n.closed&&e.subscribe(n)})}function It(t,e,n){let r=fe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(be(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):cn}var AD="https://g.co/ng/security#xss",le=class extends Error{constructor(e,n){super(If(e,n)),this.code=e}};function If(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Zc(t){return{toString:t}.toString()}var Wh="__parameters__";function t1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function SD(t,e,n){return Zc(()=>{let r=t1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,f){let g=c.hasOwnProperty(Wh)?c[Wh]:Object.defineProperty(c,Wh,{value:[]})[Wh];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var vi=globalThis;function Ke(t){for(let e in t)if(t[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function n1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function hn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(hn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function HI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var r1=Ke({__forward_ref__:Ke});function bi(t){return t.__forward_ref__=bi,t.toString=function(){return hn(this())},t}function dn(t){return xD(t)?t():t}function xD(t){return typeof t=="function"&&t.hasOwnProperty(r1)&&t.__forward_ref__===bi}function re(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function fn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Df(t){return zI(t,RD)||zI(t,PD)}function MD(t){return Df(t)!==null}function zI(t,e){return t.hasOwnProperty(e)?t[e]:null}function i1(t){let e=t&&(t[RD]||t[PD]);return e||null}function GI(t){return t&&(t.hasOwnProperty(WI)||t.hasOwnProperty(o1))?t[WI]:null}var RD=Ke({\u0275prov:Ke}),WI=Ke({\u0275inj:Ke}),PD=Ke({ngInjectableDef:Ke}),o1=Ke({ngInjectorDef:Ke}),te=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ND(t){return t&&!!t.\u0275providers}var s1=Ke({\u0275cmp:Ke}),a1=Ke({\u0275dir:Ke}),u1=Ke({\u0275pipe:Ke}),c1=Ke({\u0275mod:Ke}),tf=Ke({\u0275fac:Ke}),jc=Ke({__NG_ELEMENT_ID__:Ke}),KI=Ke({__NG_ENV_ID__:Ke});function Cf(t){return typeof t=="string"?t:t==null?"":String(t)}function l1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Cf(t)}function d1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new le(-200,t)}function gv(t,e){throw new le(-201,!1)}var Ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ce||{}),xy;function kD(){return xy}function Tn(t){let e=xy;return xy=t,e}function OD(t,e,n){let r=Df(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Ce.Optional)return null;if(e!==void 0)return e;gv(t,"Injector")}var h1={},Bc=h1,My="__NG_DI_FLAG__",nf="ngTempTokenPath",f1="ngTokenPath",p1=/\n/gm,g1="\u0275",QI="__source",Ha;function m1(){return Ha}function ro(t){let e=Ha;return Ha=t,e}function y1(t,e=Ce.Default){if(Ha===void 0)throw new le(-203,!1);return Ha===null?OD(t,void 0,e):Ha.get(t,e&Ce.Optional?null:void 0,e)}function z(t,e=Ce.Default){return(kD()||y1)(dn(t),e)}function Z(t,e=Ce.Default){return z(t,Tf(e))}function Tf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ry(t){let e=[];for(let n=0;n<t.length;n++){let r=dn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new le(900,!1);let i,o=Ce.Default;for(let s=0;s<r.length;s++){let a=r[s],c=v1(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function FD(t,e){return t[My]=e,t.prototype[My]=e,t}function v1(t){return t[My]}function w1(t,e,n,r){let i=t[nf];throw e[QI]&&i.unshift(e[QI]),t.message=_1(`
`+t.message,i,n,r),t[f1]=i,t[nf]=null,t}function _1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==g1?t.slice(2):t;let i=hn(e);if(Array.isArray(e))i=e.map(hn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):hn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(p1,`
  `)}`}var Jc=FD(SD("Optional"),8);var VD=FD(SD("SkipSelf"),4);function gs(t,e){let n=t.hasOwnProperty(tf);return n?t[tf]:null}function mv(t,e){t.forEach(n=>Array.isArray(n)?mv(n,e):e(n))}function LD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function E1(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function b1(t,e,n){let r=Xc(t,e);return r>=0?t[r|1]=n:(r=~r,E1(t,r,e,n)),r}function fy(t,e){let n=Xc(t,e);if(n>=0)return t[n|1]}function Xc(t,e){return I1(t,e,1)}function I1(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ga={},zn=[],Wa=new te(""),jD=new te("",-1),BD=new te(""),of=class{get(e,n=Bc){if(n===Bc){let r=new Error(`NullInjectorError: No provider for ${hn(e)}!`);throw r.name="NullInjectorError",r}return n}},UD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(UD||{}),Lr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Lr||{}),kn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(kn||{});function D1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Py(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];T1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function C1(t){return t===3||t===4||t===6}function T1(t){return t.charCodeAt(0)===64}function Uc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?YI(t,n,i,null,e[++r]):YI(t,n,i,null,null))}}return t}function YI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var $D="ng-template";function A1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&D1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(yv(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function yv(t){return t.type===4&&t.value!==$D}function S1(t,e,n){let r=t.type===4&&!n?$D:t.value;return e===r}function x1(t,e,n){let r=4,i=t.attrs,o=i!==null?P1(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!hr(r)&&!hr(c))return!1;if(s&&hr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!S1(t,c,n)||c===""&&e.length===1){if(hr(r))return!1;s=!0}}else if(r&8){if(i===null||!A1(t,i,c,n)){if(hr(r))return!1;s=!0}}else{let l=e[++a],f=M1(c,i,yv(t),n);if(f===-1){if(hr(r))return!1;s=!0;continue}if(l!==""){let g;if(f>o?g="":g=i[f+1].toLowerCase(),r&2&&l!==g){if(hr(r))return!1;s=!0}}}}return hr(r)||s}function hr(t){return(t&1)===0}function M1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return N1(e,t)}function R1(t,e,n=!1){for(let r=0;r<e.length;r++)if(x1(t,e[r],n))return!0;return!1}function P1(t){for(let e=0;e<t.length;e++){let n=t[e];if(C1(n))return e}return t.length}function N1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ZI(t,e){return t?":not("+e.trim()+")":e}function k1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hr(s)&&(e+=ZI(o,i),i=""),r=s,o=o||!hr(r);n++}return i!==""&&(e+=ZI(o,i)),e}function O1(t){return t.map(k1).join(",")}function F1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!hr(i))break;i=o}r++}return{attrs:e,classes:n}}function Ct(t){return Zc(()=>{let e=WD(t),n=qe(ne({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===UD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Lr.Emulated,styles:t.styles||zn,_:null,schemas:t.schemas||null,tView:null,id:""});KD(n);let r=t.dependencies;return n.directiveDefs=XI(r,!1),n.pipeDefs=XI(r,!0),n.id=j1(n),n})}function V1(t){return ms(t)||qD(t)}function L1(t){return t!==null}function pn(t){return Zc(()=>({type:t.type,bootstrap:t.bootstrap||zn,declarations:t.declarations||zn,imports:t.imports||zn,exports:t.exports||zn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function JI(t,e){if(t==null)return Ga;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=kn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==kn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Ht(t){return Zc(()=>{let e=WD(t);return KD(e),e})}function vv(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ms(t){return t[s1]||null}function qD(t){return t[a1]||null}function HD(t){return t[u1]||null}function zD(t){let e=ms(t)||qD(t)||HD(t);return e!==null?e.standalone:!1}function GD(t,e){let n=t[c1]||null;if(!n&&e===!0)throw new Error(`Type ${hn(t)} does not have '\u0275mod' property.`);return n}function WD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ga,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||zn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:JI(t.inputs,e),outputs:JI(t.outputs),debugInfo:null}}function KD(t){t.features?.forEach(e=>e(t))}function XI(t,e){if(!t)return null;let n=e?HD:V1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(L1)}function j1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Xa(t){return{\u0275providers:t}}function wv(...t){return{\u0275providers:QD(!0,t),\u0275fromNgModule:!0}}function QD(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return mv(e,s=>{let a=s;Ny(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&YD(i,o),n}function YD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];_v(i,o=>{e(o,r)})}}function Ny(t,e,n,r){if(t=dn(t),!t)return!1;let i=null,o=GI(t),s=!o&&ms(t);if(!o&&!s){let c=t.ngModule;if(o=GI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Ny(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{mv(o.imports,f=>{Ny(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&YD(l,e)}if(!a){let l=gs(i)||(()=>new i);e({provide:i,useFactory:l,deps:zn},i),e({provide:BD,useValue:i,multi:!0},i),e({provide:Wa,useValue:()=>z(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;_v(c,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function _v(t,e){for(let n of t)ND(n)&&(n=n.\u0275providers),Array.isArray(n)?_v(n,e):e(n)}var B1=Ke({provide:String,useValue:Ke});function ZD(t){return t!==null&&typeof t=="object"&&B1 in t}function U1(t){return!!(t&&t.useExisting)}function $1(t){return!!(t&&t.useFactory)}function Ka(t){return typeof t=="function"}function q1(t){return!!t.useClass}var Af=new te(""),Yh={},H1={},py;function Ev(){return py===void 0&&(py=new of),py}var An=class{},$c=class extends An{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Oy(e,s=>this.processProvider(s)),this.records.set(jD,Ua(void 0,this)),i.has("environment")&&this.records.set(An,Ua(void 0,this));let o=this.records.get(Af);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(BD,zn,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ro(this),r=Tn(void 0),i;try{return e()}finally{ro(n),Tn(r)}}get(e,n=Bc,r=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(KI))return e[KI](this);r=Tf(r);let i,o=ro(this),s=Tn(void 0);try{if(!(r&Ce.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=Q1(e)&&Df(e);l&&this.injectableDefInScope(l)?c=Ua(ky(e),Yh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ce.Self?Ev():this.parent;return n=r&Ce.Optional&&n===Bc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[nf]=a[nf]||[]).unshift(hn(e)),o)throw a;return w1(a,e,"R3InjectorError",this.source)}else throw a}finally{Tn(s),ro(o)}}resolveInjectorInitializers(){let e=Oe(null),n=ro(this),r=Tn(void 0),i;try{let o=this.get(Wa,zn,Ce.Self);for(let s of o)s()}finally{ro(n),Tn(r),Oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(hn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(e){e=dn(e);let n=Ka(e)?e:dn(e&&e.provide),r=G1(e);if(!Ka(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ua(void 0,Yh,!0),i.factory=()=>Ry(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Oe(null);try{return n.value===Yh&&(n.value=H1,n.value=n.factory()),typeof n.value=="object"&&n.value&&K1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=dn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ky(t){let e=Df(t),n=e!==null?e.factory:gs(t);if(n!==null)return n;if(t instanceof te)throw new le(204,!1);if(t instanceof Function)return z1(t);throw new le(204,!1)}function z1(t){if(t.length>0)throw new le(204,!1);let n=i1(t);return n!==null?()=>n.factory(t):()=>new t}function G1(t){if(ZD(t))return Ua(void 0,t.useValue);{let e=JD(t);return Ua(e,Yh)}}function JD(t,e,n){let r;if(Ka(t)){let i=dn(t);return gs(i)||ky(i)}else if(ZD(t))r=()=>dn(t.useValue);else if($1(t))r=()=>t.useFactory(...Ry(t.deps||[]));else if(U1(t))r=()=>z(dn(t.useExisting));else{let i=dn(t&&(t.useClass||t.provide));if(W1(t))r=()=>new i(...Ry(t.deps));else return gs(i)||ky(i)}return r}function Ua(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function W1(t){return!!t.deps}function K1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Q1(t){return typeof t=="function"||typeof t=="object"&&t instanceof te}function Oy(t,e){for(let n of t)Array.isArray(n)?Oy(n,e):n&&ND(n)?Oy(n.\u0275providers,e):e(n)}function Ii(t,e){t instanceof $c&&t.assertNotDestroyed();let n,r=ro(t),i=Tn(void 0);try{return e()}finally{ro(r),Tn(i)}}function Y1(){return kD()!==void 0||m1()!=null}function Z1(t){return typeof t=="function"}var Di=0,xe=1,he=2,nn=3,fr=4,mr=5,sf=6,qc=7,pr=8,Qa=9,gr=10,Dt=11,Hc=12,eD=13,eu=14,jr=15,Sf=16,$a=17,Ya=18,xf=19,XD=20,io=21,gy=22,ys=23,Br=25,eC=1;var vs=7,af=8,uf=9,Gn=10,bv=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(bv||{});function fs(t){return Array.isArray(t)&&typeof t[eC]=="object"}function Ci(t){return Array.isArray(t)&&t[eC]===!0}function tC(t){return(t.flags&4)!==0}function Mf(t){return t.componentOffset>-1}function Iv(t){return(t.flags&1)===1}function oo(t){return!!t.template}function J1(t){return(t[he]&512)!==0}var Fy=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function nC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ds(){return rC}function rC(t){return t.type.prototype.ngOnChanges&&(t.setInput=ek),X1}Ds.ngInherit=!0;function X1(){let t=oC(this),e=t?.current;if(e){let n=t.previous;if(n===Ga)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ek(t,e,n,r,i){let o=this.declaredInputs[r],s=oC(t)||tk(t,{previous:Ga,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Fy(l&&l.currentValue,n,c===Ga),nC(t,e,i,n)}var iC="__ngSimpleChanges__";function oC(t){return t[iC]||null}function tk(t,e){return t[iC]=e}var tD=null;var Fr=function(t,e,n){tD?.(t,e,n)},nk="svg",rk="math",ik=!1;function ok(){return ik}function Ur(t){for(;Array.isArray(t);)t=t[Di];return t}function sC(t,e){return Ur(e[t])}function Wn(t,e){return Ur(e[t.index])}function aC(t,e){return t.data[e]}function sk(t,e){return t[e]}function ao(t,e){let n=e[t];return fs(n)?n:n[Di]}function Dv(t){return(t[he]&128)===128}function ak(t){return Ci(t[nn])}function cf(t,e){return e==null?null:t[e]}function uC(t){t[$a]=0}function uk(t){t[he]&1024||(t[he]|=1024,Dv(t)&&zc(t))}function ck(t,e){for(;t>0;)e=e[eu],t--;return e}function Cv(t){return!!(t[he]&9216||t[ys]?.dirty)}function Vy(t){t[gr].changeDetectionScheduler?.notify(1),Cv(t)?zc(t):t[he]&64&&(ok()?(t[he]|=1024,zc(t)):t[gr].changeDetectionScheduler?.notify())}function zc(t){t[gr].changeDetectionScheduler?.notify();let e=Gc(t);for(;e!==null&&!(e[he]&8192||(e[he]|=8192,!Dv(e)));)e=Gc(e)}function cC(t,e){if((t[he]&256)===256)throw new le(911,!1);t[io]===null&&(t[io]=[]),t[io].push(e)}function lk(t,e){if(t[io]===null)return;let n=t[io].indexOf(e);n!==-1&&t[io].splice(n,1)}function Gc(t){let e=t[nn];return Ci(e)?e[nn]:e}var Ae={lFrame:yC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function dk(){return Ae.lFrame.elementDepthCount}function hk(){Ae.lFrame.elementDepthCount++}function fk(){Ae.lFrame.elementDepthCount--}function lC(){return Ae.bindingsEnabled}function pk(){return Ae.skipHydrationRootTNode!==null}function gk(t){return Ae.skipHydrationRootTNode===t}function mk(){Ae.skipHydrationRootTNode=null}function ze(){return Ae.lFrame.lView}function gn(){return Ae.lFrame.tView}function tu(t){return Ae.lFrame.contextLView=t,t[pr]}function nu(t){return Ae.lFrame.contextLView=null,t}function On(){let t=dC();for(;t!==null&&t.type===64;)t=t.parent;return t}function dC(){return Ae.lFrame.currentTNode}function yk(){let t=Ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function el(t,e){let n=Ae.lFrame;n.currentTNode=t,n.isParent=e}function hC(){return Ae.lFrame.isParent}function vk(){Ae.lFrame.isParent=!1}function fC(){let t=Ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function wk(t){return Ae.lFrame.bindingIndex=t}function Rf(){return Ae.lFrame.bindingIndex++}function _k(t){let e=Ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ek(){return Ae.lFrame.inI18n}function bk(t,e){let n=Ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ly(e)}function Ik(){return Ae.lFrame.currentDirectiveIndex}function Ly(t){Ae.lFrame.currentDirectiveIndex=t}function Dk(t){let e=Ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function pC(t){Ae.lFrame.currentQueryIndex=t}function Ck(t){let e=t[xe];return e.type===2?e.declTNode:e.type===1?t[mr]:null}function gC(t,e,n){if(n&Ce.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Ce.Host);)if(i=Ck(o),i===null||(o=o[eu],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ae.lFrame=mC();return r.currentTNode=e,r.lView=t,!0}function Tv(t){let e=mC(),n=t[xe];Ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function mC(){let t=Ae.lFrame,e=t===null?null:t.child;return e===null?yC(t):e}function yC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function vC(){let t=Ae.lFrame;return Ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var wC=vC;function Av(){let t=vC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Tk(t){return(Ae.lFrame.contextLView=ck(t,Ae.lFrame.contextLView))[pr]}function ru(){return Ae.lFrame.selectedIndex}function ws(t){Ae.lFrame.selectedIndex=t}function Pf(){let t=Ae.lFrame;return aC(t.tView,t.selectedIndex)}function Ak(){return Ae.lFrame.currentNamespace}var _C=!0;function Sv(){return _C}function xv(t){_C=t}function Sk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=rC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Mv(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Zh(t,e,n){EC(t,e,3,n)}function Jh(t,e,n,r){(t[he]&3)===n&&EC(t,e,n,r)}function my(t,e){let n=t[he];(n&3)===e&&(n&=16383,n+=1,t[he]=n)}function EC(t,e,n,r){let i=r!==void 0?t[$a]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[$a]+=65536),(a<o||o==-1)&&(xk(t,n,e,c),t[$a]=(t[$a]&4294901760)+c+2),c++}function nD(t,e){Fr(4,t,e);let n=Oe(null);try{e.call(t)}finally{Oe(n),Fr(5,t,e)}}function xk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[he]>>14<t[$a]>>16&&(t[he]&3)===e&&(t[he]+=16384,nD(a,o)):nD(a,o)}var za=-1,_s=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Mk(t){return t instanceof _s}function Rk(t){return(t.flags&8)!==0}function Pk(t){return(t.flags&16)!==0}function bC(t){return t!==za}function lf(t){return t&32767}function Nk(t){return t>>16}function df(t,e){let n=Nk(t),r=e;for(;n>0;)r=r[eu],n--;return r}var jy=!0;function hf(t){let e=jy;return jy=t,e}var kk=256,IC=kk-1,DC=5,Ok=0,Vr={};function Fk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(jc)&&(r=n[jc]),r==null&&(r=n[jc]=Ok++);let i=r&IC,o=1<<i;e.data[t+(i>>DC)]|=o}function ff(t,e){let n=CC(t,e);if(n!==-1)return n;let r=e[xe];r.firstCreatePass&&(t.injectorIndex=e.length,yy(r.data,t),yy(e,null),yy(r.blueprint,null));let i=Rv(t,e),o=t.injectorIndex;if(bC(i)){let s=lf(i),a=df(i,e),c=a[xe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function yy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function CC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Rv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=MC(i),r===null)return za;if(n++,i=i[eu],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return za}function By(t,e,n){Fk(t,e,n)}function TC(t,e,n){if(n&Ce.Optional||t!==void 0)return t;gv(e,"NodeInjector")}function AC(t,e,n,r){if(n&Ce.Optional&&r===void 0&&(r=null),!(n&(Ce.Self|Ce.Host))){let i=t[Qa],o=Tn(void 0);try{return i?i.get(e,r,n&Ce.Optional):OD(e,r,n&Ce.Optional)}finally{Tn(o)}}return TC(r,e,n)}function SC(t,e,n,r=Ce.Default,i){if(t!==null){if(e[he]&2048&&!(r&Ce.Self)){let s=Uk(t,e,n,r,Vr);if(s!==Vr)return s}let o=xC(t,e,n,r,Vr);if(o!==Vr)return o}return AC(e,n,r,i)}function xC(t,e,n,r,i){let o=jk(n);if(typeof o=="function"){if(!gC(e,t,r))return r&Ce.Host?TC(i,n,r):AC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Ce.Optional))gv(n);else return s}finally{wC()}}else if(typeof o=="number"){let s=null,a=CC(t,e),c=za,l=r&Ce.Host?e[jr][mr]:null;for((a===-1||r&Ce.SkipSelf)&&(c=a===-1?Rv(t,e):e[a+8],c===za||!iD(r,!1)?a=-1:(s=e[xe],a=lf(c),e=df(c,e)));a!==-1;){let f=e[xe];if(rD(o,a,f.data)){let g=Vk(a,e,n,s,r,l);if(g!==Vr)return g}c=e[a+8],c!==za&&iD(r,e[xe].data[a+8]===l)&&rD(o,a,e)?(s=f,a=lf(c),e=df(c,e)):a=-1}}return i}function Vk(t,e,n,r,i,o){let s=e[xe],a=s.data[t+8],c=r==null?Mf(a)&&jy:r!=s&&(a.type&3)!==0,l=i&Ce.Host&&o===a,f=Lk(a,s,n,c,l);return f!==null?Za(e,s,f,a):Vr}function Lk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,f=o>>20,g=r?a:a+f,w=i?a+f:l;for(let E=g;E<w;E++){let M=s[E];if(E<c&&n===M||E>=c&&M.type===n)return E}if(i){let E=s[c];if(E&&oo(E)&&E.type===n)return c}return null}function Za(t,e,n,r){let i=t[n],o=e.data;if(Mk(i)){let s=i;s.resolving&&d1(l1(o[n]));let a=hf(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Tn(s.injectImpl):null,f=gC(t,r,Ce.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Sk(n,o[n],e)}finally{l!==null&&Tn(l),hf(a),s.resolving=!1,wC()}}return i}function jk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(jc)?t[jc]:void 0;return typeof e=="number"?e>=0?e&IC:Bk:e}function rD(t,e,n){let r=1<<t;return!!(n[e+(t>>DC)]&r)}function iD(t,e){return!(t&Ce.Self)&&!(t&Ce.Host&&e)}var ps=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return SC(this._tNode,this._lView,e,Tf(r),n)}};function Bk(){return new ps(On(),ze())}function Cs(t){return Zc(()=>{let e=t.prototype.constructor,n=e[tf]||Uy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[tf]||Uy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Uy(t){return xD(t)?()=>{let e=Uy(dn(t));return e&&e()}:gs(t)}function Uk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[he]&2048&&!(s[he]&512);){let a=xC(o,s,n,r|Ce.Self,Vr);if(a!==Vr)return a;let c=o.parent;if(!c){let l=s[XD];if(l){let f=l.get(n,Vr,r);if(f!==Vr)return f}c=MC(s),s=s[eu]}o=c}return i}function MC(t){let e=t[xe],n=e.type;return n===2?e.declTNode:n===1?t[mr]:null}function oD(t,e=null,n=null,r){let i=RC(t,e,n,r);return i.resolveInjectorInitializers(),i}function RC(t,e=null,n=null,r,i=new Set){let o=[n||zn,wv(t)];return r=r||(typeof t=="object"?void 0:hn(t)),new $c(o,e||Ev(),r||null,i)}var Ts=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return oD({name:""},i,r,"");{let o=r.name??"";return oD({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Bc,e.NULL=new of,e.\u0275prov=re({token:e,providedIn:"any",factory:()=>z(jD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var $k="ngOriginalError";function vy(t){return t[$k]}var wi=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&vy(e);for(;n&&vy(n);)n=vy(n);return n||null}},PC=new te("",{providedIn:"root",factory:()=>Z(wi).handleError.bind(void 0)}),NC=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qk,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),$y=class extends NC{constructor(e){super(),this._lView=e}onDestroy(e){return cC(this._lView,e),()=>lk(this._lView,e)}};function qk(){return new $y(ze())}function Hk(){return Nf(On(),ze())}function Nf(t,e){return new uo(Wn(t,e))}var uo=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Hk;let t=e;return t})();var qy=class extends yt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,Y1()&&(this.destroyRef=Z(NC,{optional:!0})??void 0)}emit(e){let n=Oe(null);try{super.next(e)}finally{Oe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=wy(o),i&&(i=wy(i)),s&&(s=wy(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof mt&&e.add(a),a}};function wy(t){return e=>{setTimeout(t,void 0,e)}}var dt=qy;function kC(t){return(t.flags&128)===128}var OC=new Map,zk=0;function Gk(){return zk++}function Wk(t){OC.set(t[xf],t)}function Kk(t){OC.delete(t[xf])}var sD="__ngContext__";function Es(t,e){fs(e)?(t[sD]=e[xf],Wk(e)):t[sD]=e}function FC(t){return LC(t[Hc])}function VC(t){return LC(t[fr])}function LC(t){for(;t!==null&&!Ci(t);)t=t[fr];return t}var Hy;function jC(t){Hy=t}function Qk(){if(Hy!==void 0)return Hy;if(typeof document<"u")return document;throw new le(210,!1)}var Pv=new te("",{providedIn:"root",factory:()=>Yk}),Yk="ng",Nv=new te(""),Sn=new te("",{providedIn:"platform",factory:()=>"unknown"});var kv=new te("",{providedIn:"root",factory:()=>Qk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Zk="h",Jk="b";var Xk=()=>null;function Ov(t,e,n=!1){return Xk(t,e,n)}var BC=!1,eO=new te("",{providedIn:"root",factory:()=>BC});var pf=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${AD})`}};function kf(t){return t instanceof pf?t.changingThisBreaksApplicationSecurity:t}function UC(t,e){let n=tO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${AD})`)}return n===e}function tO(t){return t instanceof pf&&t.getTypeName()||null}var nO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $C(t){return t=String(t),t.match(nO)?t:"unsafe:"+t}var Fv=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Fv||{});function co(t){let e=rO();return e?e.sanitize(Fv.URL,t)||"":UC(t,"URL")?kf(t):$C(Cf(t))}function rO(){let t=ze();return t&&t[gr].sanitizer}function qC(t){return t instanceof Function?t():t}var _i=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_i||{}),iO;function Vv(t,e){return iO(t,e)}function qa(t,e,n,r,i){if(r!=null){let o,s=!1;Ci(r)?o=r:fs(r)&&(s=!0,r=r[Di]);let a=Ur(r);t===0&&n!==null?i==null?KC(e,n,a):gf(e,n,a,i||null,!0):t===1&&n!==null?gf(e,n,a,i||null,!0):t===2?EO(e,a,s):t===3&&e.destroyNode(a),o!=null&&IO(e,t,o,n,i)}}function oO(t,e){return t.createText(e)}function sO(t,e,n){t.setValue(e,n)}function HC(t,e,n){return t.createElement(e,n)}function aO(t,e){zC(t,e),e[Di]=null,e[mr]=null}function uO(t,e,n,r,i,o){r[Di]=i,r[mr]=e,Of(t,r,n,1,i,o)}function zC(t,e){e[gr].changeDetectionScheduler?.notify(1),Of(t,e,e[Dt],2,null,null)}function cO(t){let e=t[Hc];if(!e)return _y(t[xe],t);for(;e;){let n=null;if(fs(e))n=e[Hc];else{let r=e[Gn];r&&(n=r)}if(!n){for(;e&&!e[fr]&&e!==t;)fs(e)&&_y(e[xe],e),e=e[nn];e===null&&(e=t),fs(e)&&_y(e[xe],e),n=e&&e[fr]}e=n}}function lO(t,e,n,r){let i=Gn+r,o=n.length;r>0&&(n[i-1][fr]=e),r<o-Gn?(e[fr]=n[i],LD(n,Gn+r,e)):(n.push(e),e[fr]=null),e[nn]=n;let s=e[Sf];s!==null&&n!==s&&dO(s,e);let a=e[Ya];a!==null&&a.insertView(t),Vy(e),e[he]|=128}function dO(t,e){let n=t[uf],i=e[nn][nn][jr];e[jr]!==i&&(t[he]|=bv.HasTransplantedViews),n===null?t[uf]=[e]:n.push(e)}function GC(t,e){let n=t[uf],r=n.indexOf(e);n.splice(r,1)}function zy(t,e){if(t.length<=Gn)return;let n=Gn+e,r=t[n];if(r){let i=r[Sf];i!==null&&i!==t&&GC(i,r),e>0&&(t[n-1][fr]=r[fr]);let o=rf(t,Gn+e);aO(r[xe],r);let s=o[Ya];s!==null&&s.detachView(o[xe]),r[nn]=null,r[fr]=null,r[he]&=-129}return r}function WC(t,e){if(!(e[he]&256)){let n=e[Dt];n.destroyNode&&Of(t,e,n,3,null,null),cO(e)}}function _y(t,e){if(e[he]&256)return;let n=Oe(null);try{e[he]&=-129,e[he]|=256,e[ys]&&EI(e[ys]),fO(t,e),hO(t,e),e[xe].type===1&&e[Dt].destroy();let r=e[Sf];if(r!==null&&Ci(e[nn])){r!==e[nn]&&GC(r,e);let i=e[Ya];i!==null&&i.detachView(t)}Kk(e)}finally{Oe(n)}}function hO(t,e){let n=t.cleanup,r=e[qc];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[qc]=null);let i=e[io];if(i!==null){e[io]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function fO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof _s)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Fr(4,a,c);try{c.call(a)}finally{Fr(5,a,c)}}else{Fr(4,i,o);try{o.call(i)}finally{Fr(5,i,o)}}}}}function pO(t,e,n){return gO(t,e.parent,n)}function gO(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Di];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Lr.None||o===Lr.Emulated)return null}return Wn(r,n)}}function gf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function KC(t,e,n){t.appendChild(e,n)}function aD(t,e,n,r,i){r!==null?gf(t,e,n,r,i):KC(t,e,n)}function mO(t,e,n,r){t.removeChild(e,n,r)}function Lv(t,e){return t.parentNode(e)}function yO(t,e){return t.nextSibling(e)}function vO(t,e,n){return _O(t,e,n)}function wO(t,e,n){return t.type&40?Wn(t,n):null}var _O=wO,uD;function jv(t,e,n,r){let i=pO(t,r,e),o=e[Dt],s=r.parent||e[mr],a=vO(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)aD(o,i,n[c],a,!1);else aD(o,i,n,a,!1);uD!==void 0&&uD(o,r,e,n,i)}function Xh(t,e){if(e!==null){let n=e.type;if(n&3)return Wn(e,t);if(n&4)return Gy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Xh(t,r);{let i=t[e.index];return Ci(i)?Gy(-1,i):Ur(i)}}else{if(n&32)return Vv(e,t)()||Ur(t[e.index]);{let r=QC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Gc(t[jr]);return Xh(i,r)}else return Xh(t,e.next)}}}return null}function QC(t,e){if(e!==null){let r=t[jr][mr],i=e.projection;return r.projection[i]}return null}function Gy(t,e){let n=Gn+t+1;if(n<e.length){let r=e[n],i=r[xe].firstChild;if(i!==null)return Xh(r,i)}return e[vs]}function EO(t,e,n){let r=Lv(t,e);r&&mO(t,r,e,n)}function Bv(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Es(Ur(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Bv(t,e,n.child,r,i,o,!1),qa(e,t,i,a,o);else if(c&32){let l=Vv(n,r),f;for(;f=l();)qa(e,t,i,f,o);qa(e,t,i,a,o)}else c&16?bO(t,e,r,n,i,o):qa(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Of(t,e,n,r,i,o){Bv(n,r,t.firstChild,e,i,o,!1)}function bO(t,e,n,r,i,o){let s=n[jr],c=s[mr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let f=c[l];qa(e,t,i,f,o)}else{let l=c,f=s[nn];kC(r)&&(l.flags|=128),Bv(t,e,l,f,i,o,!0)}}function IO(t,e,n,r,i){let o=n[vs],s=Ur(n);o!==s&&qa(e,t,r,o,i);for(let a=Gn;a<n.length;a++){let c=n[a];Of(c[xe],c,t,e,r,o)}}function DO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:_i.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_i.Important),t.setStyle(n,r,i,o))}}function CO(t,e,n){t.setAttribute(e,"style",n)}function YC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ZC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Py(t,e,r),i!==null&&YC(t,e,i),o!==null&&CO(t,e,o)}var Ti={};function pe(t=1){JC(gn(),ze(),ru()+t,!1)}function JC(t,e,n,r){if(!r)if((e[he]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Zh(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Jh(e,o,0,n)}ws(n)}function de(t,e=Ce.Default){let n=ze();if(n===null)return z(t,e);let r=On();return SC(r,n,dn(t),e)}function XC(t,e,n,r,i,o){let s=Oe(null);try{let a=null;i&kn.SignalBased&&(a=e[r][Hm]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&kn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):nC(e,a,r,o)}finally{Oe(s)}}function TO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ws(~i);else{let o=i,s=n[++r],a=n[++r];bk(s,o);let c=e[o];a(2,c)}}}finally{ws(-1)}}function Ff(t,e,n,r,i,o,s,a,c,l,f){let g=e.blueprint.slice();return g[Di]=i,g[he]=r|4|128|8|64,(l!==null||t&&t[he]&2048)&&(g[he]|=2048),uC(g),g[nn]=g[eu]=t,g[pr]=n,g[gr]=s||t&&t[gr],g[Dt]=a||t&&t[Dt],g[Qa]=c||t&&t[Qa]||null,g[mr]=o,g[xf]=Gk(),g[sf]=f,g[XD]=l,g[jr]=e.type==2?t[jr]:g,g}function Vf(t,e,n,r,i){let o=t.data[e];if(o===null)o=AO(t,e,n,r,i),Ek()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=yk();o.injectorIndex=s===null?-1:s.injectorIndex}return el(o,!0),o}function AO(t,e,n,r,i){let o=dC(),s=hC(),a=s?o:o&&o.parent,c=t.data[e]=PO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function eT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function tT(t,e,n,r,i){let o=ru(),s=r&2;try{ws(-1),s&&e.length>Br&&JC(t,e,Br,!1),Fr(s?2:0,i),n(r,i)}finally{ws(o),Fr(s?3:1,i)}}function nT(t,e,n){if(tC(e)){let r=Oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Oe(r)}}}function rT(t,e,n){lC()&&(LO(t,e,n,Wn(n,e)),(n.flags&64)===64&&uT(t,e,n))}function iT(t,e,n=Wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function oT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Uv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Uv(t,e,n,r,i,o,s,a,c,l,f){let g=Br+r,w=g+i,E=SO(g,w),M=typeof l=="function"?l():l;return E[xe]={type:t,blueprint:E,template:n,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:M,incompleteFirstPass:!1,ssrId:f}}function SO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ti);return n}function xO(t,e,n,r){let o=r.get(eO,BC)||n===Lr.ShadowDom,s=t.selectRootElement(e,o);return MO(s),s}function MO(t){RO(t)}var RO=()=>null;function PO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return pk()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cD(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=kn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?lD(r,n,l,a,c):lD(r,n,l,a)}return r}function lD(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function NO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let f=r;f<i;f++){let g=o[f],w=n?n.get(g):null,E=w?w.inputs:null,M=w?w.outputs:null;c=cD(0,g.inputs,f,c,E),l=cD(1,g.outputs,f,l,M);let N=c!==null&&s!==null&&!yv(e)?QO(c,f,s):null;a.push(N)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function kO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function $v(t,e,n,r,i,o,s,a){let c=Wn(e,n),l=e.inputs,f;!a&&l!=null&&(f=l[r])?(qv(t,n,f,r,i),Mf(e)&&OO(n,e.index)):e.type&3?(r=kO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function OO(t,e){let n=ao(e,t);n[he]&16||(n[he]|=64)}function sT(t,e,n,r){if(lC()){let i=r===null?null:{"":-1},o=BO(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&aT(t,e,n,s,i,a),i&&UO(n,r,i)}n.mergedAttrs=Uc(n.mergedAttrs,n.attrs)}function aT(t,e,n,r,i,o){for(let l=0;l<r.length;l++)By(ff(n,e),t,r[l].type);qO(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,c=eT(t,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];n.mergedAttrs=Uc(n.mergedAttrs,f.hostAttrs),HO(t,n,e,c,f),$O(c,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let g=f.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}NO(t,n,o)}function FO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;VO(s)!=a&&s.push(a),s.push(n,r,o)}}function VO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function LO(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Mf(n)&&zO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ff(n,e),Es(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Za(e,t,a,n);if(Es(l,e),s!==null&&KO(e,a-i,l,c,n,s),oo(c)){let f=ao(n.index,e);f[pr]=Za(e,t,a,n)}}}function uT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ik();try{ws(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Ly(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&jO(c,l)}}finally{ws(-1),Ly(s)}}function jO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function BO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(R1(e,s.selectors,!1))if(r||(r=[]),oo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Wy(t,e,c)}else r.unshift(s),Wy(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Wy(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function UO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new le(-301,!1);r.push(e[i],o)}}}function $O(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;oo(e)&&(n[""]=t)}}function qO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function HO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=gs(i.type,!0)),s=new _s(o,oo(i),de);t.blueprint[r]=s,n[r]=s,FO(t,e,r,eT(t,n,i.hostVars,Ti),i)}function zO(t,e,n){let r=Wn(e,t),i=oT(n),o=t[gr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Lf(t,Ff(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function GO(t,e,n,r,i,o){let s=Wn(t,e);WO(e[Dt],s,o,t.value,n,r,i)}function WO(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Cf(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function KO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],f=s[a++],g=s[a++];XC(r,n,c,l,f,g)}}function QO(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function cT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function lT(t,e){let n=t.contentQueries;if(n!==null){let r=Oe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];pC(o),a.contentQueries(2,e[s],s)}}}finally{Oe(r)}}}function Lf(t,e){return t[Hc]?t[eD][fr]=e:t[Hc]=e,t[eD]=e,e}function Ky(t,e,n){pC(0);let r=Oe(null);try{e(t,n)}finally{Oe(r)}}function YO(t){return t[qc]||(t[qc]=[])}function ZO(t){return t.cleanup||(t.cleanup=[])}function dT(t,e){let n=t[Qa],r=n?n.get(wi,null):null;r&&r.handleError(e)}function qv(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],f=t.data[s];XC(f,l,r,a,c,i)}}function JO(t,e,n){let r=sC(e,t);sO(t[Dt],r,n)}function XO(t,e){let n=ao(e,t),r=n[xe];eF(r,n);let i=n[Di];i!==null&&n[sf]===null&&(n[sf]=Ov(i,n[Qa])),Hv(r,n,n[pr])}function eF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Hv(t,e,n){Tv(e);try{let r=t.viewQuery;r!==null&&Ky(1,r,n);let i=t.template;i!==null&&tT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ya]?.finishViewCreation(t),t.staticContentQueries&&lT(t,e),t.staticViewQueries&&Ky(2,t.viewQuery,n);let o=t.components;o!==null&&tF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[he]&=-5,Av()}}function tF(t,e){for(let n=0;n<e.length;n++)XO(t,e[n])}function nF(t,e,n,r){let i=Oe(null);try{let o=e.tView,a=t[he]&4096?4096:16,c=Ff(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Sf]=l;let f=t[Ya];return f!==null&&(c[Ya]=f.createEmbeddedView(o)),Hv(o,c,n),c}finally{Oe(i)}}function dD(t,e){return!e||e.firstChild===null||kC(t)}function rF(t,e,n,r=!0){let i=e[xe];if(lO(i,e,t,n),r){let s=Gy(n,t),a=e[Dt],c=Lv(a,t[vs]);c!==null&&uO(i,t[mr],a,e,c,s)}let o=e[sf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function mf(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Ur(o)),Ci(o)&&iF(o,r);let s=n.type;if(s&8)mf(t,e,n.child,r);else if(s&32){let a=Vv(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=QC(e,n);if(Array.isArray(a))r.push(...a);else{let c=Gc(e[jr]);mf(c[xe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function iF(t,e){for(let n=Gn;n<t.length;n++){let r=t[n],i=r[xe].firstChild;i!==null&&mf(r[xe],r,i,e)}t[vs]!==t[Di]&&e.push(t[vs])}var hT=[];function oF(t){return t[ys]??sF(t)}function sF(t){let e=hT.pop()??Object.create(uF);return e.lView=t,e}function aF(t){t.lView[ys]!==t&&(t.lView=null,hT.push(t))}var uF=qe(ne({},vI),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{zc(t.lView)},consumerOnSignalRead(){this.lView[ys]=this}}),fT=100;function pT(t,e=!0,n=0){let r=t[gr],i=r.rendererFactory,o=!1;o||i.begin?.();try{cF(t,n)}catch(s){throw e&&dT(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function cF(t,e){Qy(t,e);let n=0;for(;Cv(t);){if(n===fT)throw new le(103,!1);n++,Qy(t,1)}}function lF(t,e,n,r){let i=e[he];if((i&256)===256)return;let o=!1;!o&&e[gr].inlineEffectRunner?.flush(),Tv(e);let s=null,a=null;!o&&dF(t)&&(a=oF(e),s=wI(a));try{uC(e),wk(t.bindingStartIndex),n!==null&&tT(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let g=t.preOrderCheckHooks;g!==null&&Zh(e,g,null)}else{let g=t.preOrderHooks;g!==null&&Jh(e,g,0,null),my(e,0)}if(hF(e),gT(e,0),t.contentQueries!==null&&lT(t,e),!o)if(c){let g=t.contentCheckHooks;g!==null&&Zh(e,g)}else{let g=t.contentHooks;g!==null&&Jh(e,g,1),my(e,1)}TO(t,e);let l=t.components;l!==null&&yT(e,l,0);let f=t.viewQuery;if(f!==null&&Ky(2,f,r),!o)if(c){let g=t.viewCheckHooks;g!==null&&Zh(e,g)}else{let g=t.viewHooks;g!==null&&Jh(e,g,2),my(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[gy]){for(let g of e[gy])g();e[gy]=null}o||(e[he]&=-73)}catch(c){throw zc(e),c}finally{a!==null&&(_I(a,s),aF(a)),Av()}}function dF(t){return t.type!==2}function gT(t,e){for(let n=FC(t);n!==null;n=VC(n))for(let r=Gn;r<n.length;r++){let i=n[r];mT(i,e)}}function hF(t){for(let e=FC(t);e!==null;e=VC(e)){if(!(e[he]&bv.HasTransplantedViews))continue;let n=e[uf];for(let r=0;r<n.length;r++){let i=n[r],o=i[nn];uk(i)}}}function fF(t,e,n){let r=ao(e,t);mT(r,n)}function mT(t,e){Dv(t)&&Qy(t,e)}function Qy(t,e){let r=t[xe],i=t[he],o=t[ys],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&zm(o)),o&&(o.dirty=!1),t[he]&=-9217,s)lF(r,t,r.template,t[pr]);else if(i&8192){gT(t,1);let a=r.components;a!==null&&yT(t,a,1)}}function yT(t,e,n){for(let r=0;r<e.length;r++)fF(t,e[r],n)}function zv(t){for(t[gr].changeDetectionScheduler?.notify();t;){t[he]|=64;let e=Gc(t);if(J1(t)&&!e)return t;t=e}return null}var bs=class{get rootNodes(){let e=this._lView,n=e[xe];return mf(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pr]}set context(e){this._lView[pr]=e}get destroyed(){return(this._lView[he]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nn];if(Ci(e)){let n=e[af],r=n?n.indexOf(this):-1;r>-1&&(zy(e,r),rf(n,r))}this._attachedToViewContainer=!1}WC(this._lView[xe],this._lView)}onDestroy(e){cC(this._lView,e)}markForCheck(){zv(this._cdRefInjectingView||this._lView)}detach(){this._lView[he]&=-129}reattach(){Vy(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,pT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,zC(this._lView[xe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e,Vy(this._lView)}},jf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mF;let t=e;return t})(),pF=jf,gF=class extends pF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=nF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new bs(i)}};function mF(){return yF(On(),ze())}function yF(t,e){return t.type&4?new gF(e,t,Nf(t,e)):null}var r6=new RegExp(`^(\\d+)*(${Jk}|${Zk})*(.*)`);var vF=()=>null;function hD(t,e){return vF(t,e)}var Yy=class{},Zy=class{},yf=class{};function wF(t){let e=Error(`No component factory found for ${hn(t)}.`);return e[_F]=t,e}var _F="ngComponent";var Jy=class{resolveComponentFactory(e){throw wF(e)}},Bf=(()=>{let e=class e{};e.NULL=new Jy;let t=e;return t})(),Wc=class{},As=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>EF();let t=e;return t})();function EF(){let t=ze(),e=On(),n=ao(e.index,t);return(fs(n)?n:t)[Dt]}var bF=(()=>{let e=class e{};e.\u0275prov=re({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ey={};var fD=new Set;function Gv(t){fD.has(t)||(fD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function pD(...t){}function IF(){let t=typeof vi.requestAnimationFrame=="function",e=vi[t?"requestAnimationFrame":"setTimeout"],n=vi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var He=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dt(!1),this.onMicrotaskEmpty=new dt(!1),this.onStable=new dt(!1),this.onError=new dt(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=IF().nativeRequestAnimationFrame,TF(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new le(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,DF,pD,pD);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},DF={};function Wv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function CF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(vi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Xy(t),t.isCheckStableRunning=!0,Wv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Xy(t))}function TF(t){let e=()=>{CF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(AF(a))return n.invokeTask(i,o,s,a);try{return gD(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),mD(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return gD(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),mD(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Xy(t),Wv(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Xy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function gD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mD(t){t._nesting--,Wv(t)}function AF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var vT=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=re({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function ev(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=HI(i,a);else if(o==2){let c=a,l=e[++s];r=HI(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var vf=class extends Bf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ms(e);return new Kc(n,this.ngModule)}};function yD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function SF(t){let e=t.toLowerCase();return e==="svg"?nk:e==="math"?rk:null}var tv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Tf(r);let i=this.injector.get(e,Ey,r);return i!==Ey||n===Ey?i:this.parentInjector.get(e,n,r)}},Kc=class extends yf{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=yD(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return yD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=O1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Oe(null);try{i=i||this.ngModule;let s=i instanceof An?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new tv(e,s):e,c=a.get(Wc,null);if(c===null)throw new le(407,!1);let l=a.get(bF,null),f=a.get(vT,null),g=a.get(Yy,null),w={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:g},E=c.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",N=r?xO(E,r,this.componentDef.encapsulation,a):HC(E,M,SF(M)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let B=null;N!==null&&(B=Ov(N,a,!0));let W=Uv(0,null,null,1,0,null,null,null,null,null,null),q=Ff(null,W,null,R,null,null,w,E,a,null,B);Tv(q);let K,se;try{let ie=this.componentDef,T,b=null;ie.findHostDirectiveDefs?(T=[],b=new Map,ie.findHostDirectiveDefs(ie,T,b),T.push(ie)):T=[ie];let C=xF(q,N),A=MF(C,N,ie,T,q,w,E);se=aC(W,Br),N&&NF(E,ie,N,r),n!==void 0&&kF(se,this.ngContentSelectors,n),K=PF(A,ie,T,b,q,[OF]),Hv(W,q,null)}finally{Av()}return new nv(this.componentType,K,Nf(se,q),q,se)}finally{Oe(o)}}},nv=class extends Zy{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new bs(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;qv(o[xe],o,i,e,n),this.previousInputValues.set(e,n);let s=ao(this._tNode.index,o);zv(s)}}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xF(t,e){let n=t[xe],r=Br;return t[r]=e,Vf(n,r,2,"#host",null)}function MF(t,e,n,r,i,o,s){let a=i[xe];RF(r,t,e,s);let c=null;e!==null&&(c=Ov(e,i[Qa]));let l=o.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let g=Ff(i,oT(n),null,f,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&Wy(a,t,r.length-1),Lf(i,g),i[t.index]=g}function RF(t,e,n,r){for(let i of t)e.mergedAttrs=Uc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ev(e,e.mergedAttrs,!0),n!==null&&ZC(r,n,e))}function PF(t,e,n,r,i,o){let s=On(),a=i[xe],c=Wn(s,i);aT(a,i,s,n,null,r);for(let f=0;f<n.length;f++){let g=s.directiveStart+f,w=Za(i,a,g,s);Es(w,i)}uT(a,i,s),c&&Es(c,i);let l=Za(i,a,s.directiveStart+s.componentOffset,s);if(t[pr]=i[pr]=l,o!==null)for(let f of o)f(l,e);return nT(a,s,i),l}function NF(t,e,n,r){if(r)Py(t,n,["ng-version","17.3.10"]);else{let{attrs:i,classes:o}=F1(e.selectors[0]);i&&Py(t,n,i),o&&o.length>0&&YC(t,n,o.join(" "))}}function kF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function OF(){let t=On();Mv(ze()[xe],t)}var iu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FF;let t=e;return t})();function FF(){let t=On();return LF(t,ze())}var VF=iu,wT=class extends VF{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Nf(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rv(this._hostTNode,this._hostLView);if(bC(e)){let n=df(e,this._hostLView),r=lf(e),i=n[xe].data[r+8];return new ps(i,n)}else return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=vD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Gn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=hD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,dD(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!Z1(e),a;if(s)a=n;else{let M=n||{};a=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let c=s?e:new Kc(ms(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let N=(s?l:this.parentInjector).get(An,null);N&&(o=N)}let f=ms(c.componentType??{}),g=hD(this._lContainer,f?.id??null),w=g?.firstChild??null,E=c.create(l,i,w,o);return this.insertImpl(E.hostView,a,dD(this._hostTNode,g)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(ak(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[nn],l=new wT(c,c[mr],c[nn]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return rF(s,i,o,r),e.attachToViewContainerRef(),LD(by(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=vD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=zy(this._lContainer,n);r&&(rf(by(this._lContainer),n),WC(r[xe],r))}detach(e){let n=this._adjustIndex(e,-1),r=zy(this._lContainer,n);return r&&rf(by(this._lContainer),n)!=null?new bs(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function vD(t){return t[af]}function by(t){return t[af]||(t[af]=[])}function LF(t,e){let n,r=e[t.index];return Ci(r)?n=r:(n=cT(r,e,null,t),e[t.index]=n,Lf(e,n)),BF(n,e,t,r),new wT(n,t,e)}function jF(t,e){let n=t[Dt],r=n.createComment(""),i=Wn(e,t),o=Lv(n,i);return gf(n,o,r,yO(n,i),!1),r}var BF=qF,UF=()=>!1;function $F(t,e,n){return UF(t,e,n)}function qF(t,e,n,r){if(t[vs])return;let i;n.type&8?i=Ur(r):i=jF(e,n),t[vs]=i}function HF(t){return typeof t=="function"&&t[Hm]!==void 0}function _T(t){return HF(t)&&typeof t.set=="function"}function zF(t){return Object.getPrototypeOf(t.prototype).constructor}function yr(t){let e=zF(t.type),n=!0,r=[t];for(;e;){let i;if(oo(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Kh(t.inputs),s.inputTransforms=Kh(t.inputTransforms),s.declaredInputs=Kh(t.declaredInputs),s.outputs=Kh(t.outputs);let a=i.hostBindings;a&&YF(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&KF(t,c),l&&QF(t,l),GF(t,i),n1(t.outputs,i.outputs),oo(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===yr&&(n=!1)}}e=Object.getPrototypeOf(e)}WF(r)}function GF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function WF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Uc(i.hostAttrs,n=Uc(n,i.hostAttrs))}}function Kh(t){return t===Ga?{}:t===zn?[]:t}function KF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function QF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function YF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var so=class{},Qc=class{};var rv=class extends so{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vf(this);let i=GD(e);this._bootstrapComponents=qC(i.bootstrap),this._r3Injector=RC(e,n,[{provide:so,useValue:this},{provide:Bf,useValue:this.componentFactoryResolver},...r],hn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},iv=class extends Qc{constructor(e){super(),this.moduleType=e}create(e){return new rv(this.moduleType,e,[])}};var wf=class extends so{constructor(e){super(),this.componentFactoryResolver=new vf(this),this.instance=null;let n=new $c([...e.providers,{provide:so,useValue:this},{provide:Bf,useValue:this.componentFactoryResolver}],e.parent||Ev(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Kv(t,e,n=null){return new wf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ss=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Kt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ET(t){return JF(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function ZF(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function JF(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function bT(t,e,n){return t[e]=n}function XF(t,e){return t[e]}function ou(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function eV(t){return(t.flags&32)===32}function tV(t,e,n,r,i,o,s,a,c){let l=e.consts,f=Vf(e,t,4,s||null,cf(l,a));sT(e,n,f,cf(l,c)),Mv(e,f);let g=f.tView=Uv(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}function vr(t,e,n,r,i,o,s,a){let c=ze(),l=gn(),f=t+Br,g=l.firstCreatePass?tV(f,l,c,e,n,r,i,o,s):l.data[f];el(g,!1);let w=nV(l,c,g,t);Sv()&&jv(l,c,w,g),Es(w,c);let E=cT(w,c,w,g);return c[f]=E,Lf(c,E),$F(E,g,c),Iv(g)&&rT(l,c,g),s!=null&&iT(c,g,a),vr}var nV=rV;function rV(t,e,n,r){return xv(!0),e[Dt].createComment("")}function Uf(t,e,n,r){let i=ze(),o=Rf();if(ou(i,o,e)){let s=gn(),a=Pf();GO(a,i,t,e,n,r)}return Uf}function IT(t,e,n,r){return ou(t,Rf(),n)?e+Cf(n)+r:Ti}function Qh(t,e){return t<<17|e<<2}function Is(t){return t>>17&32767}function iV(t){return(t&2)==2}function oV(t,e){return t&131071|e<<17}function ov(t){return t|2}function Ja(t){return(t&131068)>>2}function Iy(t,e){return t&-131069|e<<2}function sV(t){return(t&1)===1}function sv(t){return t|1}function aV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Is(s),c=Ja(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let g=n;f=g[1],(f===null||Xc(g,f)>0)&&(l=!0)}else f=n;if(i)if(c!==0){let w=Is(t[a+1]);t[r+1]=Qh(w,a),w!==0&&(t[w+1]=Iy(t[w+1],r)),t[a+1]=oV(t[a+1],r)}else t[r+1]=Qh(a,0),a!==0&&(t[a+1]=Iy(t[a+1],r)),a=r;else t[r+1]=Qh(c,0),a===0?a=r:t[c+1]=Iy(t[c+1],r),c=r;l&&(t[r+1]=ov(t[r+1])),wD(t,f,r,!0),wD(t,f,r,!1),uV(e,f,t,r,o),s=Qh(a,c),o?e.classBindings=s:e.styleBindings=s}function uV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Xc(o,e)>=0&&(n[r+1]=sv(n[r+1]))}function wD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Is(i):Ja(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];cV(c,e)&&(a=!0,t[s+1]=r?sv(l):ov(l)),s=r?Is(l):Ja(l)}a&&(t[n+1]=r?ov(i):sv(i))}function cV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Xc(t,e)>=0:!1}function Lt(t,e,n){let r=ze(),i=Rf();if(ou(r,i,e)){let o=gn(),s=Pf();$v(o,s,r,t,e,r[Dt],n,!1)}return Lt}function _D(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";qv(t,n,o[s],s,r)}function lo(t,e){return lV(t,e,null,!0),lo}function lV(t,e,n,r){let i=ze(),o=gn(),s=_k(2);if(o.firstUpdatePass&&hV(o,t,s,r),e!==Ti&&ou(i,s,e)){let a=o.data[ru()];yV(o,a,i,i[Dt],t,i[s+1]=vV(e,n),r,s)}}function dV(t,e){return e>=t.expandoStartIndex}function hV(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ru()],s=dV(t,n);wV(o,r)&&e===null&&!s&&(e=!1),e=fV(i,o,e,r),aV(i,o,e,n,s,r)}}function fV(t,e,n,r){let i=Dk(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Dy(null,t,e,n,r),n=Yc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Dy(i,t,e,n,r),o===null){let c=pV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Dy(null,t,e,c[1],r),c=Yc(c,e.attrs,r),gV(t,e,r,c))}else o=mV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function pV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ja(r)!==0)return t[Is(r)]}function gV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Is(i)]=r}function mV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Yc(r,s,n)}return Yc(r,e.attrs,n)}function Dy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Yc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Yc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),b1(t,s,n?!0:e[++o]))}return t===void 0?null:t}function yV(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],f=sV(l)?ED(c,e,n,i,Ja(l),s):void 0;if(!_f(f)){_f(o)||iV(l)&&(o=ED(c,null,n,i,a,s));let g=sC(ru(),n);DO(r,s,g,i,o)}}function ED(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),f=l?c[1]:c,g=f===null,w=n[i+1];w===Ti&&(w=g?zn:void 0);let E=g?fy(w,r):f===r?w:void 0;if(l&&!_f(E)&&(E=fy(c,r)),_f(E)&&(a=E,s))return a;let M=t[i+1];i=s?Is(M):Ja(M)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=fy(c,r))}return a}function _f(t){return t!==void 0}function vV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=hn(kf(t)))),t}function wV(t,e){return(t.flags&(e?8:16))!==0}function _V(t,e,n,r,i,o){let s=e.consts,a=cf(s,i),c=Vf(e,t,2,r,a);return sT(e,n,c,cf(s,o)),c.attrs!==null&&ev(c,c.attrs,!1),c.mergedAttrs!==null&&ev(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Y(t,e,n,r){let i=ze(),o=gn(),s=Br+t,a=i[Dt],c=o.firstCreatePass?_V(s,o,i,e,n,r):o.data[s],l=EV(o,i,c,a,e,t);i[s]=l;let f=Iv(c);return el(c,!0),ZC(a,l,c),!eV(c)&&Sv()&&jv(o,i,l,c),dk()===0&&Es(l,i),hk(),f&&(rT(o,i,c),nT(o,c,i)),r!==null&&iT(i,c),Y}function X(){let t=On();hC()?vk():(t=t.parent,el(t,!1));let e=t;gk(e)&&mk(),fk();let n=gn();return n.firstCreatePass&&(Mv(n,t),tC(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Rk(e)&&_D(n,e,ze(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Pk(e)&&_D(n,e,ze(),e.stylesWithoutHost,!1),X}function mn(t,e,n,r){return Y(t,e,n,r),X(),mn}var EV=(t,e,n,r,i,o)=>(xv(!0),HC(r,i,Ak()));function su(){return ze()}var hs=void 0;function bV(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var IV=["en",[["a","p"],["AM","PM"],hs],[["AM","PM"],hs,hs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hs,"{1} 'at' {0}",hs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",bV],Cy={};function Kn(t){let e=DV(t),n=bD(e);if(n)return n;let r=e.split("-")[0];if(n=bD(r),n)return n;if(r==="en")return IV;throw new le(701,!1)}function bD(t){return t in Cy||(Cy[t]=vi.ng&&vi.ng.common&&vi.ng.common.locales&&vi.ng.common.locales[t]),Cy[t]}var vt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(vt||{});function DV(t){return t.toLowerCase().replace(/_/g,"-")}var Ef="en-US";var CV=Ef;function TV(t){typeof t=="string"&&(CV=t.toLowerCase().replace(/_/g,"-"))}function et(t,e,n,r){let i=ze(),o=gn(),s=On();return DT(o,i,i[Dt],s,t,e,r),et}function AV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[qc],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function DT(t,e,n,r,i,o,s){let a=Iv(r),l=t.firstCreatePass&&ZO(t),f=e[pr],g=YO(e),w=!0;if(r.type&3||s){let N=Wn(r,e),R=s?s(N):N,B=g.length,W=s?K=>s(Ur(K[r.index])):r.index,q=null;if(!s&&a&&(q=AV(t,e,i,r.index)),q!==null){let K=q.__ngLastListenerFn__||q;K.__ngNextListenerFn__=o,q.__ngLastListenerFn__=o,w=!1}else{o=DD(r,e,f,o,!1);let K=n.listen(R,i,o);g.push(o,K),l&&l.push(i,W,B,B+1)}}else o=DD(r,e,f,o,!1);let E=r.outputs,M;if(w&&E!==null&&(M=E[i])){let N=M.length;if(N)for(let R=0;R<N;R+=2){let B=M[R],W=M[R+1],se=e[B][W].subscribe(o),ie=g.length;g.push(o,se),l&&l.push(i,r.index,ie,-(ie+1))}}}function ID(t,e,n,r){let i=Oe(null);try{return Fr(6,e,n),n(r)!==!1}catch(o){return dT(t,o),!1}finally{Fr(7,e,n),Oe(i)}}function DD(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?ao(t.index,e):e;zv(a);let c=ID(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=ID(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function Qn(t=1){return Tk(t)}function xs(t,e,n){return CT(t,"",e,"",n),xs}function CT(t,e,n,r,i){let o=ze(),s=IT(o,e,n,r);if(s!==Ti){let a=gn(),c=Pf();$v(a,c,o,t,s,o[Dt],i,!1)}return CT}function SV(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function ge(t,e=""){let n=ze(),r=gn(),i=t+Br,o=r.firstCreatePass?Vf(r,i,1,e,null):r.data[i],s=xV(r,n,o,e,t);n[i]=s,Sv()&&jv(r,n,s,o),el(o,!1)}var xV=(t,e,n,r,i)=>(xv(!0),oO(e[Dt],r));function Yn(t){return $r("",t,""),Yn}function $r(t,e,n){let r=ze(),i=IT(r,t,e,n);return i!==Ti&&JO(r,ru(),i),$r}function jt(t,e,n){_T(e)&&(e=e());let r=ze(),i=Rf();if(ou(r,i,e)){let o=gn(),s=Pf();$v(o,s,r,t,e,r[Dt],n,!1)}return jt}function zt(t,e){let n=_T(t);return n&&t.set(e),n}function Bt(t,e){let n=ze(),r=gn(),i=On();return DT(r,n,n[Dt],i,t,e),Bt}function MV(t,e,n){let r=gn();if(r.firstCreatePass){let i=oo(t);av(n,r.data,r.blueprint,i,!0),av(e,r.data,r.blueprint,i,!1)}}function av(t,e,n,r,i){if(t=dn(t),Array.isArray(t))for(let o=0;o<t.length;o++)av(t[o],e,n,r,i);else{let o=gn(),s=ze(),a=On(),c=Ka(t)?t:dn(t.provide),l=JD(t),f=a.providerIndexes&1048575,g=a.directiveStart,w=a.providerIndexes>>20;if(Ka(t)||!t.multi){let E=new _s(l,i,de),M=Ay(c,e,i?f:f+w,g);M===-1?(By(ff(a,s),o,c),Ty(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)):(n[M]=E,s[M]=E)}else{let E=Ay(c,e,f+w,g),M=Ay(c,e,f,f+w),N=E>=0&&n[E],R=M>=0&&n[M];if(i&&!R||!i&&!N){By(ff(a,s),o,c);let B=NV(i?PV:RV,n.length,i,r,l);!i&&R&&(n[M].providerFactory=B),Ty(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(B),s.push(B)}else{let B=TT(n[i?M:E],l,!i&&r);Ty(o,t,E>-1?E:M,B)}!i&&r&&R&&n[M].componentProviders++}}}function Ty(t,e,n,r){let i=Ka(e),o=q1(e);if(i||o){let c=(o?dn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,c]):l[f+1].push(r,c)}else l.push(n,c)}}}function TT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ay(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function RV(t,e,n,r){return uv(this.multi,[])}function PV(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Za(n,n[xe],this.providerFactory.index,r);o=a.slice(0,s),uv(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],uv(i,o);return o}function uv(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function NV(t,e,n,r,i){let o=new _s(t,n,de);return o.multi=[],o.index=e,o.componentProviders=0,TT(o,i,r&&!n),o}function Ms(t,e=[]){return n=>{n.providersResolver=(r,i)=>MV(r,i?i(t):t,e)}}var kV=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=QD(!1,r.type),o=i.length>0?Kv([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=re({token:e,providedIn:"environment",factory:()=>new e(z(An))});let t=e;return t})();function Tt(t){Gv("NgStandalone"),t.getStandaloneInjector=e=>e.get(kV).getOrCreateStandaloneInjector(t)}function AT(t,e,n){let r=fC()+t,i=ze();return i[r]===Ti?bT(i,r,n?e.call(n):e()):XF(i,r)}function OV(t,e){let n=t[e];return n===Ti?void 0:n}function FV(t,e,n,r,i,o){let s=e+n;return ou(t,s,i)?bT(t,s+1,o?r.call(o,i):r(i)):OV(t,s+1)}function au(t,e){let n=gn(),r,i=t+Br;n.firstCreatePass?(r=VV(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=gs(r.type,!0)),s,a=Tn(de);try{let c=hf(!1),l=o();return hf(c),SV(n,ze(),i,l),l}finally{Tn(a)}}function VV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function uu(t,e,n){let r=t+Br,i=ze(),o=sk(i,r);return LV(i,r)?FV(i,fC(),e,o.transform,n,o):o.transform(n)}function LV(t,e){return t[xe].data[e].pure}var Ei=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ST=new Ei("17.3.10"),$f=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var xT=new te("");function ho(t){return!!t&&typeof t.then=="function"}function Qv(t){return!!t&&typeof t.subscribe=="function"}var MT=new te(""),RT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=Z(MT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(ho(s))r.push(s);else if(Qv(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qf=new te("");function jV(){bI(()=>{throw new le(600,!1)})}function BV(t){return t.isBoundToModule}function UV(t,e,n){try{let r=n();return ho(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var cu=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Z(PC),this.afterRenderEffectManager=Z(vT),this.externalTestViews=new Set,this.beforeRender=new yt,this.afterTick=new yt,this.componentTypes=[],this.components=[],this.isStable=Z(Ss).hasPendingTasks.pipe(ae(r=>!r)),this._injector=Z(An)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof yf;if(!this._injector.get(RT).done){let E=!o&&zD(r),M=!1;throw new le(405,M)}let a;o?a=r:a=this._injector.get(Bf).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=BV(a)?void 0:this._injector.get(so),l=i||a.selector,f=a.create(Ts.NULL,[],l,c),g=f.location.nativeElement,w=f.injector.get(xT,null);return w?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),Sy(this.components,f),w?.unregisterApplication(g)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new le(101,!1);let i=Oe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Oe(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===fT)throw new le(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)$V(a,s,c)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>cv(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>cv(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Sy(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(qf,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Sy(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new le(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Sy(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function $V(t,e,n){!e&&!cv(t)||qV(t,n,e)}function cv(t){return Cv(t)}function qV(t,e,n){let r;n?(r=0,t[he]|=1024):t[he]&64?r=0:r=1,pT(t,e,r)}var lv=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Yv=(()=>{let e=class e{compileModuleSync(r){return new iv(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=GD(r),s=qC(o.declarations).reduce((a,c)=>{let l=ms(c);return l&&a.push(new Kc(l)),a},[]);return new lv(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var HV=(()=>{let e=class e{constructor(){this.zone=Z(He),this.applicationRef=Z(cu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zV(t){return[{provide:He,useFactory:t},{provide:Wa,multi:!0,useFactory:()=>{let e=Z(HV,{optional:!0});return()=>e.initialize()}},{provide:Wa,multi:!0,useFactory:()=>{let e=Z(QV);return()=>{e.initialize()}}},{provide:PC,useFactory:GV}]}function GV(){let t=Z(He),e=Z(wi);return n=>t.runOutsideAngular(()=>e.handleError(n))}function WV(t){let e=zV(()=>new He(KV(t)));return Xa([[],e])}function KV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var QV=(()=>{let e=class e{constructor(){this.subscription=new mt,this.initialized=!1,this.zone=Z(He),this.pendingTasks=Z(Ss)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{He.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{He.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function YV(){return typeof $localize<"u"&&$localize.locale||Ef}var Hf=new te("",{providedIn:"root",factory:()=>Z(Hf,Ce.Optional|Ce.SkipSelf)||YV()});var PT=new te("");var ef=null;function ZV(t=[],e){return Ts.create({name:e,providers:[{provide:Af,useValue:"platform"},{provide:PT,useValue:new Set([()=>ef=null])},...t]})}function JV(t=[]){if(ef)return ef;let e=ZV(t);return ef=e,jV(),XV(e),e}function XV(t){t.get(Nv,null)?.forEach(n=>n())}function Zv(){return!1}var fo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=e2;let t=e;return t})();function e2(t){return t2(On(),ze(),(t&16)===16)}function t2(t,e,n){if(Mf(t)&&!n){let r=ao(t.index,e);return new bs(r,r)}else if(t.type&47){let r=e[jr];return new bs(r,e)}return null}var dv=class{constructor(){}supports(e){return ET(e)}create(e){return new hv(e)}},n2=(t,e)=>e,hv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||n2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<CD(r,i,o)?n:r,a=CD(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=c-i;if(l!=f){for(let w=0;w<l;w++){let E=w<o.length?o[w]:o[w]=0,M=E+w;f<=M&&M<l&&(o[w]=E+1)}let g=s.previousIndex;o[g]=f-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!ET(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,ZF(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new fv(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new bf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new bf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},fv=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},pv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},bf=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new pv,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function CD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function TD(){return new Jv([new dv])}var Jv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||TD()),deps:[[e,new VD,new Jc]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new le(901,!1)}};e.\u0275prov=re({token:e,providedIn:"root",factory:TD});let t=e;return t})();function NT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=JV(r),o=[WV(),...n||[]],a=new wf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(He);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(wi,null),f;c.runOutsideAngular(()=>{f=c.onError.subscribe({next:E=>{l.handleError(E)}})});let g=()=>a.destroy(),w=i.get(PT);return w.add(g),a.onDestroy(()=>{f.unsubscribe(),w.delete(g)}),UV(l,c,()=>{let E=a.get(RT);return E.runInitializers(),E.donePromise.then(()=>{let M=a.get(Hf,Ef);TV(M||Ef);let N=a.get(cu);return e!==void 0&&N.bootstrap(e),N})})})}catch(e){return Promise.reject(e)}}function tl(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Xv(t){let e=Oe(null);try{return t()}finally{Oe(e)}}var jT=null;function xi(){return jT}function BT(t){jT??=t}var Xf=class{};var xn=new te(""),UT=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:()=>Z(o2),providedIn:"platform"});let t=e;return t})();var o2=(()=>{let e=class e extends UT{constructor(){super(),this._doc=Z(xn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xi().getBaseHref(this._doc)}onPopState(r){let i=xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function $T(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function kT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Rs(t){return t&&t[0]!=="?"?"?"+t:t}var tp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:()=>Z(qT),providedIn:"root"});let t=e;return t})(),s2=new te(""),qT=(()=>{let e=class e extends tp{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Z(xn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return $T(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Rs(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Rs(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Rs(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(UT),z(s2,8))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var nl=(()=>{let e=class e{constructor(r){this._subject=new dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=c2(kT(OT(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Rs(i))}normalize(r){return e.stripTrailingSlash(u2(this._basePath,OT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rs(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rs(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Rs,e.joinWithSlash=$T,e.stripTrailingSlash=kT,e.\u0275fac=function(i){return new(i||e)(z(tp))},e.\u0275prov=re({token:e,factory:()=>a2(),providedIn:"root"});let t=e;return t})();function a2(){return new nl(z(tp))}function u2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function OT(t){return t.replace(/\/index.html$/,"")}function c2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var yn=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(yn||{}),Qe=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Qe||{}),Fn=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Fn||{}),po={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function l2(t){return Kn(t)[vt.LocaleId]}function d2(t,e,n){let r=Kn(t),i=[r[vt.DayPeriodsFormat],r[vt.DayPeriodsStandalone]],o=Zn(i,e);return Zn(o,n)}function h2(t,e,n){let r=Kn(t),i=[r[vt.DaysFormat],r[vt.DaysStandalone]],o=Zn(i,e);return Zn(o,n)}function f2(t,e,n){let r=Kn(t),i=[r[vt.MonthsFormat],r[vt.MonthsStandalone]],o=Zn(i,e);return Zn(o,n)}function p2(t,e){let r=Kn(t)[vt.Eras];return Zn(r,e)}function zf(t,e){let n=Kn(t);return Zn(n[vt.DateFormat],e)}function Gf(t,e){let n=Kn(t);return Zn(n[vt.TimeFormat],e)}function Wf(t,e){let r=Kn(t)[vt.DateTimeFormat];return Zn(r,e)}function np(t,e){let n=Kn(t),r=n[vt.NumberSymbols][e];if(typeof r>"u"){if(e===po.CurrencyDecimal)return n[vt.NumberSymbols][po.Decimal];if(e===po.CurrencyGroup)return n[vt.NumberSymbols][po.Group]}return r}function HT(t){if(!t[vt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[vt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function g2(t){let e=Kn(t);return HT(e),(e[vt.ExtraData][2]||[]).map(r=>typeof r=="string"?ew(r):[ew(r[0]),ew(r[1])])}function m2(t,e,n){let r=Kn(t);HT(r);let i=[r[vt.ExtraData][0],r[vt.ExtraData][1]],o=Zn(i,e)||[];return Zn(o,n)||[]}function Zn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function ew(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var y2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Kf={},v2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Si=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Si||{}),je=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(je||{}),Le=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Le||{});function w2(t,e,n,r){let i=S2(t);e=Ai(n,e)||e;let s=[],a;for(;e;)if(a=v2.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=GT(r,c),i=A2(i,r,!0));let l="";return s.forEach(f=>{let g=C2(f);l+=g?g(i,n,c):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function ep(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Ai(t,e){let n=l2(t);if(Kf[n]??={},Kf[n][e])return Kf[n][e];let r="";switch(e){case"shortDate":r=zf(t,Fn.Short);break;case"mediumDate":r=zf(t,Fn.Medium);break;case"longDate":r=zf(t,Fn.Long);break;case"fullDate":r=zf(t,Fn.Full);break;case"shortTime":r=Gf(t,Fn.Short);break;case"mediumTime":r=Gf(t,Fn.Medium);break;case"longTime":r=Gf(t,Fn.Long);break;case"fullTime":r=Gf(t,Fn.Full);break;case"short":let i=Ai(t,"shortTime"),o=Ai(t,"shortDate");r=Qf(Wf(t,Fn.Short),[i,o]);break;case"medium":let s=Ai(t,"mediumTime"),a=Ai(t,"mediumDate");r=Qf(Wf(t,Fn.Medium),[s,a]);break;case"long":let c=Ai(t,"longTime"),l=Ai(t,"longDate");r=Qf(Wf(t,Fn.Long),[c,l]);break;case"full":let f=Ai(t,"fullTime"),g=Ai(t,"fullDate");r=Qf(Wf(t,Fn.Full),[f,g]);break}return r&&(Kf[n][e]=r),r}function Qf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function wr(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function _2(t,e){return wr(t,3).substring(0,e)}function At(t,e,n=0,r=!1,i=!1){return function(o,s){let a=E2(t,o);if((n>0||a>-n)&&(a+=n),t===je.Hours)a===0&&n===-12&&(a=12);else if(t===je.FractionalSeconds)return _2(a,e);let c=np(s,po.MinusSign);return wr(a,e,c,r,i)}}function E2(t,e){switch(t){case je.FullYear:return e.getFullYear();case je.Month:return e.getMonth();case je.Date:return e.getDate();case je.Hours:return e.getHours();case je.Minutes:return e.getMinutes();case je.Seconds:return e.getSeconds();case je.FractionalSeconds:return e.getMilliseconds();case je.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ze(t,e,n=yn.Format,r=!1){return function(i,o){return b2(i,o,t,e,n,r)}}function b2(t,e,n,r,i,o){switch(n){case Le.Months:return f2(e,i,r)[t.getMonth()];case Le.Days:return h2(e,i,r)[t.getDay()];case Le.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let l=g2(e),f=m2(e,i,r),g=l.findIndex(w=>{if(Array.isArray(w)){let[E,M]=w,N=s>=E.hours&&a>=E.minutes,R=s<M.hours||s===M.hours&&a<M.minutes;if(E.hours<M.hours){if(N&&R)return!0}else if(N||R)return!0}else if(w.hours===s&&w.minutes===a)return!0;return!1});if(g!==-1)return f[g]}return d2(e,i,r)[s<12?0:1];case Le.Eras:return p2(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function Yf(t){return function(e,n,r){let i=-1*r,o=np(n,po.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Si.Short:return(i>=0?"+":"")+wr(s,2,o)+wr(Math.abs(i%60),2,o);case Si.ShortGMT:return"GMT"+(i>=0?"+":"")+wr(s,1,o);case Si.Long:return"GMT"+(i>=0?"+":"")+wr(s,2,o)+":"+wr(Math.abs(i%60),2,o);case Si.Extended:return r===0?"Z":(i>=0?"+":"")+wr(s,2,o)+":"+wr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var I2=0,Jf=4;function D2(t){let e=ep(t,I2,1).getDay();return ep(t,0,1+(e<=Jf?Jf:Jf+7)-e)}function zT(t){let e=t.getDay(),n=e===0?-3:Jf-e;return ep(t.getFullYear(),t.getMonth(),t.getDate()+n)}function tw(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=zT(n),s=D2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return wr(i,t,np(r,po.MinusSign))}}function Zf(t,e=!1){return function(n,r){let o=zT(n).getFullYear();return wr(o,t,np(r,po.MinusSign),e)}}var nw={};function C2(t){if(nw[t])return nw[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ze(Le.Eras,Qe.Abbreviated);break;case"GGGG":e=Ze(Le.Eras,Qe.Wide);break;case"GGGGG":e=Ze(Le.Eras,Qe.Narrow);break;case"y":e=At(je.FullYear,1,0,!1,!0);break;case"yy":e=At(je.FullYear,2,0,!0,!0);break;case"yyy":e=At(je.FullYear,3,0,!1,!0);break;case"yyyy":e=At(je.FullYear,4,0,!1,!0);break;case"Y":e=Zf(1);break;case"YY":e=Zf(2,!0);break;case"YYY":e=Zf(3);break;case"YYYY":e=Zf(4);break;case"M":case"L":e=At(je.Month,1,1);break;case"MM":case"LL":e=At(je.Month,2,1);break;case"MMM":e=Ze(Le.Months,Qe.Abbreviated);break;case"MMMM":e=Ze(Le.Months,Qe.Wide);break;case"MMMMM":e=Ze(Le.Months,Qe.Narrow);break;case"LLL":e=Ze(Le.Months,Qe.Abbreviated,yn.Standalone);break;case"LLLL":e=Ze(Le.Months,Qe.Wide,yn.Standalone);break;case"LLLLL":e=Ze(Le.Months,Qe.Narrow,yn.Standalone);break;case"w":e=tw(1);break;case"ww":e=tw(2);break;case"W":e=tw(1,!0);break;case"d":e=At(je.Date,1);break;case"dd":e=At(je.Date,2);break;case"c":case"cc":e=At(je.Day,1);break;case"ccc":e=Ze(Le.Days,Qe.Abbreviated,yn.Standalone);break;case"cccc":e=Ze(Le.Days,Qe.Wide,yn.Standalone);break;case"ccccc":e=Ze(Le.Days,Qe.Narrow,yn.Standalone);break;case"cccccc":e=Ze(Le.Days,Qe.Short,yn.Standalone);break;case"E":case"EE":case"EEE":e=Ze(Le.Days,Qe.Abbreviated);break;case"EEEE":e=Ze(Le.Days,Qe.Wide);break;case"EEEEE":e=Ze(Le.Days,Qe.Narrow);break;case"EEEEEE":e=Ze(Le.Days,Qe.Short);break;case"a":case"aa":case"aaa":e=Ze(Le.DayPeriods,Qe.Abbreviated);break;case"aaaa":e=Ze(Le.DayPeriods,Qe.Wide);break;case"aaaaa":e=Ze(Le.DayPeriods,Qe.Narrow);break;case"b":case"bb":case"bbb":e=Ze(Le.DayPeriods,Qe.Abbreviated,yn.Standalone,!0);break;case"bbbb":e=Ze(Le.DayPeriods,Qe.Wide,yn.Standalone,!0);break;case"bbbbb":e=Ze(Le.DayPeriods,Qe.Narrow,yn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ze(Le.DayPeriods,Qe.Abbreviated,yn.Format,!0);break;case"BBBB":e=Ze(Le.DayPeriods,Qe.Wide,yn.Format,!0);break;case"BBBBB":e=Ze(Le.DayPeriods,Qe.Narrow,yn.Format,!0);break;case"h":e=At(je.Hours,1,-12);break;case"hh":e=At(je.Hours,2,-12);break;case"H":e=At(je.Hours,1);break;case"HH":e=At(je.Hours,2);break;case"m":e=At(je.Minutes,1);break;case"mm":e=At(je.Minutes,2);break;case"s":e=At(je.Seconds,1);break;case"ss":e=At(je.Seconds,2);break;case"S":e=At(je.FractionalSeconds,1);break;case"SS":e=At(je.FractionalSeconds,2);break;case"SSS":e=At(je.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Yf(Si.Short);break;case"ZZZZZ":e=Yf(Si.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Yf(Si.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Yf(Si.Long);break;default:return null}return nw[t]=e,e}function GT(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function T2(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function A2(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=GT(e,i);return T2(t,r*(o-i))}function S2(t){if(FT(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return ep(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(y2))return x2(r)}let e=new Date(t);if(!FT(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function x2(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function FT(t){return t instanceof Date&&!isNaN(t.valueOf())}function rp(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var rw=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},du=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new rw(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),VT(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);VT(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(de(iu),de(jf),de(Jv))},e.\u0275dir=Ht({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function VT(t,e){t.context.$implicit=e.item}var ip=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new iw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){LT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){LT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(de(iu),de(jf))},e.\u0275dir=Ht({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),iw=class{constructor(){this.$implicit=null,this.ngIf=null}};function LT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${hn(e)}'.`)}function WT(t,e){return new le(2100,!1)}var ow=class{createSubscription(e,n){return Xv(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Xv(()=>e.unsubscribe())}},sw=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},M2=new sw,R2=new ow,KT=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(ho(r))return M2;if(Qv(r))return R2;throw WT(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(de(fo,16))},e.\u0275pipe=vv({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var P2="mediumDate",N2=new te(""),k2=new te(""),op=(()=>{let e=class e{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,s){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??P2,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return w2(r,a,s||this.locale,c)}catch(a){throw WT(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(de(Hf,16),de(N2,24),de(k2,24))},e.\u0275pipe=vv({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var rl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=fn({});let t=e;return t})(),QT="browser",O2="server";function go(t){return t===O2}var lu=class{};var ol=class{},ap=class{},Ps=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var uw=class{encodeKey(e){return ZT(e)}encodeValue(e){return ZT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function L2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var j2=/%(\d[a-f0-9])/gi,B2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZT(t){return encodeURIComponent(t).replace(j2,(e,n)=>B2[n]??e)}function sp(t){return`${t}`}var mo=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=L2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(sp):[sp(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(sp(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(sp(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var cw=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function U2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function JT(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function XT(t){return typeof Blob<"u"&&t instanceof Blob}function eA(t){return typeof FormData<"u"&&t instanceof FormData}function $2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var il=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(U2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ps,this.context??=new cw,!this.params)this.params=new mo,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||JT(this.body)||XT(this.body)||eA(this.body)||$2(this.body)?this.body:this.body instanceof mo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||eA(this.body)?null:XT(this.body)?this.body.type||null:JT(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof mo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,f=e.params||this.params,g=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((w,E)=>w.set(E,e.setHeaders[E]),l)),e.setParams&&(f=Object.keys(e.setParams).reduce((w,E)=>w.set(E,e.setParams[E]),f)),new t(n,r,s,{params:f,headers:l,context:g,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},hu=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(hu||{}),sl=class{constructor(e,n=lp.Ok,r="OK"){this.headers=e.headers||new Ps,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},lw=class t extends sl{constructor(e={}){super(e),this.type=hu.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},up=class t extends sl{constructor(e={}){super(e),this.type=hu.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},cp=class extends sl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},lp=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(lp||{});function aw(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var dw=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof il)s=r;else{let l;o.headers instanceof Ps?l=o.headers:l=new Ps(o.headers);let f;o.params&&(o.params instanceof mo?f=o.params:f=new mo({fromObject:o.params})),s=new il(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:f,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=ce(s).pipe(eo(l=>this.handler.handle(l)));if(r instanceof il||o.observe==="events")return a;let c=a.pipe(qt(l=>l instanceof up));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ae(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ae(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new mo().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,aw(o,i))}post(r,i,o={}){return this.request("POST",r,aw(o,i))}put(r,i,o={}){return this.request("PUT",r,aw(o,i))}};e.\u0275fac=function(i){return new(i||e)(z(ol))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})();function iA(t,e){return e(t)}function q2(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function H2(t,e,n){return(r,i)=>Ii(n,()=>e(r,o=>t(o,i)))}var z2=new te(""),hw=new te(""),G2=new te(""),W2=new te("");function K2(){let t=null;return(e,n)=>{t===null&&(t=(Z(z2,{optional:!0})??[]).reduceRight(q2,iA));let r=Z(Ss),i=r.add();return t(e,n).pipe(no(()=>r.remove(i)))}}var tA=(()=>{let e=class e extends ol{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=Z(Ss);let o=Z(W2,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(hw),...this.injector.get(G2,[])]));this.chain=o.reduceRight((s,a)=>H2(s,a,this.injector),iA)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(no(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(z(ap),z(An))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})();var Q2=/^\)\]\}',?\n/;function Y2(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var nA=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new le(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Fe(i.\u0275loadImpl()):ce(null)).pipe(ut(()=>new we(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((R,B)=>a.setRequestHeader(R,B.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let R=r.detectContentTypeHeader();R!==null&&a.setRequestHeader("Content-Type",R)}if(r.responseType){let R=r.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let c=r.serializeBody(),l=null,f=()=>{if(l!==null)return l;let R=a.statusText||"OK",B=new Ps(a.getAllResponseHeaders()),W=Y2(a)||r.url;return l=new lw({headers:B,status:a.status,statusText:R,url:W}),l},g=()=>{let{headers:R,status:B,statusText:W,url:q}=f(),K=null;B!==lp.NoContent&&(K=typeof a.response>"u"?a.responseText:a.response),B===0&&(B=K?lp.Ok:0);let se=B>=200&&B<300;if(r.responseType==="json"&&typeof K=="string"){let ie=K;K=K.replace(Q2,"");try{K=K!==""?JSON.parse(K):null}catch(T){K=ie,se&&(se=!1,K={error:T,text:K})}}se?(s.next(new up({body:K,headers:R,status:B,statusText:W,url:q||void 0})),s.complete()):s.error(new cp({error:K,headers:R,status:B,statusText:W,url:q||void 0}))},w=R=>{let{url:B}=f(),W=new cp({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:B||void 0});s.error(W)},E=!1,M=R=>{E||(s.next(f()),E=!0);let B={type:hu.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(B.total=R.total),r.responseType==="text"&&a.responseText&&(B.partialText=a.responseText),s.next(B)},N=R=>{let B={type:hu.UploadProgress,loaded:R.loaded};R.lengthComputable&&(B.total=R.total),s.next(B)};return a.addEventListener("load",g),a.addEventListener("error",w),a.addEventListener("timeout",w),a.addEventListener("abort",w),r.reportProgress&&(a.addEventListener("progress",M),c!==null&&a.upload&&a.upload.addEventListener("progress",N)),a.send(c),s.next({type:hu.Sent}),()=>{a.removeEventListener("error",w),a.removeEventListener("abort",w),a.removeEventListener("load",g),a.removeEventListener("timeout",w),r.reportProgress&&(a.removeEventListener("progress",M),c!==null&&a.upload&&a.upload.removeEventListener("progress",N)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(z(lu))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})(),oA=new te(""),Z2="XSRF-TOKEN",J2=new te("",{providedIn:"root",factory:()=>Z2}),X2="X-XSRF-TOKEN",eL=new te("",{providedIn:"root",factory:()=>X2}),dp=class{},tL=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=rp(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(z(xn),z(Sn),z(J2))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})();function nL(t,e){let n=t.url.toLowerCase();if(!Z(oA)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=Z(dp).getToken(),i=Z(eL);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var sA=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(sA||{});function rL(t,e){return{\u0275kind:t,\u0275providers:e}}function iL(...t){let e=[dw,nA,tA,{provide:ol,useExisting:tA},{provide:ap,useExisting:nA},{provide:hw,useValue:nL,multi:!0},{provide:oA,useValue:!0},{provide:dp,useClass:tL}];for(let n of t)e.push(...n.\u0275providers);return Xa(e)}var rA=new te("");function oL(){return rL(sA.LegacyInterceptors,[{provide:rA,useFactory:K2},{provide:hw,useExisting:rA,multi:!0}])}var aA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=fn({providers:[iL(oL())]});let t=e;return t})();var gw=class extends Xf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},mw=class t extends gw{static makeCurrent(){BT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=aL();return n==null?null:uL(n)}resetBaseElement(){al=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rp(document.cookie,e)}},al=null;function aL(){return al=al||document.querySelector("base"),al?al.getAttribute("href"):null}function uL(t){return new URL(t,document.baseURI).pathname}var cL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})(),yw=new te(""),dA=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new le(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(z(yw),z(He))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})(),hp=class{constructor(e){this._doc=e}},fw="ng-app-id",hA=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=go(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${fw}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(fw),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(fw,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(z(xn),z(Pv),z(kv,8),z(Sn))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})(),pw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ww=/%COMP%/g,fA="%COMP%",lL=`_nghost-${fA}`,dL=`_ngcontent-${fA}`,hL=!0,fL=new te("",{providedIn:"root",factory:()=>hL});function pL(t){return dL.replace(ww,t)}function gL(t){return lL.replace(ww,t)}function pA(t,e){return e.map(n=>n.replace(ww,t))}var uA=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,f=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=go(c),this.defaultRenderer=new ul(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Lr.ShadowDom&&(i=qe(ne({},i),{encapsulation:Lr.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof fp?o.applyToHost(r):o instanceof cl&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(i.encapsulation){case Lr.Emulated:s=new fp(l,f,i,this.appId,g,a,c,w);break;case Lr.ShadowDom:return new vw(l,f,r,i,a,c,this.nonce,w);default:s=new cl(l,f,i,g,a,c,w);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(z(dA),z(hA),z(Pv),z(fL),z(xn),z(Sn),z(He),z(kv))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})(),ul=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(pw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(cA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(cA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new le(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=pw[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=pw[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_i.DashCase|_i.Important)?e.style.setProperty(n,r,i&_i.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_i.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=xi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function cA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var vw=class extends ul{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=pA(i.id,i.styles);for(let f of l){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=f,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cl=class extends ul{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?pA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fp=class extends cl{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=pL(l),this.hostAttr=gL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},mL=(()=>{let e=class e extends hp{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(z(xn))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})(),lA=["alt","control","meta","shift"],yL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},wL=(()=>{let e=class e extends hp{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xi().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),lA.forEach(f=>{let g=i.indexOf(f);g>-1&&(i.splice(g,1),a+=f+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=yL[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),lA.forEach(a=>{if(a!==o){let c=vL[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(z(xn))},e.\u0275prov=re({token:e,factory:e.\u0275fac});let t=e;return t})();function gA(t,e){return NT(ne({rootComponent:t},_L(e)))}function _L(t){return{appProviders:[...CL,...t?.providers??[]],platformProviders:DL}}function EL(){mw.makeCurrent()}function bL(){return new wi}function IL(){return jC(document),document}var DL=[{provide:Sn,useValue:QT},{provide:Nv,useValue:EL,multi:!0},{provide:xn,useFactory:IL,deps:[]}];var CL=[{provide:Af,useValue:"root"},{provide:wi,useFactory:bL,deps:[]},{provide:yw,useClass:mL,multi:!0,deps:[xn,He,Sn]},{provide:yw,useClass:wL,multi:!0,deps:[xn]},uA,hA,dA,{provide:Wc,useExisting:uA},{provide:lu,useClass:cL,deps:[]},[]];var mA=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(z(xn))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _e="primary",Dl=Symbol("RouteTitle"),Dw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yu(t){return new Dw(t)}function AL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function SL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!qr(t[n],e[n]))return!1;return!0}function qr(t,e){let n=t?Cw(t):void 0,r=e?Cw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!bA(t[i],e[i]))return!1;return!0}function Cw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function bA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function IA(t){return t.length>0?t[t.length-1]:null}function wo(t){return oy(t)?t:ho(t)?Fe(Promise.resolve(t)):ce(t)}var xL={exact:CA,subset:TA},DA={exact:ML,subset:RL,ignored:()=>!0};function yA(t,e,n){return xL[n.paths](t.root,e.root,n.matrixParams)&&DA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function ML(t,e){return qr(t,e)}function CA(t,e,n){if(!ks(t.segments,e.segments)||!mp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!CA(t.children[r],e.children[r],n))return!1;return!0}function RL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>bA(t[n],e[n]))}function TA(t,e,n){return AA(t,e,e.segments,n)}function AA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ks(i,n)||e.hasChildren()||!mp(i,n,r))}else if(t.segments.length===n.length){if(!ks(t.segments,n)||!mp(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!TA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ks(t.segments,i)||!mp(t.segments,i,r)||!t.children[_e]?!1:AA(t.children[_e],e,o,r)}}function mp(t,e,n){return e.every((r,i)=>DA[n](t[i].parameters,r.parameters))}var yo=class{constructor(e=new Ue([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yu(this.queryParams),this._queryParamMap}toString(){return kL.serialize(this)}},Ue=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yp(this)}},Ns=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yu(this.parameters),this._parameterMap}toString(){return xA(this)}};function PL(t,e){return ks(t,e)&&t.every((n,r)=>qr(n.parameters,e[r].parameters))}function ks(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function NL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===_e&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==_e&&(n=n.concat(e(i,r)))}),n}var Zw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:()=>new wp,providedIn:"root"});let t=e;return t})(),wp=class{parse(e){let n=new Aw(e);return new yo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ll(e.root,!0)}`,r=VL(e.queryParams),i=typeof e.fragment=="string"?`#${OL(e.fragment)}`:"";return`${n}${r}${i}`}},kL=new wp;function yp(t){return t.segments.map(e=>xA(e)).join("/")}function ll(t,e){if(!t.hasChildren())return yp(t);if(e){let n=t.children[_e]?ll(t.children[_e],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==_e&&r.push(`${i}:${ll(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=NL(t,(r,i)=>i===_e?[ll(t.children[_e],!1)]:[`${i}:${ll(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[_e]!=null?`${yp(t)}/${n[0]}`:`${yp(t)}/(${n.join("//")})`}}function SA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pp(t){return SA(t).replace(/%3B/gi,";")}function OL(t){return encodeURI(t)}function Tw(t){return SA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vp(t){return decodeURIComponent(t)}function vA(t){return vp(t.replace(/\+/g,"%20"))}function xA(t){return`${Tw(t.path)}${FL(t.parameters)}`}function FL(t){return Object.entries(t).map(([e,n])=>`;${Tw(e)}=${Tw(n)}`).join("")}function VL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${pp(n)}=${pp(i)}`).join("&"):`${pp(n)}=${pp(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var LL=/^[^\/()?;#]+/;function _w(t){let e=t.match(LL);return e?e[0]:""}var jL=/^[^\/()?;=#]+/;function BL(t){let e=t.match(jL);return e?e[0]:""}var UL=/^[^=?&#]+/;function $L(t){let e=t.match(UL);return e?e[0]:""}var qL=/^[^&#]+/;function HL(t){let e=t.match(qL);return e?e[0]:""}var Aw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[_e]=new Ue(e,n)),r}parseSegment(){let e=_w(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new Ns(vp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=BL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_w(this.remaining);i&&(r=i,this.capture(r))}e[vp(n)]=vp(r)}parseQueryParam(e){let n=$L(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=HL(this.remaining);s&&(r=s,this.capture(r))}let i=vA(n),o=vA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_w(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new le(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_e);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[_e]:new Ue([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}};function MA(t){return t.segments.length>0?new Ue([],{[_e]:t}):t}function RA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=RA(i);if(r===_e&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ue(t.segments,e);return zL(n)}function zL(t){if(t.numberOfChildren===1&&t.children[_e]){let e=t.children[_e];return new Ue(t.segments.concat(e.segments),e.children)}return t}function vu(t){return t instanceof yo}function GL(t,e,n=null,r=null){let i=PA(t);return NA(i,e,n,r)}function PA(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Ue(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=MA(r);return e??i}function NA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ew(i,i,i,n,r);let o=WL(e);if(o.toRoot())return Ew(i,i,new Ue([],{}),n,r);let s=KL(o,i,t),a=s.processChildren?fl(s.segmentGroup,s.index,o.commands):OA(s.segmentGroup,s.index,o.commands);return Ew(i,s.segmentGroup,a,n,r)}function _p(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ml(t){return typeof t=="object"&&t!=null&&t.outlets}function Ew(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;t===e?s=n:s=kA(t,e,n);let a=MA(RA(s));return new yo(a,o,i)}function kA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=kA(o,e,n)}),new Ue(t.segments,r)}var Ep=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&_p(r[0]))throw new le(4003,!1);let i=r.find(ml);if(i&&i!==IA(r))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ep(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ep(n,e,r)}var gu=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function KL(t,e,n){if(t.isAbsolute)return new gu(e,!0,0);if(!n)return new gu(e,!1,NaN);if(n.parent===null)return new gu(n,!0,0);let r=_p(t.commands[0])?0:1,i=n.segments.length-1+r;return QL(n,i,t.numberOfDoubleDots)}function QL(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new le(4005,!1);i=r.segments.length}return new gu(r,!1,i-o)}function YL(t){return ml(t[0])?t[0].outlets:{[_e]:t}}function OA(t,e,n){if(t??=new Ue([],{}),t.segments.length===0&&t.hasChildren())return fl(t,e,n);let r=ZL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ue(t.segments.slice(0,r.pathIndex),{});return o.children[_e]=new Ue(t.segments.slice(r.pathIndex),t.children),fl(o,0,i)}else return r.match&&i.length===0?new Ue(t.segments,{}):r.match&&!t.hasChildren()?Sw(t,e,n):r.match?fl(t,0,i):Sw(t,e,n)}function fl(t,e,n){if(n.length===0)return new Ue(t.segments,{});{let r=YL(n),i={};if(Object.keys(r).some(o=>o!==_e)&&t.children[_e]&&t.numberOfChildren===1&&t.children[_e].segments.length===0){let o=fl(t.children[_e],e,n);return new Ue(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=OA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ue(t.segments,i)}}function ZL(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ml(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!_A(c,l,s))return o;r+=2}else{if(!_A(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Sw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ml(o)){let c=JL(o.outlets);return new Ue(r,c)}if(i===0&&_p(n[0])){let c=t.segments[e];r.push(new Ns(c.path,wA(n[0]))),i++;continue}let s=ml(o)?o.outlets[_e]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&_p(a)?(r.push(new Ns(s,wA(a))),i+=2):(r.push(new Ns(s,{})),i++)}return new Ue(r,{})}function JL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Sw(new Ue([],{}),0,r))}),e}function wA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function _A(t,e,n){return t==n.path&&qr(e,n.parameters)}var pl="imperative",Qt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Qt||{}),Jn=class{constructor(e,n){this.id=e,this.url=n}},yl=class extends Jn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Qt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Os=class extends Jn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Qt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ln=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ln||{}),xw=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(xw||{}),vo=class extends Jn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Qt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fs=class extends Jn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Qt.NavigationSkipped}},vl=class extends Jn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Qt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bp=class extends Jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mw=class extends Jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rw=class extends Jn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Qt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Pw=class extends Jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nw=class extends Jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Qt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kw=class{constructor(e){this.route=e,this.type=Qt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ow=class{constructor(e){this.route=e,this.type=Qt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fw=class{constructor(e){this.snapshot=e,this.type=Qt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vw=class{constructor(e){this.snapshot=e,this.type=Qt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lw=class{constructor(e){this.snapshot=e,this.type=Qt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jw=class{constructor(e){this.snapshot=e,this.type=Qt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var wl=class{},_l=class{constructor(e){this.url=e}};var Bw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Sp,this.attachRef=null}},Sp=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Bw,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ip=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Uw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Uw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=$w(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $w(e,this._root).map(n=>n.value)}};function Uw(t,e){if(t===e.value)return e;for(let n of e.children){let r=Uw(t,n);if(r)return r}return null}function $w(t,e){if(t===e.value)return[e];for(let n of e.children){let r=$w(t,n);if(r.length)return r.unshift(e),r}return[]}var Vn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function pu(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Dp=class extends Ip{constructor(e,n){super(e),this.snapshot=n,Xw(this,e)}toString(){return this.snapshot.toString()}};function FA(t){let e=XL(t),n=new Kt([new Ns("",{})]),r=new Kt({}),i=new Kt({}),o=new Kt({}),s=new Kt(""),a=new wu(n,r,o,s,i,_e,t,e.root);return a.snapshot=e.root,new Dp(new Vn(a,[]),e)}function XL(t){let e={},n={},r={},i="",o=new El([],e,r,i,n,_e,t,null,{});return new Cp("",new Vn(o,[]))}var wu=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ae(l=>l[Dl]))??ce(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>yu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>yu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jw(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:ne(ne({},e.params),t.params),data:ne(ne({},e.data),t.data),resolve:ne(ne(ne(ne({},t.data),e.data),i?.data),t._resolvedData)}:r={params:ne({},t.params),data:ne({},t.data),resolve:ne(ne({},t.data),t._resolvedData??{})},i&&LA(i)&&(r.resolve[Dl]=i.title),r}var El=class{get title(){return this.data?.[Dl]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Cp=class extends Ip{constructor(e,n){super(n),this.url=e,Xw(this,n)}toString(){return VA(this._root)}};function Xw(t,e){e.value._routerState=t,e.children.forEach(n=>Xw(t,n))}function VA(t){let e=t.children.length>0?` { ${t.children.map(VA).join(", ")} } `:"";return`${t.value}${e}`}function bw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,qr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),qr(e.params,n.params)||t.paramsSubject.next(n.params),SL(e.url,n.url)||t.urlSubject.next(n.url),qr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function qw(t,e){let n=qr(t.params,e.params)&&PL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||qw(t.parent,e.parent))}function LA(t){return typeof t.title=="string"||t.title===null}var e_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=_e,this.activateEvents=new dt,this.deactivateEvents=new dt,this.attachEvents=new dt,this.detachEvents=new dt,this.parentContexts=Z(Sp),this.location=Z(iu),this.changeDetector=Z(fo),this.environmentInjector=Z(An),this.inputBinder=Z(t_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new le(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Hw(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ht({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ds]});let t=e;return t})(),Hw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===wu?this.route:e===Sp?this.childContexts:this.parent.get(e,n)}},t_=new te("");function ej(t,e,n){let r=bl(t,e._root,n?n._root:void 0);return new Dp(r,e)}function bl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=tj(t,e,n);return new Vn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>bl(t,a)),s}}let r=nj(e.value),i=e.children.map(o=>bl(t,o));return new Vn(r,i)}}function tj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return bl(t,r,i);return bl(t,r)})}function nj(t){return new wu(new Kt(t.url),new Kt(t.params),new Kt(t.queryParams),new Kt(t.fragment),new Kt(t.data),t.outlet,t.component,t)}var jA="ngNavigationCancelingError";function BA(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=vu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UA(!1,Ln.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function UA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[jA]=!0,n.cancellationCode=e,n}function rj(t){return $A(t)&&vu(t.url)}function $A(t){return!!t&&t[jA]}var ij=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["ng-component"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(i,o){i&1&&mn(0,"router-outlet")},dependencies:[e_],encapsulation:2});let t=e;return t})();function oj(t,e){return t.providers&&!t._injector&&(t._injector=Kv(t.providers,e,`Route: ${t.path}`)),t._injector??e}function n_(t){let e=t.children&&t.children.map(n_),n=e?qe(ne({},t),{children:e}):ne({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==_e&&(n.component=ij),n}function Hr(t){return t.outlet||_e}function sj(t,e){let n=t.filter(r=>Hr(r)===e);return n.push(...t.filter(r=>Hr(r)!==e)),n}function Cl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var aj=(t,e,n,r)=>ae(i=>(new zw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),zw=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),bw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=pu(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=pu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=pu(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=pu(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Vw(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(bw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),bw(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Cl(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Tp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},mu=class{constructor(e,n){this.component=e,this.route=n}};function uj(t,e,n){let r=t._root,i=e?e._root:null;return dl(r,i,n,[r.value])}function cj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Eu(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!MD(t)?t:e.get(t):r}function dl(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=pu(e);return t.children.forEach(s=>{lj(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>gl(a,n.getContext(s),i)),i}function lj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=dj(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Tp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?dl(t,e,a?a.children:null,r,i):dl(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new mu(a.outlet.component,s))}else s&&gl(e,a,i),i.canActivateChecks.push(new Tp(r)),o.component?dl(t,null,a?a.children:null,r,i):dl(t,null,n,r,i);return i}function dj(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ks(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ks(t.url,e.url)||!qr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qw(t,e)||!qr(t.queryParams,e.queryParams);case"paramsChange":default:return!qw(t,e)}}function gl(t,e,n){let r=pu(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?gl(s,e.children.getContext(o),n):gl(s,null,n):gl(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new mu(e.outlet.component,i)):n.canDeactivateChecks.push(new mu(null,i)):n.canDeactivateChecks.push(new mu(null,i))}function Tl(t){return typeof t=="function"}function hj(t){return typeof t=="boolean"}function fj(t){return t&&Tl(t.canLoad)}function pj(t){return t&&Tl(t.canActivate)}function gj(t){return t&&Tl(t.canActivateChild)}function mj(t){return t&&Tl(t.canDeactivate)}function yj(t){return t&&Tl(t.canMatch)}function qA(t){return t instanceof mi||t?.name==="EmptyError"}var gp=Symbol("INITIAL_VALUE");function _u(){return ut(t=>$h(t.map(e=>e.pipe(yi(1),ds(gp)))).pipe(ae(e=>{for(let n of e)if(n!==!0){if(n===gp)return gp;if(n===!1||n instanceof yo)return n}return!0}),qt(e=>e!==gp),yi(1)))}function vj(t,e){return Vt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ce(qe(ne({},n),{guardsResult:!0})):wj(s,r,i,t).pipe(Vt(a=>a&&hj(a)?_j(r,o,t,e):ce(a)),ae(a=>qe(ne({},n),{guardsResult:a})))})}function wj(t,e,n,r){return Fe(t).pipe(Vt(i=>Cj(i.component,i.route,n,e,r)),Hn(i=>i!==!0,!0))}function _j(t,e,n,r){return Fe(e).pipe(eo(i=>ja(bj(i.route.parent,r),Ej(i.route,r),Dj(t,i.path,n),Ij(t,i.route,n))),Hn(i=>i!==!0,!0))}function Ej(t,e){return t!==null&&e&&e(new Lw(t)),ce(!0)}function bj(t,e){return t!==null&&e&&e(new Fw(t)),ce(!0)}function Ij(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ce(!0);let i=r.map(o=>qh(()=>{let s=Cl(e)??n,a=Eu(o,s),c=pj(a)?a.canActivate(e,t):Ii(s,()=>a(e,t));return wo(c).pipe(Hn())}));return ce(i).pipe(_u())}function Dj(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>cj(s)).filter(s=>s!==null).map(s=>qh(()=>{let a=s.guards.map(c=>{let l=Cl(s.node)??n,f=Eu(c,l),g=gj(f)?f.canActivateChild(r,t):Ii(l,()=>f(r,t));return wo(g).pipe(Hn())});return ce(a).pipe(_u())}));return ce(o).pipe(_u())}function Cj(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ce(!0);let s=o.map(a=>{let c=Cl(e)??i,l=Eu(a,c),f=mj(l)?l.canDeactivate(t,e,n,r):Ii(c,()=>l(t,e,n,r));return wo(f).pipe(Hn())});return ce(s).pipe(_u())}function Tj(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ce(!0);let o=i.map(s=>{let a=Eu(s,t),c=fj(a)?a.canLoad(e,n):Ii(t,()=>a(e,n));return wo(c)});return ce(o).pipe(_u(),HA(r))}function HA(t){return Xm(It(e=>{if(vu(e))throw BA(t,e)}),ae(e=>e===!0))}function Aj(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ce(!0);let o=i.map(s=>{let a=Eu(s,t),c=yj(a)?a.canMatch(e,n):Ii(t,()=>a(e,n));return wo(c)});return ce(o).pipe(_u(),HA(r))}var Il=class{constructor(e){this.segmentGroup=e||null}},Ap=class extends Error{constructor(e){super(),this.urlTree=e}};function fu(t){return La(new Il(t))}function Sj(t){return La(new le(4e3,!1))}function xj(t){return La(UA(!1,Ln.GuardRejected))}var Gw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ce(r);if(i.numberOfChildren>1||!i.children[_e])return Sj(e.redirectTo);i=i.children[_e]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Ap(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new yo(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ue(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new le(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ww={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mj(t,e,n,r,i){let o=r_(t,e,n);return o.matched?(r=oj(e,r),Aj(r,e,n,i).pipe(ae(s=>s===!0?o:ne({},Ww)))):ce(o)}function r_(t,e,n){if(e.path==="**")return Rj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?ne({},Ww):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||AL)(n,t,e);if(!i)return ne({},Ww);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?ne(ne({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Rj(t){return{matched:!0,parameters:t.length>0?IA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function EA(t,e,n,r){return n.length>0&&kj(t,n,r)?{segmentGroup:new Ue(e,Nj(r,new Ue(n,t.children))),slicedSegments:[]}:n.length===0&&Oj(t,n,r)?{segmentGroup:new Ue(t.segments,Pj(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ue(t.segments,t.children),slicedSegments:n}}function Pj(t,e,n,r){let i={};for(let o of n)if(xp(t,e,o)&&!r[Hr(o)]){let s=new Ue([],{});i[Hr(o)]=s}return ne(ne({},r),i)}function Nj(t,e){let n={};n[_e]=e;for(let r of t)if(r.path===""&&Hr(r)!==_e){let i=new Ue([],{});n[Hr(r)]=i}return n}function kj(t,e,n){return n.some(r=>xp(t,e,r)&&Hr(r)!==_e)}function Oj(t,e,n){return n.some(r=>xp(t,e,r))}function xp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Fj(t,e,n,r){return Hr(t)!==r&&(r===_e||!xp(e,n,t))?!1:r_(e,t,n).matched}function Vj(t,e,n){return e.length===0&&!t.children[n]}var Kw=class{};function Lj(t,e,n,r,i,o,s="emptyOnly"){return new Qw(t,e,n,r,i,s,o).recognize()}var jj=31,Qw=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Gw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new le(4002,`'${e.segmentGroup}'`)}recognize(){let e=EA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(n=>{let r=new El([],Object.freeze({}),Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,{},_e,this.rootComponentType,null,{}),i=new Vn(r,n),o=new Cp("",i),s=GL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,_e).pipe(dr(r=>{if(r instanceof Ap)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Il?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Jw(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ae(o=>o instanceof Vn?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return Fe(i).pipe(eo(o=>{let s=r.children[o],a=sj(n,o);return this.processSegmentGroup(e,a,s,o)}),ls((o,s)=>(o.push(...s),o)),to(null),ly(),Vt(o=>{if(o===null)return fu(r);let s=zA(o);return Bj(s),ce(s)}))}processSegment(e,n,r,i,o,s){return Fe(n).pipe(eo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(dr(c=>{if(c instanceof Il)return ce(null);throw c}))),Hn(a=>!!a),dr(a=>{if(qA(a))return Vj(r,i,o)?ce(new Kw):fu(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return Fj(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):fu(i):fu(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:f}=r_(n,i,o);if(!a)return fu(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jj&&(this.allowRedirects=!1));let g=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,g).pipe(Vt(w=>this.processSegment(e,r,n,w.concat(f),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=Mj(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(ut(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ut(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:f,remainingSegments:g,parameters:w}=a,E=new El(f,w,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,$j(r),Hr(r),r.component??r._loadedComponent??null,r,qj(r)),{segmentGroup:M,slicedSegments:N}=EA(n,f,g,c);if(N.length===0&&M.hasChildren())return this.processChildren(l,c,M).pipe(ae(B=>B===null?null:new Vn(E,B)));if(c.length===0&&N.length===0)return ce(new Vn(E,[]));let R=Hr(r)===o;return this.processSegment(l,c,M,N,R?_e:o,!0).pipe(ae(B=>new Vn(E,B instanceof Vn?[B]:[])))}))):fu(n)))}getChildConfig(e,n,r){return n.children?ce({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ce({routes:n._loadedRoutes,injector:n._loadedInjector}):Tj(e,n,r,this.urlSerializer).pipe(Vt(i=>i?this.configLoader.loadChildren(e,n).pipe(It(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):xj(n))):ce({routes:[],injector:e})}};function Bj(t){t.sort((e,n)=>e.value.outlet===_e?-1:n.value.outlet===_e?1:e.value.outlet.localeCompare(n.value.outlet))}function Uj(t){let e=t.value.routeConfig;return e&&e.path===""}function zA(t){let e=[],n=new Set;for(let r of t){if(!Uj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=zA(r.children);e.push(new Vn(r.value,i))}return e.filter(r=>!n.has(r))}function $j(t){return t.data||{}}function qj(t){return t.resolve||{}}function Hj(t,e,n,r,i,o){return Vt(s=>Lj(t,e,n,r,s.extractedUrl,i,o).pipe(ae(({state:a,tree:c})=>qe(ne({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function zj(t,e){return Vt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ce(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of GA(c))s.add(l);let a=0;return Fe(s).pipe(eo(c=>o.has(c)?Gj(c,r,t,e):(c.data=Jw(c,c.parent,t).resolve,ce(void 0))),It(()=>a++),Ba(1),Vt(c=>a===s.size?ce(n):ln))})}function GA(t){let e=t.children.map(n=>GA(n)).flat();return[t,...e]}function Gj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!LA(i)&&(o[Dl]=i.title),Wj(o,t,e,r).pipe(ae(s=>(t._resolvedData=s,t.data=Jw(t,t.parent,n).resolve,null)))}function Wj(t,e,n,r){let i=Cw(t);if(i.length===0)return ce({});let o={};return Fe(i).pipe(Vt(s=>Kj(t[s],e,n,r).pipe(Hn(),It(a=>{o[s]=a}))),Ba(1),uy(o),dr(s=>qA(s)?ln:La(s)))}function Kj(t,e,n,r){let i=Cl(e)??r,o=Eu(t,i),s=o.resolve?o.resolve(e,n):Ii(i,()=>o(e,n));return wo(s)}function Iw(t){return ut(e=>{let n=t(e);return n?Fe(n).pipe(ae(()=>e)):ce(e)})}var WA=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===_e);return i}getResolvedTitleForRoute(r){return r.data[Dl]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:()=>Z(Qj),providedIn:"root"});let t=e;return t})(),Qj=(()=>{let e=class e extends WA{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(z(mA))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),i_=new te("",{providedIn:"root",factory:()=>({})}),o_=new te(""),Yj=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Z(Yv)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ce(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=wo(r.loadComponent()).pipe(ae(KA),It(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),no(()=>{this.componentLoaders.delete(r)})),o=new ka(i,()=>new yt).pipe(Na());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ce({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Zj(i,this.compiler,r,this.onLoadEndListener).pipe(no(()=>{this.childrenLoaders.delete(i)})),a=new ka(s,()=>new yt).pipe(Na());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zj(t,e,n,r){return wo(t.loadChildren()).pipe(ae(KA),Vt(i=>i instanceof Qc||Array.isArray(i)?ce(i):Fe(e.compileModuleAsync(i))),ae(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(o_,[],{optional:!0,self:!0}).flat()),{routes:s.map(n_),injector:o}}))}function Jj(t){return t&&typeof t=="object"&&"default"in t}function KA(t){return Jj(t)?t.default:t}var s_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:()=>Z(Xj),providedIn:"root"});let t=e;return t})(),Xj=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eB=new te("");var tB=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yt,this.transitionAbortSubject=new yt,this.configLoader=Z(Yj),this.environmentInjector=Z(An),this.urlSerializer=Z(Zw),this.rootContexts=Z(Sp),this.location=Z(nl),this.inputBindingEnabled=Z(t_,{optional:!0})!==null,this.titleStrategy=Z(WA),this.options=Z(i_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Z(s_),this.createViewTransition=Z(eB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ce(void 0),this.rootComponentType=null;let r=o=>this.events.next(new kw(o)),i=o=>this.events.next(new Ow(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(qe(ne(ne({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Kt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pl,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qt(s=>s.id!==0),ae(s=>qe(ne({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ut(s=>{let a=!1,c=!1;return ce(s).pipe(ut(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ln.SupersededByNewNavigation),ln;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?qe(ne({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),g=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!f&&g!=="reload"){let w="";return this.events.next(new Fs(l.id,this.urlSerializer.serialize(l.rawUrl),w,xw.IgnoredSameUrlNavigation)),l.resolve(null),ln}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ce(l).pipe(ut(w=>{let E=this.transitions?.getValue();return this.events.next(new yl(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?ln:Promise.resolve(w)}),Hj(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),It(w=>{s.targetSnapshot=w.targetSnapshot,s.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=qe(ne({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let E=new bp(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:w,extractedUrl:E,source:M,restoredState:N,extras:R}=l,B=new yl(w,this.urlSerializer.serialize(E),M,N);this.events.next(B);let W=FA(this.rootComponentType).snapshot;return this.currentTransition=s=qe(ne({},l),{targetSnapshot:W,urlAfterRedirects:E,extras:qe(ne({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,ce(s)}else{let w="";return this.events.next(new Fs(l.id,this.urlSerializer.serialize(l.extractedUrl),w,xw.IgnoredByUrlHandlingStrategy)),l.resolve(null),ln}}),It(l=>{let f=new Mw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),ae(l=>(this.currentTransition=s=qe(ne({},l),{guards:uj(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),vj(this.environmentInjector,l=>this.events.next(l)),It(l=>{if(s.guardsResult=l.guardsResult,vu(l.guardsResult))throw BA(this.urlSerializer,l.guardsResult);let f=new Rw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),qt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ln.GuardRejected),!1)),Iw(l=>{if(l.guards.canActivateChecks.length)return ce(l).pipe(It(f=>{let g=new Pw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}),ut(f=>{let g=!1;return ce(f).pipe(zj(this.paramsInheritanceStrategy,this.environmentInjector),It({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(f,"",Ln.NoDataFromResolver)}}))}),It(f=>{let g=new Nw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}))}),Iw(l=>{let f=g=>{let w=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(g.routeConfig).pipe(It(E=>{g.component=E}),ae(()=>{})));for(let E of g.children)w.push(...f(E));return w};return $h(f(l.targetSnapshot.root)).pipe(to(null),yi(1))}),Iw(()=>this.afterPreactivation()),ut(()=>{let{currentSnapshot:l,targetSnapshot:f}=s,g=this.createViewTransition?.(this.environmentInjector,l.root,f.root);return g?Fe(g).pipe(ae(()=>s)):ce(s)}),ae(l=>{let f=ej(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=qe(ne({},l),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,s}),It(()=>{this.events.next(new wl)}),aj(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),yi(1),It({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Os(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),hy(this.transitionAbortSubject.pipe(It(l=>{throw l}))),no(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ln.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),dr(l=>{if(c=!0,$A(l))this.events.next(new vo(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),rj(l)?this.events.next(new _l(l.url)):s.resolve(!1);else{this.events.next(new vl(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return ln}))}))}cancelNavigationTransition(r,i,o){let s=new vo(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nB(t){return t!==pl}var rB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:()=>Z(iB),providedIn:"root"});let t=e;return t})(),Yw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},iB=(()=>{let e=class e extends Yw{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Cs(e)))(o||e)}})(),e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),QA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:()=>Z(oB),providedIn:"root"});let t=e;return t})(),oB=(()=>{let e=class e extends QA{constructor(){super(...arguments),this.location=Z(nl),this.urlSerializer=Z(Zw),this.options=Z(i_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Z(s_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof yl)this.stateMemento=this.createStateMemento();else if(r instanceof Fs)this.rawUrlTree=i.initialUrl;else if(r instanceof bp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof wl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof vo&&(r.code===Ln.GuardRejected||r.code===Ln.NoDataFromResolver)?this.restoreHistory(i):r instanceof vl?this.restoreHistory(i,!0):r instanceof Os&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=ne(ne({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=ne(ne({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Cs(e)))(o||e)}})(),e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(hl||{});function sB(t,e){t.events.pipe(qt(n=>n instanceof Os||n instanceof vo||n instanceof vl||n instanceof Fs),ae(n=>n instanceof Os||n instanceof Fs?hl.COMPLETE:(n instanceof vo?n.code===Ln.Redirect||n.code===Ln.SupersededByNewNavigation:!1)?hl.REDIRECTING:hl.FAILED),qt(n=>n!==hl.REDIRECTING),yi(1)).subscribe(()=>{e()})}function aB(t){throw t}var uB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mp=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Z($f),this.stateManager=Z(QA),this.options=Z(i_,{optional:!0})||{},this.pendingTasks=Z(Ss),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Z(tB),this.urlSerializer=Z(Zw),this.location=Z(nl),this.urlHandlingStrategy=Z(s_),this._events=new yt,this.errorHandler=this.options.errorHandler||aB,this.navigated=!1,this.routeReuseStrategy=Z(rB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Z(o_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Z(t_,{optional:!0}),this.eventsSubscription=new mt,this.isNgZoneEnabled=Z(He)instanceof He&&He.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof vo&&i.code!==Ln.Redirect&&i.code!==Ln.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Os)this.navigated=!0;else if(i instanceof _l){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||nB(o.source)};this.scheduleNavigation(a,pl,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}dB(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=ne({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(n_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,f=l?this.currentUrlTree.fragment:a,g=null;switch(c){case"merge":g=ne(ne({},this.currentUrlTree.queryParams),s);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}g!==null&&(g=this.removeEmptyProps(g));let w;try{let E=o?o.snapshot:this.routerState.snapshot.root;w=PA(E)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),w=this.currentUrlTree.root}return NA(w,r,g,f??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=vu(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,pl,null,i)}navigate(r,i={skipLocationChange:!1}){return lB(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=ne({},uB):i===!1?o=ne({},cB):o=i,vu(r))return yA(this.currentUrlTree,r,o);let s=this.parseUrl(r);return yA(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,f;a?(c=a.resolve,l=a.reject,f=a.promise):f=new Promise((w,E)=>{c=w,l=E});let g=this.pendingTasks.add();return sB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(w=>Promise.reject(w))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new le(4008,!1)}function dB(t){return!(t instanceof wl)&&!(t instanceof _l)}var hB=new te("");function YA(t,...e){return Xa([{provide:o_,multi:!0,useValue:t},[],{provide:wu,useFactory:fB,deps:[Mp]},{provide:qf,multi:!0,useFactory:pB},e.map(n=>n.\u0275providers)])}function fB(t){return t.routerState.root}function pB(){let t=Z(Ts);return e=>{let n=t.get(cu);if(e!==n.components[0])return;let r=t.get(Mp),i=t.get(gB);t.get(mB)===1&&r.initialNavigation(),t.get(yB,null,Ce.Optional)?.setUpPreloading(),t.get(hB,null,Ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var gB=new te("",{factory:()=>new yt}),mB=new te("",{providedIn:"root",factory:()=>1});var yB=new te("");function wB(t,e){if(t&1&&(Y(0,"div")(1,"h2"),ge(2),X(),mn(3,"img",1),Y(4,"p"),ge(5),X(),Y(6,"p"),ge(7),au(8,"date"),X(),Y(9,"p"),ge(10),X()()),t&2){let n=Qn();pe(2),Yn(n.pelicula.nombre),pe(),xs("alt",n.pelicula.nombre),Lt("src",n.pelicula.foto,co),pe(2),$r("Tipo: ",n.pelicula.tipo,""),pe(2),$r("Fecha de Estreno: ",uu(8,6,n.pelicula.fechaEstreno),""),pe(3),$r("Cantidad de P\xFAblico: ",n.pelicula.cantidadPublico,"")}}function _B(t,e){t&1&&(Y(0,"div")(1,"p"),ge(2,"No hay pel\xEDcula seleccionada"),X()())}var ZA=(()=>{let e=class e{constructor(){this.pelicula=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["app-detalle-pelicula"]],inputs:{pelicula:"pelicula"},standalone:!0,features:[Tt],decls:2,vars:2,consts:[[4,"ngIf"],[3,"src","alt"]],template:function(i,o){i&1&&vr(0,wB,11,8,"div",0)(1,_B,3,0,"div",0),i&2&&(Lt("ngIf",o.pelicula),pe(),Lt("ngIf",!o.pelicula))},dependencies:[ip,op]});let t=e;return t})();function EB(t,e){if(t&1){let n=su();Y(0,"div",2),et("click",function(){let i=tu(n).$implicit,o=Qn();return nu(o.seleccionarPelicula(i))}),mn(1,"img",3),Y(2,"h3"),ge(3),X(),Y(4,"p"),ge(5),X(),Y(6,"p"),ge(7),au(8,"date"),X(),Y(9,"p"),ge(10),X()()}if(t&2){let n=e.$implicit;pe(),xs("alt",n.nombre),Lt("src",n.foto,co),pe(2),Yn(n.nombre),pe(2),$r("Tipo: ",n.tipo,""),pe(2),$r("Fecha de Estreno: ",uu(8,6,n.fechaEstreno),""),pe(3),$r("Cantidad de P\xFAblico: ",n.cantidadPublico,"")}}var Rp=(()=>{let e=class e{constructor(){this.peliculas=[],this.peliculaSeleccionada=new dt}seleccionarPelicula(r){this.peliculaSeleccionada.emit(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["app-tabla-pelicula"]],inputs:{peliculas:"peliculas"},outputs:{peliculaSeleccionada:"peliculaSeleccionada"},standalone:!0,features:[Tt],decls:2,vars:1,consts:[[1,"peliculas-grid"],["class","pelicula-item",3,"click",4,"ngFor","ngForOf"],[1,"pelicula-item",3,"click"],[3,"src","alt"]],template:function(i,o){i&1&&(Y(0,"div",0),vr(1,EB,11,8,"div",1),X()),i&2&&(pe(),Lt("ngForOf",o.peliculas))},dependencies:[du,op],styles:[".peliculas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px}.pelicula-item[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px;text-align:center}.pelicula-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]});let t=e;return t})();var bB="firebase",IB="10.12.1";Xi(bB,IB,"app");var bu=new Ei("ANGULARFIRE2_VERSION");var DB=(t,e)=>{let n=e?[e]:mI(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Vs=class{constructor(){return DB(CB)}},CB="app-check";function a_(){}var Pp=class{zone;delegate;constructor(e,n=ry){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},u_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",a_,{},a_,a_)),n.pipe(It({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Np=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Pp(Zone.current)),this.insideAngular=n.run(()=>new Pp(Zone.current,Fc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(z(He))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TB(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Mn(t){return AB(TB())(t)}function AB(t){return function(n){return n=n.lift(new u_(t.ngZone)),n.pipe(lr(t.outsideAngular),qn(t.insideAngular))}}var MB=new Map,RB={activated:!1,tokenObservers:[]},PB={initialized:!1,enabled:!1};function _r(t){return MB.get(t)||Object.assign({},RB)}function rS(){return PB}var NB="https://content-firebaseappcheck.googleapis.com/v1";var kB="exchangeDebugToken",XA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},aW=24*60*60*1e3;var l_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return O(this,null,function*(){this.stop();try{this.pending=new Bm,this.pending.promise.catch(n=>{}),yield OB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Bm,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function OB(t){return new Promise(e=>{setTimeout(e,t)})}var FB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},_o=new pI("appCheck","AppCheck",FB);function iS(t){if(!_r(t).activated)throw _o.create("use-before-activation",{appName:t.name})}function oS(r,i){return O(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let E=yield s.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(E){throw _o.create("fetch-network-error",{originalErrorMessage:E?.message})}if(c.status!==200)throw _o.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(E){throw _o.create("fetch-parse-error",{originalErrorMessage:E?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw _o.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let g=Number(f[1])*1e3,w=Date.now();return{token:l.token,expireTimeMillis:w+g,issuedAtTimeMillis:w}})}function sS(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${NB}/projects/${n}/apps/${r}:${kB}?key=${i}`,body:{debug_token:e}}}var VB="firebase-app-check-database",LB=1,d_="firebase-app-check-store";var kp=null;function jB(){return kp||(kp=new Promise((t,e)=>{try{let n=indexedDB.open(VB,LB);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(_o.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(d_,{keyPath:"compositeKey"})}}}catch(n){e(_o.create("storage-open",{originalErrorMessage:n?.message}))}}),kp)}function BB(t,e){return UB($B(t),e)}function UB(t,e){return O(this,null,function*(){let r=(yield jB()).transaction(d_,"readwrite"),o=r.objectStore(d_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(_o.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function $B(t){return`${t.options.appId}-${t.name}`}var h_=new yh("@firebase/app-check");function c_(t,e){return mh()?BB(t,e).catch(n=>{h_.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function aS(){return rS().enabled}function uS(){return O(this,null,function*(){let t=rS();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var qB={error:"UNKNOWN_ERROR"};function HB(t){return dI.encodeString(JSON.stringify(t),!1)}function f_(t,e=!1){return O(this,null,function*(){let n=t.app;iS(n);let r=_r(n),i=r.token,o;if(i&&!Al(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Al(c)?i=c:yield c_(n,void 0))}if(!e&&i&&Al(i))return{token:i.token};let s=!1;if(aS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=oS(sS(n,yield uS()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield c_(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield _r(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?h_.warn(c.message):h_.error(c),o=c}let a;return i?o?Al(i)?a={token:i.token,internalError:o}:a=tS(o):(a={token:i.token},r.token=i,yield c_(n,i)):a=tS(o),s&&KB(n,a),a})}function zB(t){return O(this,null,function*(){let e=t.app;iS(e);let{provider:n}=_r(e);if(aS()){let r=yield uS(),{token:i}=yield oS(sS(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function GB(t,e,n,r){let{app:i}=t,o=_r(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Al(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),eS(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>eS(t))}function cS(t,e){let n=_r(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function eS(t){let{app:e}=t,n=_r(e),r=n.tokenRefresher;r||(r=WB(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function WB(t){let{app:e}=t;return new l_(()=>O(this,null,function*(){let n=_r(e),r;if(n.token?r=yield f_(t,!0):r=yield f_(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=_r(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},XA.RETRIAL_MIN_WAIT,XA.RETRIAL_MAX_WAIT)}function KB(t,e){let n=_r(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Al(t){return t.expireTimeMillis-Date.now()>0}function tS(t){return{token:HB(qB),error:t}}var p_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=_r(this.app);for(let n of e)cS(this.app,n.next);return Promise.resolve()}};function QB(t,e){return new p_(t,e)}function YB(t){return{getToken:e=>f_(t,e),getLimitedUseToken:()=>zB(t),addTokenListener:e=>GB(t,"INTERNAL",e),removeTokenListener:e=>cS(t.app,e)}}var ZB="@firebase/app-check",JB="0.8.4";var XB="app-check",nS="app-check-internal";function eU(){Pc(new ss(XB,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return QB(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(nS).initialize()})),Pc(new ss(nS,t=>{let e=t.getProvider("app-check").getImmediate();return YB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Xi(ZB,JB)}eU();var tU=["localhost","0.0.0.0","127.0.0.1"],wW=typeof window<"u"&&tU.includes(window.location.hostname);var nU="firebase",rU="10.12.1";Dn.registerVersion(nU,rU,"app-compat");var iU=["ngOnDestroy"],hS=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(iU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(f=>{let g=f?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,g),g})})})});var Op=class{constructor(e){return e}},Iu=new te("angularfire2.app.options"),Du=new te("angularfire2.app.name");function Sl(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=Dn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Dn.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;oU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Op(s)}var oU=(t,...e)=>{Zv()&&typeof console<"u"&&console[t](...e)},sU={provide:Op,useFactory:Sl,deps:[Iu,He,[new Jc,Du]]},fS=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Iu,useValue:n},{provide:Du,useValue:r}]}}constructor(n){Dn.registerVersion("angularfire",bu.full,"core"),Dn.registerVersion("angularfire",bu.full,"app-compat"),Dn.registerVersion("angular",ST.full,n.toString())}static \u0275fac=function(r){return new(r||t)(z(Sn))};static \u0275mod=pn({type:t});static \u0275inj=fn({providers:[sU]})}return t})();function Fp(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return aU(i,s)||(dS("error",`${e} was already initialized on the ${n} Firebase App with different settings.${uU?" You may need to reload as Firebase is not HMR aware.":""}`),dS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function aU(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var uU=typeof module<"u"&&!!module.hot,dS=(t,...e)=>{Zv()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var g_=new te("angularfire2.auth.use-emulator"),m_=new te("angularfire2.auth.settings"),y_=new te("angularfire2.auth.tenant-id"),v_=new te("angularfire2.auth.langugage-code"),w_=new te("angularfire2.auth.use-device-language"),__=new te("angularfire.auth.persistence"),E_=(t,e,n,r,i,o,s,a)=>Fp(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,f]of Object.entries(s))c.settings[l]=f;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),pS=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,f,g,w,E){let M=new yt,N=ce(void 0).pipe(qn(s.outsideAngular),ut(()=>o.runOutsideAngular(()=>import("./chunk-MLL3PCVA.js"))),ae(()=>Sl(n,o,r)),ae(R=>E_(R,o,a,l,f,g,c,w)),zh({bufferSize:1,refCount:!1}));if(go(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ce(null);else{N.pipe(Hn()).subscribe();let R=N.pipe(ut(q=>q.getRedirectResult().then(K=>K,()=>null)),Mn,zh({bufferSize:1,refCount:!1})),B=N.pipe(ut(q=>new we(K=>({unsubscribe:o.runOutsideAngular(()=>q.onAuthStateChanged(se=>K.next(se),se=>K.error(se),()=>K.complete()))})))),W=N.pipe(ut(q=>new we(K=>({unsubscribe:o.runOutsideAngular(()=>q.onIdTokenChanged(se=>K.next(se),se=>K.error(se),()=>K.complete()))}))));this.authState=R.pipe(Gh(B),lr(s.outsideAngular),qn(s.insideAngular)),this.user=R.pipe(Gh(W),lr(s.outsideAngular),qn(s.insideAngular)),this.idToken=this.user.pipe(ut(q=>q?Fe(q.getIdToken()):ce(null))),this.idTokenResult=this.user.pipe(ut(q=>q?Fe(q.getIdTokenResult()):ce(null))),this.credential=ay(R,M,this.authState.pipe(qt(q=>!q))).pipe(ae(q=>q?.user?q:null),lr(s.outsideAngular),qn(s.insideAngular))}return hS(this,N,o,{spy:{apply:(R,B,W)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&W.then(q=>M.next(q))}}})}static \u0275fac=function(r){return new(r||t)(z(Iu),z(Du,8),z(Sn),z(He),z(Np),z(g_,8),z(m_,8),z(y_,8),z(v_,8),z(w_,8),z(__,8),z(Vs,8))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var gS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mS={};var Eo,b_;(function(){var t;function e(T,b){function C(){}C.prototype=b.prototype,T.D=b.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(A,S,P){for(var D=Array(arguments.length-2),rr=2;rr<arguments.length;rr++)D[rr-2]=arguments[rr];return b.prototype[S].apply(A,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,b,C){C||(C=0);var A=Array(16);if(typeof b=="string")for(var S=0;16>S;++S)A[S]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(S=0;16>S;++S)A[S]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=T.g[0],C=T.g[1],S=T.g[2];var P=T.g[3],D=b+(P^C&(S^P))+A[0]+3614090360&4294967295;b=C+(D<<7&4294967295|D>>>25),D=P+(S^b&(C^S))+A[1]+3905402710&4294967295,P=b+(D<<12&4294967295|D>>>20),D=S+(C^P&(b^C))+A[2]+606105819&4294967295,S=P+(D<<17&4294967295|D>>>15),D=C+(b^S&(P^b))+A[3]+3250441966&4294967295,C=S+(D<<22&4294967295|D>>>10),D=b+(P^C&(S^P))+A[4]+4118548399&4294967295,b=C+(D<<7&4294967295|D>>>25),D=P+(S^b&(C^S))+A[5]+1200080426&4294967295,P=b+(D<<12&4294967295|D>>>20),D=S+(C^P&(b^C))+A[6]+2821735955&4294967295,S=P+(D<<17&4294967295|D>>>15),D=C+(b^S&(P^b))+A[7]+4249261313&4294967295,C=S+(D<<22&4294967295|D>>>10),D=b+(P^C&(S^P))+A[8]+1770035416&4294967295,b=C+(D<<7&4294967295|D>>>25),D=P+(S^b&(C^S))+A[9]+2336552879&4294967295,P=b+(D<<12&4294967295|D>>>20),D=S+(C^P&(b^C))+A[10]+4294925233&4294967295,S=P+(D<<17&4294967295|D>>>15),D=C+(b^S&(P^b))+A[11]+2304563134&4294967295,C=S+(D<<22&4294967295|D>>>10),D=b+(P^C&(S^P))+A[12]+1804603682&4294967295,b=C+(D<<7&4294967295|D>>>25),D=P+(S^b&(C^S))+A[13]+4254626195&4294967295,P=b+(D<<12&4294967295|D>>>20),D=S+(C^P&(b^C))+A[14]+2792965006&4294967295,S=P+(D<<17&4294967295|D>>>15),D=C+(b^S&(P^b))+A[15]+1236535329&4294967295,C=S+(D<<22&4294967295|D>>>10),D=b+(S^P&(C^S))+A[1]+4129170786&4294967295,b=C+(D<<5&4294967295|D>>>27),D=P+(C^S&(b^C))+A[6]+3225465664&4294967295,P=b+(D<<9&4294967295|D>>>23),D=S+(b^C&(P^b))+A[11]+643717713&4294967295,S=P+(D<<14&4294967295|D>>>18),D=C+(P^b&(S^P))+A[0]+3921069994&4294967295,C=S+(D<<20&4294967295|D>>>12),D=b+(S^P&(C^S))+A[5]+3593408605&4294967295,b=C+(D<<5&4294967295|D>>>27),D=P+(C^S&(b^C))+A[10]+38016083&4294967295,P=b+(D<<9&4294967295|D>>>23),D=S+(b^C&(P^b))+A[15]+3634488961&4294967295,S=P+(D<<14&4294967295|D>>>18),D=C+(P^b&(S^P))+A[4]+3889429448&4294967295,C=S+(D<<20&4294967295|D>>>12),D=b+(S^P&(C^S))+A[9]+568446438&4294967295,b=C+(D<<5&4294967295|D>>>27),D=P+(C^S&(b^C))+A[14]+3275163606&4294967295,P=b+(D<<9&4294967295|D>>>23),D=S+(b^C&(P^b))+A[3]+4107603335&4294967295,S=P+(D<<14&4294967295|D>>>18),D=C+(P^b&(S^P))+A[8]+1163531501&4294967295,C=S+(D<<20&4294967295|D>>>12),D=b+(S^P&(C^S))+A[13]+2850285829&4294967295,b=C+(D<<5&4294967295|D>>>27),D=P+(C^S&(b^C))+A[2]+4243563512&4294967295,P=b+(D<<9&4294967295|D>>>23),D=S+(b^C&(P^b))+A[7]+1735328473&4294967295,S=P+(D<<14&4294967295|D>>>18),D=C+(P^b&(S^P))+A[12]+2368359562&4294967295,C=S+(D<<20&4294967295|D>>>12),D=b+(C^S^P)+A[5]+4294588738&4294967295,b=C+(D<<4&4294967295|D>>>28),D=P+(b^C^S)+A[8]+2272392833&4294967295,P=b+(D<<11&4294967295|D>>>21),D=S+(P^b^C)+A[11]+1839030562&4294967295,S=P+(D<<16&4294967295|D>>>16),D=C+(S^P^b)+A[14]+4259657740&4294967295,C=S+(D<<23&4294967295|D>>>9),D=b+(C^S^P)+A[1]+2763975236&4294967295,b=C+(D<<4&4294967295|D>>>28),D=P+(b^C^S)+A[4]+1272893353&4294967295,P=b+(D<<11&4294967295|D>>>21),D=S+(P^b^C)+A[7]+4139469664&4294967295,S=P+(D<<16&4294967295|D>>>16),D=C+(S^P^b)+A[10]+3200236656&4294967295,C=S+(D<<23&4294967295|D>>>9),D=b+(C^S^P)+A[13]+681279174&4294967295,b=C+(D<<4&4294967295|D>>>28),D=P+(b^C^S)+A[0]+3936430074&4294967295,P=b+(D<<11&4294967295|D>>>21),D=S+(P^b^C)+A[3]+3572445317&4294967295,S=P+(D<<16&4294967295|D>>>16),D=C+(S^P^b)+A[6]+76029189&4294967295,C=S+(D<<23&4294967295|D>>>9),D=b+(C^S^P)+A[9]+3654602809&4294967295,b=C+(D<<4&4294967295|D>>>28),D=P+(b^C^S)+A[12]+3873151461&4294967295,P=b+(D<<11&4294967295|D>>>21),D=S+(P^b^C)+A[15]+530742520&4294967295,S=P+(D<<16&4294967295|D>>>16),D=C+(S^P^b)+A[2]+3299628645&4294967295,C=S+(D<<23&4294967295|D>>>9),D=b+(S^(C|~P))+A[0]+4096336452&4294967295,b=C+(D<<6&4294967295|D>>>26),D=P+(C^(b|~S))+A[7]+1126891415&4294967295,P=b+(D<<10&4294967295|D>>>22),D=S+(b^(P|~C))+A[14]+2878612391&4294967295,S=P+(D<<15&4294967295|D>>>17),D=C+(P^(S|~b))+A[5]+4237533241&4294967295,C=S+(D<<21&4294967295|D>>>11),D=b+(S^(C|~P))+A[12]+1700485571&4294967295,b=C+(D<<6&4294967295|D>>>26),D=P+(C^(b|~S))+A[3]+2399980690&4294967295,P=b+(D<<10&4294967295|D>>>22),D=S+(b^(P|~C))+A[10]+4293915773&4294967295,S=P+(D<<15&4294967295|D>>>17),D=C+(P^(S|~b))+A[1]+2240044497&4294967295,C=S+(D<<21&4294967295|D>>>11),D=b+(S^(C|~P))+A[8]+1873313359&4294967295,b=C+(D<<6&4294967295|D>>>26),D=P+(C^(b|~S))+A[15]+4264355552&4294967295,P=b+(D<<10&4294967295|D>>>22),D=S+(b^(P|~C))+A[6]+2734768916&4294967295,S=P+(D<<15&4294967295|D>>>17),D=C+(P^(S|~b))+A[13]+1309151649&4294967295,C=S+(D<<21&4294967295|D>>>11),D=b+(S^(C|~P))+A[4]+4149444226&4294967295,b=C+(D<<6&4294967295|D>>>26),D=P+(C^(b|~S))+A[11]+3174756917&4294967295,P=b+(D<<10&4294967295|D>>>22),D=S+(b^(P|~C))+A[2]+718787259&4294967295,S=P+(D<<15&4294967295|D>>>17),D=C+(P^(S|~b))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(S+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var C=b-this.blockSize,A=this.B,S=this.h,P=0;P<b;){if(S==0)for(;P<=C;)i(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<b;)if(A[S++]=T.charCodeAt(P++),S==this.blockSize){i(this,A),S=0;break}}else for(;P<b;)if(A[S++]=T[P++],S==this.blockSize){i(this,A),S=0;break}}this.h=S,this.o+=b},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var C=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=C&255,C/=256;for(this.u(T),T=Array(16),b=C=0;4>b;++b)for(var A=0;32>A;A+=8)T[C++]=this.g[b]>>>A&255;return T};function o(T,b){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=b(T)}function s(T,b){this.h=b;for(var C=[],A=!0,S=T.length-1;0<=S;S--){var P=T[S]|0;A&&P==b||(C[S]=P,A=!1)}this.g=C}var a={};function c(T){return-128<=T&&128>T?o(T,function(b){return new s([b|0],0>b?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return R(l(-T));for(var b=[],C=1,A=0;T>=C;A++)b[A]=T/C|0,C*=4294967296;return new s(b,0)}function f(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return R(f(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(b,8)),A=g,S=0;S<T.length;S+=8){var P=Math.min(8,T.length-S),D=parseInt(T.substring(S,S+P),b);8>P?(P=l(Math.pow(b,P)),A=A.j(P).add(l(D))):(A=A.j(C),A=A.add(l(D)))}return A}var g=c(0),w=c(1),E=c(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,b=1,C=0;C<this.g.length;C++){var A=this.i(C);T+=(0<=A?A:4294967296+A)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(M(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var b=l(Math.pow(T,6)),C=this,A="";;){var S=K(C,b).g;C=B(C,S.j(b));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=S,M(C))return P+A;for(;6>P.length;)P="0"+P;A=P+A}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function M(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=B(this,T),N(T)?-1:M(T)?0:1};function R(T){for(var b=T.g.length,C=[],A=0;A<b;A++)C[A]=~T.g[A];return new s(C,~T.h).add(w)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var b=Math.max(this.g.length,T.g.length),C=[],A=0,S=0;S<=b;S++){var P=A+(this.i(S)&65535)+(T.i(S)&65535),D=(P>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);A=D>>>16,P&=65535,D&=65535,C[S]=D<<16|P}return new s(C,C[C.length-1]&-2147483648?-1:0)};function B(T,b){return T.add(R(b))}t.j=function(T){if(M(this)||M(T))return g;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(E)&&0>T.l(E))return l(this.m()*T.m());for(var b=this.g.length+T.g.length,C=[],A=0;A<2*b;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var S=0;S<T.g.length;S++){var P=this.i(A)>>>16,D=this.i(A)&65535,rr=T.i(S)>>>16,$o=T.i(S)&65535;C[2*A+2*S]+=D*$o,W(C,2*A+2*S),C[2*A+2*S+1]+=P*$o,W(C,2*A+2*S+1),C[2*A+2*S+1]+=D*rr,W(C,2*A+2*S+1),C[2*A+2*S+2]+=P*rr,W(C,2*A+2*S+2)}for(A=0;A<b;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=b;A<2*b;A++)C[A]=0;return new s(C,0)};function W(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function q(T,b){this.g=T,this.h=b}function K(T,b){if(M(b))throw Error("division by zero");if(M(T))return new q(g,g);if(N(T))return b=K(R(T),b),new q(R(b.g),R(b.h));if(N(b))return b=K(T,R(b)),new q(R(b.g),b.h);if(30<T.g.length){if(N(T)||N(b))throw Error("slowDivide_ only works with positive integers.");for(var C=w,A=b;0>=A.l(T);)C=se(C),A=se(A);var S=ie(C,1),P=ie(A,1);for(A=ie(A,2),C=ie(C,2);!M(A);){var D=P.add(A);0>=D.l(T)&&(S=S.add(C),P=D),A=ie(A,1),C=ie(C,1)}return b=B(T,S.j(b)),new q(S,b)}for(S=g;0<=T.l(b);){for(C=Math.max(1,Math.floor(T.m()/b.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),P=l(C),D=P.j(b);N(D)||0<D.l(T);)C-=A,P=l(C),D=P.j(b);M(P)&&(P=w),S=S.add(P),T=B(T,D)}return new q(S,T)}t.A=function(T){return K(this,T).h},t.and=function(T){for(var b=Math.max(this.g.length,T.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)&T.i(A);return new s(C,this.h&T.h)},t.or=function(T){for(var b=Math.max(this.g.length,T.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)|T.i(A);return new s(C,this.h|T.h)},t.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),C=[],A=0;A<b;A++)C[A]=this.i(A)^T.i(A);return new s(C,this.h^T.h)};function se(T){for(var b=T.g.length+1,C=[],A=0;A<b;A++)C[A]=T.i(A)<<1|T.i(A-1)>>>31;return new s(C,T.h)}function ie(T,b){var C=b>>5;b%=32;for(var A=T.g.length-C,S=[],P=0;P<A;P++)S[P]=0<b?T.i(P+C)>>>b|T.i(P+C+1)<<32-b:T.i(P+C);return new s(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,b_=mS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Eo=mS.Integer=s}).apply(typeof gS<"u"?gS:typeof self<"u"?self:typeof window<"u"?window:{});var Vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mi={};var I_,D_,Cu,C_,xl,Lp,T_,A_,S_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,m){return u==Array.prototype||u==Object.prototype||(u[p]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vp=="object"&&Vp];for(var p=0;p<u.length;++p){var m=u[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var m=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var x=u[_];if(!(x in m))break e;m=m[x]}u=u[u.length-1],_=m[u],p=p(_),p!=_&&p!=null&&e(m,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var m=0,_=!1,x={next:function(){if(!_&&m<u.length){var F=m++;return{value:p(F,u[F]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(u){return u||function(){return o(this,function(p,m){return m})}});var s=s||{},a=this||self;function c(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function f(u,p,m){return u.call.apply(u.bind,arguments)}function g(u,p,m){if(!u)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,_),u.apply(p,x)}}return function(){return u.apply(p,arguments)}}function w(u,p,m){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,w.apply(null,arguments)}function E(u,p){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function M(u,p){function m(){}m.prototype=p.prototype,u.aa=p.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(_,x,F){for(var H=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)H[Be-2]=arguments[Be];return p.prototype[x].apply(_,H)}}function N(u){let p=u.length;if(0<p){let m=Array(p);for(let _=0;_<p;_++)m[_]=u[_];return m}return[]}function R(u,p){for(let m=1;m<arguments.length;m++){let _=arguments[m];if(c(_)){let x=u.length||0,F=_.length||0;u.length=x+F;for(let H=0;H<F;H++)u[x+H]=_[H]}else u.push(_)}}class B{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function W(u){return/^[\s\xa0]*$/.test(u)}function q(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function K(u){return K[" "](u),u}K[" "]=function(){};var se=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function ie(u,p,m){for(let _ in u)p.call(m,u[_],_,u)}function T(u,p){for(let m in u)p.call(void 0,u[m],m,u)}function b(u){let p={};for(let m in u)p[m]=u[m];return p}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let m,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(m in _)u[m]=_[m];for(let F=0;F<C.length;F++)m=C[F],Object.prototype.hasOwnProperty.call(_,m)&&(u[m]=_[m])}}function S(u){var p=1;u=u.split(":");let m=[];for(;0<p&&u.length;)m.push(u.shift()),p--;return u.length&&m.push(u.join(":")),m}function P(u){a.setTimeout(()=>{throw u},0)}function D(){var u=la;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class rr{constructor(){this.h=this.g=null}add(p,m){let _=$o.get();_.set(p,m),this.h?this.h.next=_:this.g=_,this.h=_}}var $o=new B(()=>new ve,u=>u.reset());class ve{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let qo,Ho=!1,la=new rr,Dd=()=>{let u=a.Promise.resolve(void 0);qo=()=>{u.then(L)}};var L=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(m){P(m)}var p=$o;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}Ho=!1};function Cr(){this.s=this.s,this.C=this.C}Cr.prototype.s=!1,Cr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Cr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var Cd=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return u}();function ii(u,p){if(pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(se){e:{try{K(p.nodeName);var x=!0;break e}catch{}x=!1}x||(p=null)}}else m=="mouseover"?p=u.fromElement:m=="mouseout"&&(p=u.toElement);this.relatedTarget=p,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Zt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ii.aa.h.call(this)}}M(ii,pt);var Zt={2:"touch",3:"pen",4:"mouse"};ii.prototype.h=function(){ii.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Pn="closure_listenable_"+(1e6*Math.random()|0),Td=0;function bm(u,p,m,_,x){this.listener=u,this.proxy=null,this.src=p,this.type=m,this.capture=!!_,this.ha=x,this.key=++Td,this.da=this.fa=!1}function da(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function oi(u){this.src=u,this.g={},this.h=0}oi.prototype.add=function(u,p,m,_,x){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var H=si(u,p,_,x);return-1<H?(p=u[H],m||(p.fa=!1)):(p=new bm(p,this.src,F,!!_,x),p.fa=m,u.push(p)),p};function zo(u,p){var m=p.type;if(m in u.g){var _=u.g[m],x=Array.prototype.indexOf.call(_,p,void 0),F;(F=0<=x)&&Array.prototype.splice.call(_,x,1),F&&(da(p),u.g[m].length==0&&(delete u.g[m],u.h--))}}function si(u,p,m,_){for(var x=0;x<u.length;++x){var F=u[x];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==_)return x}return-1}var Go="closure_lm_"+(1e6*Math.random()|0),$t={};function Ui(u,p,m,_,x){if(_&&_.once)return $i(u,p,m,_,x);if(Array.isArray(p)){for(var F=0;F<p.length;F++)Ui(u,p[F],m,_,x);return null}return m=En(m),u&&u[Pn]?u.K(p,m,l(_)?!!_.capture:!!_,x):Jt(u,p,m,!1,_,x)}function Jt(u,p,m,_,x,F){if(!p)throw Error("Invalid event type");var H=l(x)?!!x.capture:!!x,Be=Wo(u);if(Be||(u[Go]=Be=new oi(u)),m=Be.add(p,m,_,H,F),m.proxy)return m;if(_=Ve(),m.proxy=_,_.src=u,_.listener=m,u.addEventListener)Cd||(x=H),x===void 0&&(x=!1),u.addEventListener(p.toString(),_,x);else if(u.attachEvent)u.attachEvent(fa(p.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Ve(){function u(m){return p.call(u.src,u.listener,m)}let p=Sd;return u}function $i(u,p,m,_,x){if(Array.isArray(p)){for(var F=0;F<p.length;F++)$i(u,p[F],m,_,x);return null}return m=En(m),u&&u[Pn]?u.L(p,m,l(_)?!!_.capture:!!_,x):Jt(u,p,m,!0,_,x)}function Ad(u,p,m,_,x){if(Array.isArray(p))for(var F=0;F<p.length;F++)Ad(u,p[F],m,_,x);else _=l(_)?!!_.capture:!!_,m=En(m),u&&u[Pn]?(u=u.i,p=String(p).toString(),p in u.g&&(F=u.g[p],m=si(F,m,_,x),-1<m&&(da(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete u.g[p],u.h--)))):u&&(u=Wo(u))&&(p=u.g[p.toString()],u=-1,p&&(u=si(p,m,_,x)),(m=-1<u?p[u]:null)&&ha(m))}function ha(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Pn])zo(p.i,u);else{var m=u.type,_=u.proxy;p.removeEventListener?p.removeEventListener(m,_,u.capture):p.detachEvent?p.detachEvent(fa(m),_):p.addListener&&p.removeListener&&p.removeListener(_),(m=Wo(p))?(zo(m,u),m.h==0&&(m.src=null,p[Go]=null)):da(u)}}}function fa(u){return u in $t?$t[u]:$t[u]="on"+u}function Sd(u,p){if(u.da)u=!0;else{p=new ii(p,this);var m=u.listener,_=u.ha||u.src;u.fa&&ha(u),u=m.call(_,p)}return u}function Wo(u){return u=u[Go],u instanceof oi?u:null}var qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(u){return typeof u=="function"?u:(u[qi]||(u[qi]=function(p){return u.handleEvent(p)}),u[qi])}function ot(){Cr.call(this),this.i=new oi(this),this.M=this,this.F=null}M(ot,Cr),ot.prototype[Pn]=!0,ot.prototype.removeEventListener=function(u,p,m,_){Ad(this,u,p,m,_)};function st(u,p){var m,_=u.F;if(_)for(m=[];_;_=_.F)m.push(_);if(u=u.M,_=p.type||p,typeof p=="string")p=new pt(p,u);else if(p instanceof pt)p.target=p.target||u;else{var x=p;p=new pt(_,u),A(p,x)}if(x=!0,m)for(var F=m.length-1;0<=F;F--){var H=p.g=m[F];x=pa(H,_,!0,p)&&x}if(H=p.g=u,x=pa(H,_,!0,p)&&x,x=pa(H,_,!1,p)&&x,m)for(F=0;F<m.length;F++)H=p.g=m[F],x=pa(H,_,!1,p)&&x}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var m=u.g[p],_=0;_<m.length;_++)da(m[_]);delete u.g[p],u.h--}}this.F=null},ot.prototype.K=function(u,p,m,_){return this.i.add(String(u),p,!1,m,_)},ot.prototype.L=function(u,p,m,_){return this.i.add(String(u),p,!0,m,_)};function pa(u,p,m,_){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var x=!0,F=0;F<p.length;++F){var H=p[F];if(H&&!H.da&&H.capture==m){var Be=H.listener,kt=H.ha||H.src;H.fa&&zo(u.i,H),x=Be.call(kt,_)!==!1&&x}}return x&&!_.defaultPrevented}function ai(u,p,m){if(typeof u=="function")m&&(u=w(u,m));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Hi(u){u.g=ai(()=>{u.g=null,u.i&&(u.i=!1,Hi(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class xd extends Cr{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Hi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(u){Cr.call(this),this.h=u,this.g={}}M(Tr,Cr);var ga=[];function Md(u){ie(u.g,function(p,m){this.g.hasOwnProperty(m)&&ha(p)},u),u.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),Md(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ko=a.JSON.stringify,gc=a.JSON.parse,ma=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function mc(){}mc.prototype.h=null;function Xt(u){return u.h||(u.h=u.i())}function Un(){}var Qo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function en(){pt.call(this,"d")}M(en,pt);function zi(){pt.call(this,"c")}M(zi,pt);var Ar={},yc=null;function Ie(){return yc=yc||new ot}Ar.La="serverreachability";function Nn(u){pt.call(this,Ar.La,u)}M(Nn,pt);function bn(u){let p=Ie();st(p,new Nn(p))}Ar.STAT_EVENT="statevent";function Sr(u,p){pt.call(this,Ar.STAT_EVENT,u),this.stat=p}M(Sr,pt);function Re(u){let p=Ie();st(p,new Sr(p,u))}Ar.Ma="timingevent";function Nt(u,p){pt.call(this,Ar.Ma,u),this.size=p}M(Nt,pt);function ui(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Gi(){this.g=!0}Gi.prototype.xa=function(){this.g=!1};function Yo(u,p,m,_,x,F){u.info(function(){if(u.g)if(F)for(var H="",Be=F.split("&"),kt=0;kt<Be.length;kt++){var Se=Be[kt].split("=");if(1<Se.length){var Ot=Se[0];Se=Se[1];var Ft=Ot.split("_");H=2<=Ft.length&&Ft[1]=="type"?H+(Ot+"="+Se+"&"):H+(Ot+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+p+`
`+m+`
`+H})}function sn(u,p,m,_,x,F,H){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+p+`
`+m+`
`+F+" "+H})}function Wi(u,p,m,_){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Pd(u,m)+(_?" "+_:"")})}function Rd(u,p){u.info(function(){return"TIMEOUT: "+p})}Gi.prototype.info=function(){};function Pd(u,p){if(!u.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var _=m[u];if(!(2>_.length)){var x=_[1];if(Array.isArray(x)&&!(1>x.length)){var F=x[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<x.length;H++)x[H]=""}}}}return Ko(m)}catch{return p}}var Ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ya;function va(){}M(va,mc),va.prototype.g=function(){return new XMLHttpRequest},va.prototype.i=function(){return{}},ya=new va;function xr(u,p,m,_){this.j=u,this.i=p,this.l=m,this.R=_||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mr}function Mr(){this.i=null,this.g="",this.h=!1}var kd={},vc={};function wc(u,p,m){u.L=1,u.v=_a(an(p)),u.m=m,u.P=!0,Od(u,null)}function Od(u,p){u.F=Date.now(),wa(u),u.A=an(u.v);var m=u.A,_=u.R;Array.isArray(_)||(_=[String(_)]),Qd(m.i,"t",_),u.C=0,m=u.j.J,u.h=new Mr,u.g=uh(u.j,m?p:null,!u.m),0<u.O&&(u.M=new xd(w(u.Y,u,u.g),u.O)),p=u.U,m=u.g,_=u.ca;var x="readystatechange";Array.isArray(x)||(x&&(ga[0]=x.toString()),x=ga);for(var F=0;F<x.length;F++){var H=Ui(m,x[F],_||p.handleEvent,!1,p.h||p);if(!H)break;p.g[H.key]=H}p=u.H?b(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),bn(),Yo(u.i,u.u,u.A,u.l,u.R,u.m)}xr.prototype.ca=function(u){u=u.target;let p=this.M;p&&ar(u)==3?p.j():this.Y(u)},xr.prototype.Y=function(u){try{if(u==this.g)e:{let Ft=ar(this.g);var p=this.g.Ba();let Pr=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||th(this.g)))){this.J||Ft!=4||p==7||(p==8||0>=Pr?bn(3):bn(2)),ir(this);var m=this.g.Z();this.X=m;t:if(Fd(this)){var _=th(this.g);u="";var x=_.length,F=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),Zo(this);var H="";break t}this.h.i=new a.TextDecoder}for(p=0;p<x;p++)this.h.h=!0,u+=this.h.i.decode(_[p],{stream:!(F&&p==x-1)});_.length=0,this.h.g+=u,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=m==200,sn(this.i,this.u,this.A,this.l,this.R,Ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,kt=this.g;if((Be=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Be)){var Se=Be;break t}}Se=null}if(m=Se)Wi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ec(this,m);else{this.o=!1,this.s=3,Re(12),ci(this),Zo(this);break e}}if(this.P){m=!0;let tn;for(;!this.J&&this.C<H.length;)if(tn=_c(this,H),tn==vc){Ft==4&&(this.s=4,Re(14),m=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==kd){this.s=4,Re(15),Wi(this.i,this.l,H,"[Invalid Chunk]"),m=!1;break}else Wi(this.i,this.l,tn,null),Ec(this,tn);if(Fd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||H.length!=0||this.h.h||(this.s=1,Re(16),m=!1),this.o=this.o&&m,!m)Wi(this.i,this.l,H,"[Invalid Chunked Response]"),ci(this),Zo(this);else if(0<H.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),pi(Ot),Ot.M=!0,Re(11))}}else Wi(this.i,this.l,H,null),Ec(this,H);Ft==4&&ci(this),this.o&&!this.J&&(Ft==4?oh(this.j,this):(this.o=!1,wa(this)))}else Om(this.g),m==400&&0<H.indexOf("Unknown SID")?(this.s=3,Re(12)):(this.s=0,Re(13)),ci(this),Zo(this)}}}catch{}finally{}};function Fd(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function _c(u,p){var m=u.C,_=p.indexOf(`
`,m);return _==-1?vc:(m=Number(p.substring(m,_)),isNaN(m)?kd:(_+=1,_+m>p.length?vc:(p=p.slice(_,_+m),u.C=_+m,p)))}xr.prototype.cancel=function(){this.J=!0,ci(this)};function wa(u){u.S=Date.now()+u.I,Vd(u,u.I)}function Vd(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ui(w(u.ba,u),p)}function ir(u){u.B&&(a.clearTimeout(u.B),u.B=null)}xr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Rd(this.i,this.A),this.L!=2&&(bn(),Re(17)),ci(this),this.s=2,Zo(this)):Vd(this,this.S-u)};function Zo(u){u.j.G==0||u.J||oh(u.j,u)}function ci(u){ir(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Md(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Ec(u,p){try{var m=u.j;if(m.G!=0&&(m.g==u||Ic(m.h,u))){if(!u.K&&Ic(m.h,u)&&m.G==3){try{var _=m.Da.g.parse(p)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Da(m),Ea(m);else break e;Ia(m),Re(18)}}else m.za=x[1],0<m.za-m.T&&37500>x[2]&&m.F&&m.v==0&&!m.C&&(m.C=ui(w(m.Za,m),6e3));if(1>=Bd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else In(m,11)}else if((u.K||m.g==u)&&Da(m),!W(p))for(x=m.Da.g.parse(p),p=0;p<x.length;p++){let Se=x[p];if(m.T=Se[0],Se=Se[1],m.G==2)if(Se[0]=="c"){m.K=Se[1],m.ia=Se[2];let Ot=Se[3];Ot!=null&&(m.la=Ot,m.j.info("VER="+m.la));let Ft=Se[4];Ft!=null&&(m.Aa=Ft,m.j.info("SVER="+m.Aa));let Pr=Se[5];Pr!=null&&typeof Pr=="number"&&0<Pr&&(_=1.5*Pr,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;let tn=u.g;if(tn){let Ta=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var F=_.h;F.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Dc(F,F.h),F.h=null))}if(_.D){let Aa=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(_.ya=Aa,We(_.I,_.D,Aa))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var H=u;if(_.qa=ah(_,_.J?_.ia:null,_.W),H.K){$e(_.h,H);var Be=H,kt=_.L;kt&&(Be.I=kt),Be.B&&(ir(Be),wa(Be)),_.g=H}else rh(_);0<m.i.length&&ba(m)}else Se[0]!="stop"&&Se[0]!="close"||In(m,7);else m.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?In(m,7):Ac(m):Se[0]!="noop"&&m.l&&m.l.ta(Se),m.v=0)}}bn(4)}catch{}}var bc=class{constructor(u,p){this.g=u,this.map=p}};function Ld(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jd(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bd(u){return u.h?1:u.g?u.g.size:0}function Ic(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Dc(u,p){u.g?u.g.add(p):u.h=p}function $e(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ld.prototype.cancel=function(){if(this.i=Ud(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Ud(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let m of u.g.values())p=p.concat(m.D);return p}return N(u.i)}function Im(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var p=[],m=u.length,_=0;_<m;_++)p.push(u[_]);return p}p=[],m=0;for(_ in u)p[m++]=u[_];return p}function Dm(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var p=[];u=u.length;for(var m=0;m<u;m++)p.push(m);return p}p=[],m=0;for(let _ in u)p[m++]=_;return p}}}function $d(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var m=Dm(u),_=Im(u),x=_.length,F=0;F<x;F++)p.call(void 0,_[F],m&&m[F],u)}var qd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cm(u,p){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var _=u[m].indexOf("="),x=null;if(0<=_){var F=u[m].substring(0,_);x=u[m].substring(_+1)}else F=u[m];p(F,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function or(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof or){this.h=u.h,Jo(this,u.j),this.o=u.o,this.g=u.g,li(this,u.s),this.l=u.l;var p=u.i,m=new es;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),nt(this,m),this.m=u.m}else u&&(p=String(u).match(qd))?(this.h=!1,Jo(this,p[1]||"",!0),this.o=Xo(p[2]||""),this.g=Xo(p[3]||"",!0),li(this,p[4]),this.l=Xo(p[5]||"",!0),nt(this,p[6]||"",!0),this.m=Xo(p[7]||"")):(this.h=!1,this.i=new es(null,this.h))}or.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Qi(p,Hd,!0),":");var m=this.g;return(m||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Qi(p,Hd,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Qi(m,m.charAt(0)=="/"?zd:Am,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Qi(m,Gd)),u.join("")};function an(u){return new or(u)}function Jo(u,p,m){u.j=m?Xo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function li(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function nt(u,p,m){p instanceof es?(u.i=p,xm(u.i,u.h)):(m||(p=Qi(p,Sm)),u.i=new es(p,u.h))}function We(u,p,m){u.i.set(p,m)}function _a(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Xo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qi(u,p,m){return typeof u=="string"?(u=encodeURI(u).replace(p,Tm),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Tm(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Hd=/[#\/\?@]/g,Am=/[#\?:]/g,zd=/[#\?]/g,Sm=/[#\?@]/g,Gd=/#/g;function es(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Rr(u){u.g||(u.g=new Map,u.h=0,u.i&&Cm(u.i,function(p,m){u.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=es.prototype,t.add=function(u,p){Rr(this),this.i=null,u=Yi(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(p),this.h+=1,this};function Wd(u,p){Rr(u),p=Yi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Kd(u,p){return Rr(u),p=Yi(u,p),u.g.has(p)}t.forEach=function(u,p){Rr(this),this.g.forEach(function(m,_){m.forEach(function(x){u.call(p,x,_,this)},this)},this)},t.na=function(){Rr(this);let u=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let _=0;_<p.length;_++){let x=u[_];for(let F=0;F<x.length;F++)m.push(p[_])}return m},t.V=function(u){Rr(this);let p=[];if(typeof u=="string")Kd(this,u)&&(p=p.concat(this.g.get(Yi(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)p=p.concat(u[m])}return p},t.set=function(u,p){return Rr(this),this.i=null,u=Yi(this,u),Kd(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Qd(u,p,m){Wd(u,p),0<m.length&&(u.i=null,u.g.set(Yi(u,p),N(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var _=p[m];let F=encodeURIComponent(String(_)),H=this.V(_);for(_=0;_<H.length;_++){var x=F;H[_]!==""&&(x+="="+encodeURIComponent(String(H[_]))),u.push(x)}}return this.i=u.join("&")};function Yi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function xm(u,p){p&&!u.j&&(Rr(u),u.i=null,u.g.forEach(function(m,_){var x=_.toLowerCase();_!=x&&(Wd(this,_),Qd(this,x,m))},u)),u.j=p}function Yd(u,p){let m=new Gi;if(a.Image){let _=new Image;_.onload=E(sr,m,"TestLoadImage: loaded",!0,p,_),_.onerror=E(sr,m,"TestLoadImage: error",!1,p,_),_.onabort=E(sr,m,"TestLoadImage: abort",!1,p,_),_.ontimeout=E(sr,m,"TestLoadImage: timeout",!1,p,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else p(!1)}function Mm(u,p){let m=new Gi,_=new AbortController,x=setTimeout(()=>{_.abort(),sr(m,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:_.signal}).then(F=>{clearTimeout(x),F.ok?sr(m,"TestPingServer: ok",!0,p):sr(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(x),sr(m,"TestPingServer: error",!1,p)})}function sr(u,p,m,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(m)}catch{}}function Rm(){this.g=new ma}function Pm(u,p,m){let _=m||"";try{$d(u,function(x,F){let H=x;l(x)&&(H=Ko(x)),p.push(_+F+"="+encodeURIComponent(H))})}catch(x){throw p.push(_+"type="+encodeURIComponent("_badmap")),x}}function $n(u){this.l=u.Ub||null,this.j=u.eb||!1}M($n,mc),$n.prototype.g=function(){return new ts(this.l,this.j)},$n.prototype.i=function(u){return function(){return u}}({});function ts(u,p){ot.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ts,ot),t=ts.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Zi(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zd(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zd(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?di(this):Zi(this),this.readyState==3&&Zd(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,di(this))},t.Qa=function(u){this.g&&(this.response=u,di(this))},t.ga=function(){this.g&&di(this)};function di(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Zi(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=p.next();return u.join(`\r
`)};function Zi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Jd(u){let p="";return ie(u,function(m,_){p+=_,p+=":",p+=m,p+=`\r
`}),p}function Cc(u,p,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Jd(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):We(u,p,m))}function rt(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(rt,ot);var Nm=/^https?$/i,km=["POST","PUT"];t=rt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ya.g(),this.v=this.o?Xt(this.o):Xt(ya),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){Xd(this,F);return}if(u=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)m.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let F of _.keys())m.set(F,_.get(F));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),x=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(km,p,void 0))||_||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,H]of m)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tc(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){Xd(this,F)}};function Xd(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,hi(u),ns(u)}function hi(u){u.A||(u.A=!0,st(u,"complete"),st(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,st(this,"complete"),st(this,"abort"),ns(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ns(this,!0)),rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?eh(this):this.bb())},t.bb=function(){eh(this)};function eh(u){if(u.h&&typeof s<"u"&&(!u.v[1]||ar(u)!=4||u.Z()!=2)){if(u.u&&ar(u)==4)ai(u.Ea,0,u);else if(st(u,"readystatechange"),ar(u)==4){u.h=!1;try{let H=u.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var _;if(_=H===0){var x=String(u.D).match(qd)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),_=!Nm.test(x?x.toLowerCase():"")}m=_}if(m)st(u,"complete"),st(u,"success");else{u.m=6;try{var F=2<ar(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",hi(u)}}finally{ns(u)}}}}function ns(u,p){if(u.g){Tc(u);let m=u.g,_=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||st(u,"ready");try{m.onreadystatechange=_}catch{}}}function Tc(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ar(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),gc(p)}};function th(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Om(u){let p={};u=(u.g&&2<=ar(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(W(u[_]))continue;var m=S(u[_]);let x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let F=p[x]||[];p[x]=F,F.push(m)}T(p,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(u,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||p}function nh(u){this.Aa=0,this.i=[],this.j=new Gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rs("baseRetryDelayMs",5e3,u),this.cb=rs("retryDelaySeedMs",1e4,u),this.Wa=rs("forwardChannelMaxRetries",2,u),this.wa=rs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ld(u&&u.concurrentRequestLimit),this.Da=new Rm,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nh.prototype,t.la=8,t.G=1,t.connect=function(u,p,m,_){Re(0),this.W=u,this.H=p||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=ah(this,null,this.W),ba(this)};function Ac(u){if(fi(u),u.G==3){var p=u.U++,m=an(u.I);if(We(m,"SID",u.K),We(m,"RID",p),We(m,"TYPE","terminate"),is(u,m),p=new xr(u,u.j,p),p.L=2,p.v=_a(an(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=uh(p.j,null),p.g.ea(p.v)),p.F=Date.now(),wa(p)}sh(u)}function Ea(u){u.g&&(pi(u),u.g.cancel(),u.g=null)}function fi(u){Ea(u),u.u&&(a.clearTimeout(u.u),u.u=null),Da(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ba(u){if(!jd(u.h)&&!u.s){u.s=!0;var p=u.Ga;qo||Dd(),Ho||(qo(),Ho=!0),la.add(p,u),u.B=0}}function Fm(u,p){return Bd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ui(w(u.Ga,u,p),xc(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let x=new xr(this,this.j,u),F=this.o;if(this.S&&(F?(F=b(F),A(F,this.S)):F=this.S),this.m!==null||this.O||(x.H=F,F=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(p+=_,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=ur(this,x,p),m=an(this.I),We(m,"RID",u),We(m,"CVER",22),this.D&&We(m,"X-HTTP-Session-Id",this.D),is(this,m),F&&(this.O?p="headers="+encodeURIComponent(String(Jd(F)))+"&"+p:this.m&&Cc(m,this.m,F)),Dc(this.h,x),this.Ua&&We(m,"TYPE","init"),this.P?(We(m,"$req",p),We(m,"SID","null"),x.T=!0,wc(x,m,null)):wc(x,m,p),this.G=2}}else this.G==3&&(u?Sc(this,u):this.i.length==0||jd(this.h)||Sc(this))};function Sc(u,p){var m;p?m=p.l:m=u.U++;let _=an(u.I);We(_,"SID",u.K),We(_,"RID",m),We(_,"AID",u.T),is(u,_),u.m&&u.o&&Cc(_,u.m,u.o),m=new xr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ur(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Dc(u.h,m),wc(m,_,p)}function is(u,p){u.H&&ie(u.H,function(m,_){We(p,_,m)}),u.l&&$d({},function(m,_){We(p,_,m)})}function ur(u,p,m){m=Math.min(u.i.length,m);var _=u.l?w(u.l.Na,u.l,u):null;e:{var x=u.i;let F=-1;for(;;){let H=["count="+m];F==-1?0<m?(F=x[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let Be=!0;for(let kt=0;kt<m;kt++){let Se=x[kt].g,Ot=x[kt].map;if(Se-=F,0>Se)F=Math.max(0,x[kt].g-100),Be=!1;else try{Pm(Ot,H,"req"+Se+"_")}catch{_&&_(Ot)}}if(Be){_=H.join("&");break e}}}return u=u.i.splice(0,m),p.D=u,_}function rh(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;qo||Dd(),Ho||(qo(),Ho=!0),la.add(p,u),u.v=0}}function Ia(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ui(w(u.Fa,u),xc(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ui(w(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Re(10),Ea(this),ih(this))};function pi(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function ih(u){u.g=new xr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=an(u.qa);We(p,"RID","rpc"),We(p,"SID",u.K),We(p,"AID",u.T),We(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(p,"TO",u.ja),We(p,"TYPE","xmlhttp"),is(u,p),u.m&&u.o&&Cc(p,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=_a(an(p)),m.m=null,m.P=!0,Od(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Ea(this),Ia(this),Re(19))};function Da(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function oh(u,p){var m=null;if(u.g==p){Da(u),pi(u),u.g=null;var _=2}else if(Ic(u.h,p))m=p.D,$e(u.h,p),_=1;else return;if(u.G!=0){if(p.o)if(_==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var x=u.B;_=Ie(),st(_,new Nt(_,m)),ba(u)}else rh(u);else if(x=p.s,x==3||x==0&&0<p.X||!(_==1&&Fm(u,p)||_==2&&Ia(u)))switch(m&&0<m.length&&(p=u.h,p.i=p.i.concat(m)),x){case 1:In(u,5);break;case 4:In(u,10);break;case 3:In(u,6);break;default:In(u,2)}}}function xc(u,p){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*p}function In(u,p){if(u.j.info("Error code "+p),p==2){var m=w(u.fb,u),_=u.Xa;let x=!_;_=new or(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jo(_,"https"),_a(_),x?Yd(_.toString(),m):Mm(_.toString(),m)}else Re(2);u.G=0,u.l&&u.l.sa(p),sh(u),fi(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function sh(u){if(u.G=0,u.ka=[],u.l){let p=Ud(u.h);(p.length!=0||u.i.length!=0)&&(R(u.ka,p),R(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function ah(u,p,m){var _=m instanceof or?an(m):new or(m);if(_.g!="")p&&(_.g=p+"."+_.g),li(_,_.s);else{var x=a.location;_=x.protocol,p=p?p+"."+x.hostname:x.hostname,x=+x.port;var F=new or(null);_&&Jo(F,_),p&&(F.g=p),x&&li(F,x),m&&(F.l=m),_=F}return m=u.D,p=u.ya,m&&p&&We(_,m,p),We(_,"VER",u.la),is(u,_),_}function uh(u,p,m){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new rt(new $n({eb:m})):new rt(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ch(){}t=ch.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ca(){}Ca.prototype.g=function(u,p){return new un(u,p)};function un(u,p){ot.call(this),this.g=new nh(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!W(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!W(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Ji(this)}M(un,ot),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Ac(this.g)},un.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Ko(u),u=m);p.i.push(new bc(p.Ya++,u)),p.G==3&&ba(p)},un.prototype.N=function(){this.g.l=null,delete this.j,Ac(this.g),delete this.g,un.aa.N.call(this)};function lh(u){en.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let m in p){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}M(lh,en);function dh(){zi.call(this),this.status=1}M(dh,zi);function Ji(u){this.g=u}M(Ji,ch),Ji.prototype.ua=function(){st(this.g,"a")},Ji.prototype.ta=function(u){st(this.g,new lh(u))},Ji.prototype.sa=function(u){st(this.g,new dh)},Ji.prototype.ra=function(){st(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,S_=Mi.createWebChannelTransport=function(){return new Ca},A_=Mi.getStatEventTarget=function(){return Ie()},T_=Mi.Event=Ar,Lp=Mi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,xl=Mi.ErrorCode=Ki,Nd.COMPLETE="complete",C_=Mi.EventType=Nd,Un.EventType=Qo,Qo.OPEN="a",Qo.CLOSE="b",Qo.ERROR="c",Qo.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Cu=Mi.WebChannel=Un,D_=Mi.FetchXmlHttpFactory=$n,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,I_=Mi.XhrIo=rt}).apply(typeof Vp<"u"?Vp:typeof self<"u"?self:typeof window<"u"?window:{});var yS="@firebase/firestore";var Mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");var nc="10.12.1";var So=new yh("@firebase/firestore");function Mu(){return So.logLevel}function yx(t){So.setLogLevel(t)}function $(t,...e){if(So.logLevel<=kr.DEBUG){let n=e.map(R0);So.debug(`Firestore (${nc}): ${t}`,...n)}}function _t(t,...e){if(So.logLevel<=kr.ERROR){let n=e.map(R0);So.error(`Firestore (${nc}): ${t}`,...n)}}function er(t,...e){if(So.logLevel<=kr.WARN){let n=e.map(R0);So.warn(`Firestore (${nc}): ${t}`,...n)}}function R0(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ee(t="Unexpected state"){let e=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: `+t;throw _t(e),new Error(e)}function oe(t,e){t||ee()}function vx(t,e){t||ee()}function Q(t,e){return t}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends fI{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Qp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},N_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}},k_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},O_=class{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>O(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new Qp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new Mt(e)}},F_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},V_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new F_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},L_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},j_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,$("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string"),this.R=n.token,new L_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function lU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Yp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=lU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function me(t,e){return t<e?-1:t>e?1:0}function ju(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function wx(t){return t+"\0"}var ct=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new U(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ct(0,0))}static max(){return new t(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ne=class t extends Zp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},dU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=class t extends Zp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return dU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new U(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new U(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new U(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};var Bu=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function B_(t){return t.fields.find(e=>e.kind===2)}function js(t){return t.fields.filter(e=>e.kind!==2)}Bu.UNKNOWN_ID=-1;var Fu=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Ul=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,tr.min())}};function _x(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new tr(i,G.empty(),e)}function Ex(t){return new tr(t.readTime,t.key,-1)}var tr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ue.min(),G.empty(),-1)}static max(){return new t(ue.max(),G.empty(),-1)}};function P0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}var bx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Lo(t){return O(this,null,function*(){if(t.code!==V.FAILED_PRECONDITION||t.message!==bx)throw t;$("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Xp=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zs(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=N0(r.target.error);this.V.reject(new zs(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new zs(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||($("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new $_(n)}},xo=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Rc())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $("SimpleDb","Removing database:",e),Bs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!mh())return!1;if(t.C())return!0;let e=Rc(),n=t.S(e),r=0<n&&n<10,i=Ix(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return O(this,null,function*(){return this.db||($("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new zs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new U(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new U(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new zs(e,s))},i.onupgradeneeded=o=>{$("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{$("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return O(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Xp.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),k.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if($("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Ix(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var U_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Bs(this.B.delete())}},zs=class extends U{constructor(e,n){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function jo(t){return t.name==="IndexedDbTransactionError"}var $_=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?($("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):($("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bs(r)}add(e){return $("SimpleDb","ADD",this.store.name,e,e),Bs(this.store.add(e))}get(e){return Bs(this.store.get(e)).next(n=>(n===void 0&&(n=null),$("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return $("SimpleDb","DELETE",this.store.name,e),Bs(this.store.delete(e))}count(){return $("SimpleDb","COUNT",this.store.name),Bs(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new k((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new k((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){$("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new k((r,i)=>{n.onerror=o=>{let s=N0(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new k((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new U_(a),l=n(a.primaryKey,a.value,c);if(l instanceof k){let f=l.catch(g=>(c.done(),k.reject(g)));r.push(f)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>k.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Bs(t){return new k((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=N0(r.target.error);n(i)}})}var vS=!1;function N0(t){let e=xo.S(Rc());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vS||(vS=!0,setTimeout(()=>{throw r},0)),r}}return t}var q_=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){$("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>O(this,null,function*(){this.task=null;try{$("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){jo(n)?$("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Lo(n)}yield this.X(6e4)}))}},H_=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return O(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return k.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return $("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>($("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=Ex(o);P0(s,r)>0&&(r=s)}),new tr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var jn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function cd(t){return t==null}function $l(t){return t===0&&1/t==-1/0}function Dx(t){return typeof t=="number"&&Number.isInteger(t)&&!$l(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function vn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=wS(e)),e=hU(t.get(n),e);return wS(e)}function hU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function wS(t){return t+""}function zr(t){let e=t.length;if(oe(e>=2),e===2)return oe(t.charAt(0)===""&&t.charAt(1)===""),Ne.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&ee(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ee()}o=s+2}return new Ne(r)}var _S=["userId","batchId"];function qp(t,e){return[t,vn(e)]}function Cx(t,e,n){return[t,vn(e),n]}var fU={},pU=["prefixPath","collectionGroup","readTime","documentId"],gU=["prefixPath","collectionGroup","documentId"],mU=["collectionGroup","readTime","prefixPath","documentId"],yU=["canonicalId","targetId"],vU=["targetId","path"],wU=["path","targetId"],_U=["collectionId","parent"],EU=["indexId","uid"],bU=["uid","sequenceNumber"],IU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DU=["indexId","uid","orderedDocumentKey"],CU=["userId","collectionPath","documentId"],TU=["userId","collectionPath","largestBatchId"],AU=["userId","collectionGroup","largestBatchId"],Tx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SU=[...Tx,"documentOverlays"],Ax=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sx=Ax,xx=[...Sx,"indexConfiguration","indexState","indexEntries"],xU=xx;var ql=class extends Jp{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Wt(t,e){let n=Q(t);return xo.F(n._e,e)}function ES(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ra(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var tt=class t{constructor(e,n){this.comparator=e,this.root=n||Wr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}},Ou=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();let e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}};Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1;Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Wr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ye=class t{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new eg(this.data.getIterator())}getIteratorFrom(e){return new eg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},eg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Tu(t){return t.hasNext()?t.getNext():void 0}var Bn=class t{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ye(Et.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ju(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var tg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Rx(){return typeof atob<"u"}var Gt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new tg("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");var MU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(t){if(oe(!!t),typeof t=="string"){let e=0,n=MU.exec(t);if(oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mo(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}function zg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function k0(t){let e=t.mapValue.fields.__previous_value__;return zg(e)?k0(e):e}function Hl(t){let e=Ni(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}var z_=class{constructor(e,n,r,i,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Ro=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var To={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hp={nullValue:"NULL_VALUE"};function Gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zg(t)?4:Px(t)?9007199254740991:10:ee()}function Yr(t,e){if(t===e)return!0;let n=Gs(t);if(n!==Gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hl(t).isEqual(Hl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ni(i.timestampValue),a=Ni(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Mo(i.bytesValue).isEqual(Mo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ht(i.doubleValue),a=ht(o.doubleValue);return s===a?$l(s)===$l(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ju(t.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ES(s)!==ES(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Yr(s[c],a[c])))return!1;return!0}(t,e);default:return ee()}}function zl(t,e){return(t.values||[]).find(n=>Yr(n,e))!==void 0}function Po(t,e){if(t===e)return 0;let n=Gs(t),r=Gs(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ht(o.integerValue||o.doubleValue),c=ht(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return bS(t.timestampValue,e.timestampValue);case 4:return bS(Hl(t),Hl(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Mo(o),c=Mo(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let f=me(a[l],c[l]);if(f!==0)return f}return me(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=me(ht(o.latitude),ht(s.latitude));return a!==0?a:me(ht(o.longitude),ht(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let f=Po(a[l],c[l]);if(f)return f}return me(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===To.mapValue&&s===To.mapValue)return 0;if(o===To.mapValue)return 1;if(s===To.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},f=Object.keys(l);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){let w=me(c[g],f[g]);if(w!==0)return w;let E=Po(a[c[g]],l[f[g]]);if(E!==0)return E}return me(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ee()}}function bS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);let n=Ni(t),r=Ni(e),i=me(n.seconds,r.seconds);return i!==0?i:me(n.nanos,r.nanos)}function Uu(t){return G_(t)}function G_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ni(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=G_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${G_(n.fields[s])}`;return i+"}"}(t.mapValue):ee()}function Ws(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function W_(t){return!!t&&"integerValue"in t}function Gl(t){return!!t&&"arrayValue"in t}function IS(t){return!!t&&"nullValue"in t}function DS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zp(t){return!!t&&"mapValue"in t}function Fl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ra(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Px(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function RU(t){return"nullValue"in t?Hp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ws(Ro.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ee()}function PU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ws(Ro.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?To:ee()}function CS(t,e){let n=Po(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function TS(t,e){let n=Po(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var on=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(n)}setAll(e){let n=Et.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Fl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());zp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ra(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Fl(this.value))}};function Nx(t){let e=[];return ra(t.fields,(n,r)=>{let i=new Et([n]);if(zp(r)){let o=Nx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Bn(e)}var Pt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ue.min(),ue.min(),ue.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ue.min(),ue.min(),on.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ue.min(),ue.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zr=class{constructor(e,n){this.position=e,this.inclusive=n}};function AS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=Po(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function SS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yr(t.position[n],e.position[n]))return!1;return!0}var Ks=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function NU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ng=class{},Me=class t extends ng{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Y_(e,n,r):n==="array-contains"?new X_(e,r):n==="in"?new rg(e,r):n==="not-in"?new eE(e,r):n==="array-contains-any"?new tE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Z_(e,r):new J_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Po(n,this.value)):n!==null&&Gs(this.value)===Gs(n)&&this.matchesComparison(Po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ge=class t extends ng{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return $u(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function $u(t){return t.op==="and"}function K_(t){return t.op==="or"}function O0(t){return kx(t)&&$u(t)}function kx(t){for(let e of t.filters)if(e instanceof Ge)return!1;return!0}function Q_(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Uu(t.value);if(O0(t))return t.filters.map(e=>Q_(e)).join(",");{let e=t.filters.map(n=>Q_(n)).join(",");return`${t.op}(${e})`}}function Ox(t,e){return t instanceof Me?function(r,i){return i instanceof Me&&r.op===i.op&&r.field.isEqual(i.field)&&Yr(r.value,i.value)}(t,e):t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Ox(s,i.filters[a]),!0):!1}(t,e):void ee()}function Fx(t,e){let n=t.filters.concat(e);return Ge.create(n,t.op)}function Vx(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Uu(n.value)}`}(t):t instanceof Ge?function(n){return n.op.toString()+" {"+n.getFilters().map(Vx).join(" ,")+"}"}(t):"Filter"}var Y_=class extends Me{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},Z_=class extends Me{constructor(e,n){super(e,"in",n),this.keys=Lx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},J_=class extends Me{constructor(e,n){super(e,"not-in",n),this.keys=Lx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Lx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var X_=class extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Gl(n)&&zl(n.arrayValue,this.value)}},rg=class extends Me{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&zl(this.value.arrayValue,n)}},eE=class extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!zl(this.value.arrayValue,n)}},tE=class extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Gl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zl(this.value.arrayValue,r))}};var nE=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function rE(t,e=null,n=[],r=[],i=null,o=null,s=null){return new nE(t,e,n,r,i,o,s)}function Qs(t){let e=Q(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Q_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uu(r)).join(",")),e.ue=n}return e.ue}function ld(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ox(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SS(t.startAt,e.startAt)&&SS(t.endAt,e.endAt)}function ig(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function og(t,e){return t.filters.filter(n=>n instanceof Me&&n.field.isEqual(e))}function xS(t,e,n){let r=Hp,i=!0;for(let o of og(t,e)){let s=Hp,a=!0;switch(o.op){case"<":case"<=":s=RU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Hp}CS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];CS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function MS(t,e,n){let r=To,i=!0;for(let o of og(t,e)){let s=To,a=!0;switch(o.op){case">=":case">":s=PU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=To}TS({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];TS({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Er=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function jx(t,e,n,r,i,o,s,a){return new Er(t,e,n,r,i,o,s,a)}function rc(t){return new Er(t)}function RS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function F0(t){return t.collectionGroup!==null}function Vu(t){let e=Q(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ye(Et.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ks(o,r))}),n.has(Et.keyField().canonicalString())||e.ce.push(new Ks(Et.keyField(),r))}return e.ce}function wn(t){let e=Q(t);return e.le||(e.le=kU(e,Vu(t))),e.le}function kU(t,e){if(t.limitType==="F")return rE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ks(i.field,o)});let n=t.endAt?new Zr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zr(t.startAt.position,t.startAt.inclusive):null;return rE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function iE(t,e){let n=t.filters.concat([e]);return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sg(t,e,n){return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dd(t,e){return ld(wn(t),wn(e))&&t.limitType===e.limitType}function Bx(t){return`${Qs(wn(t))}|lt:${t.limitType}`}function Ru(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Vx(i)).join(", ")}]`),cd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Uu(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Uu(i)).join(",")),`Target(${r})`}(wn(t))}; limitType=${t.limitType})`}function hd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Vu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=AS(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Vu(r),i)||r.endAt&&!function(s,a,c){let l=AS(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Vu(r),i))}(t,e)}function Ux(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $x(t){return(e,n)=>{let r=!1;for(let i of Vu(t)){let o=OU(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function OU(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Po(c,l):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}var Jr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Mx(this.inner)}size(){return this.innerSize}};var FU=new tt(G.comparator);function Rn(){return FU}var qx=new tt(G.comparator);function kl(...t){let e=qx;for(let n of t)e=e.insert(n.key,n);return e}function Hx(t){let e=qx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gr(){return Vl()}function zx(){return Vl()}function Vl(){return new Jr(t=>t.toString(),(t,e)=>t.isEqual(e))}var VU=new tt(G.comparator),LU=new Ye(G.comparator);function ye(...t){let e=LU;for(let n of t)e=e.add(n);return e}var jU=new Ye(me);function V0(){return jU}function Gx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$l(e)?"-0":e}}function Wx(t){return{integerValue:""+t}}function Kx(t,e){return Dx(e)?Wx(e):Gx(t,e)}var qu=class{constructor(){this._=void 0}};function BU(t,e,n){return t instanceof No?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zg(o)&&(o=k0(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ki?Yx(t,e):t instanceof Oi?Zx(t,e):function(i,o){let s=Qx(i,o),a=PS(s)+PS(i.Pe);return W_(s)&&W_(i.Pe)?Wx(a):Gx(i.serializer,a)}(t,e)}function UU(t,e,n){return t instanceof ki?Yx(t,e):t instanceof Oi?Zx(t,e):n}function Qx(t,e){return t instanceof ko?function(r){return W_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var No=class extends qu{},ki=class extends qu{constructor(e){super(),this.elements=e}};function Yx(t,e){let n=Jx(e);for(let r of t.elements)n.some(i=>Yr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Oi=class extends qu{constructor(e){super(),this.elements=e}};function Zx(t,e){let n=Jx(e);for(let r of t.elements)n=n.filter(i=>!Yr(i,r));return{arrayValue:{values:n}}}var ko=class extends qu{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function PS(t){return ht(t.integerValue||t.doubleValue)}function Jx(t){return Gl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ys=class{constructor(e,n){this.field=e,this.transform=n}};function $U(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ki&&i instanceof ki||r instanceof Oi&&i instanceof Oi?ju(r.elements,i.elements,Yr):r instanceof ko&&i instanceof ko?Yr(r.Pe,i.Pe):r instanceof No&&i instanceof No}(t.transform,e.transform)}var oE=class{constructor(e,n){this.version=e,this.transformResults=n}},ft=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Hu=class{};function Xx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fo(t.key,ft.none()):new Oo(t.key,t.data,ft.none());{let n=t.data,r=on.empty(),i=new Ye(Et.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new br(t.key,r,new Bn(i.toArray()),ft.none())}}function qU(t,e,n){t instanceof Oo?function(i,o,s){let a=i.value.clone(),c=kS(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof br?function(i,o,s){if(!Gp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=kS(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(eM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ll(t,e,n,r){return t instanceof Oo?function(o,s,a,c){if(!Gp(o.precondition,s))return a;let l=o.value.clone(),f=OS(o.fieldTransforms,c,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof br?function(o,s,a,c){if(!Gp(o.precondition,s))return a;let l=OS(o.fieldTransforms,c,s),f=s.data;return f.setAll(eM(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(o,s,a){return Gp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function HU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=Qx(r.transform,i||null);o!=null&&(n===null&&(n=on.empty()),n.set(r.field,o))}return n||null}function NS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ju(r,i,(o,s)=>$U(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Oo=class extends Hu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},br=class extends Hu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function eM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function kS(t,e,n){let r=new Map;oe(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,UU(s,a,n[i]))}return r}function OS(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,BU(o,s,e))}return r}var Fo=class extends Hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Wl=class extends Hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Kl=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&qU(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ll(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ll(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=zx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=Xx(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ju(this.mutations,e.mutations,(n,r)=>NS(n,r))&&ju(this.baseMutations,e.baseMutations,(n,r)=>NS(n,r))}},sE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length);let i=function(){return VU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Ql=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var aE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var St,Pe;function tM(t){switch(t){default:return ee();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function nM(t){if(t===void 0)return _t("GRPC error has no .code"),V.UNKNOWN;switch(t){case St.OK:return V.OK;case St.CANCELLED:return V.CANCELLED;case St.UNKNOWN:return V.UNKNOWN;case St.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case St.INTERNAL:return V.INTERNAL;case St.UNAVAILABLE:return V.UNAVAILABLE;case St.UNAUTHENTICATED:return V.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case St.NOT_FOUND:return V.NOT_FOUND;case St.ALREADY_EXISTS:return V.ALREADY_EXISTS;case St.PERMISSION_DENIED:return V.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case St.ABORTED:return V.ABORTED;case St.OUT_OF_RANGE:return V.OUT_OF_RANGE;case St.UNIMPLEMENTED:return V.UNIMPLEMENTED;case St.DATA_LOSS:return V.DATA_LOSS;default:return ee()}}(Pe=St||(St={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";var FS=null;function rM(){return new TextEncoder}var zU=new Eo([4294967295,4294967295],0);function VS(t){let e=rM().encode(t),n=new b_;return n.update(e),new Uint8Array(n.digest())}function LS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Eo([n,r],0),new Eo([i,o],0)]}var uE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hs(`Invalid padding: ${n}`);if(r<0)throw new Hs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Eo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Eo.fromNumber(r)));return i.compare(zU)===1&&(i=new Eo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=VS(e),[r,i]=LS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=VS(e),[r,i]=LS(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Hs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Yl=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ue.min(),i,new tt(me),Rn(),ye())}},Zl=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ye(),ye(),ye())}};var Lu=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},ag=class{constructor(e,n){this.targetId=e,this.me=n}},ug=class{constructor(e,n,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},cg=class{constructor(){this.fe=0,this.ge=BS(),this.pe=Gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new Zl(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=BS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},cE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rn(),this.qe=jS(),this.Qe=new tt(me)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(ig(o))if(r===0){let s=new G(o.path);this.Ue(n,s,Pt.newNoDocument(s,ue.min()))}else oe(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}FS?.et(function(f,g,w,E,M){var N,R,B,W,q,K;let se={localCacheCount:f,existenceFilterCount:g.count,databaseId:w.database,projectId:w.projectId},ie=g.unchangedNames;return ie&&(se.bloomFilter={applied:M===0,hashCount:(N=ie?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(W=(B=(R=ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||B===void 0?void 0:B.length)!==null&&W!==void 0?W:0,padding:(K=(q=ie?.bits)===null||q===void 0?void 0:q.padding)!==null&&K!==void 0?K:0,mightContain:T=>{var b;return(b=E?.mightContain(T))!==null&&b!==void 0&&b}}),se}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Mo(r).toUint8Array()}catch(c){if(c instanceof tg)return er("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new uE(s,i,o)}catch(c){return er(c instanceof Hs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&ig(a.target)){let c=new G(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Pt.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=ye();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Yl(e,n,this.Qe,this.ke,r);return this.ke=Rn(),this.qe=jS(),this.Qe=new tt(me),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(me),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function jS(){return new tt(G.comparator)}function BS(){return new tt(G.comparator)}var GU={asc:"ASCENDING",desc:"DESCENDING"},WU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KU={and:"AND",or:"OR"},lE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function dE(t,e){return t.useProto3Json||cd(e)?e:{value:e}}function zu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QU(t,e){return zu(t,e.toTimestamp())}function bt(t){return oe(!!t),ue.fromTimestamp(function(n){let r=Ni(n);return new ct(r.seconds,r.nanos)}(t))}function L0(t,e){return hE(t,e).canonicalString()}function hE(t,e){let n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oM(t){let e=Ne.fromString(t);return oe(gM(e)),e}function Jl(t,e){return L0(t.databaseId,e.path)}function Kr(t,e){let n=oM(e);if(n.get(1)!==t.databaseId.projectId)throw new U(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(uM(n))}function sM(t,e){return L0(t.databaseId,e)}function aM(t){let e=oM(t);return e.length===4?Ne.emptyPath():uM(e)}function fE(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uM(t){return oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function US(t,e,n){return{name:Jl(t,e),fields:n.value.mapValue.fields}}function cM(t,e,n){let r=Kr(t,e.name),i=bt(e.updateTime),o=e.createTime?bt(e.createTime):ue.min(),s=new on({mapValue:{fields:e.fields}}),a=Pt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function YU(t,e){return"found"in e?function(r,i){oe(!!i.found),i.found.name,i.found.updateTime;let o=Kr(r,i.found.name),s=bt(i.found.updateTime),a=i.found.createTime?bt(i.found.createTime):ue.min(),c=new on({mapValue:{fields:i.found.fields}});return Pt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){oe(!!i.missing),oe(!!i.readTime);let o=Kr(r,i.missing),s=bt(i.readTime);return Pt.newNoDocument(o,s)}(t,e):ee()}function ZU(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(oe(f===void 0||typeof f=="string"),Gt.fromBase64String(f||"")):(oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Gt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let f=l.code===void 0?V.UNKNOWN:nM(l.code);return new U(f,l.message||"")}(s);n=new ug(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Kr(t,r.document.name),o=bt(r.document.updateTime),s=r.document.createTime?bt(r.document.createTime):ue.min(),a=new on({mapValue:{fields:r.document.fields}}),c=Pt.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];n=new Lu(l,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Kr(t,r.document),o=r.readTime?bt(r.readTime):ue.min(),s=Pt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Lu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Kr(t,r.document),o=r.removedTargetIds||[];n=new Lu([],o,i,null)}else{if(!("filter"in e))return ee();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new aE(i,o),a=r.targetId;n=new ag(a,s)}}return n}function Xl(t,e){let n;if(e instanceof Oo)n={update:US(t,e.key,e.value)};else if(e instanceof Fo)n={delete:Jl(t,e.key)};else if(e instanceof br)n={update:US(t,e.key,e.data),updateMask:r$(e.fieldMask)};else{if(!(e instanceof Wl))return ee();n={verify:Jl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof No)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ki)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Oi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ko)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:QU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee()}(t,e.precondition)),n}function pE(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?ft.updateTime(bt(o.updateTime)):o.exists!==void 0?ft.exists(o.exists):ft.none()}(e.currentDocument):ft.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME"),c=new No;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];c=new ki(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];c=new Oi(f)}else"increment"in a?c=new ko(s,a.increment):ee();let l=Et.fromServerFormat(a.fieldPath);return new Ys(l,c)}(t,i)):[];if(e.update){e.update.name;let i=Kr(t,e.update.name),o=new on({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Bn(l.map(f=>Et.fromServerFormat(f)))}(e.updateMask);return new br(i,o,s,n,r)}return new Oo(i,o,n,r)}if(e.delete){let i=Kr(t,e.delete);return new Fo(i,n)}if(e.verify){let i=Kr(t,e.verify);return new Wl(i,n)}return ee()}function JU(t,e){return t&&t.length>0?(oe(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?bt(i.updateTime):bt(o);return s.isEqual(ue.min())&&(s=bt(o)),new oE(s,i.transformResults||[])}(n,e))):[]}function lM(t,e){return{documents:[sM(t,e.path)]}}function dM(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sM(t,i);let o=function(l){if(l.length!==0)return pM(Ge.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(w){return{field:Pu(w.field),direction:e$(w.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=dE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function hM(t){let e=aM(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){oe(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(g){let w=fM(g);return w instanceof Ge&&O0(w)?w.getFilters():[w]}(n.where));let s=[];n.orderBy&&(s=function(g){return g.map(w=>function(M){return new Ks(Nu(M.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let a=null;n.limit&&(a=function(g){let w;return w=typeof g=="object"?g.value:g,cd(w)?null:w}(n.limit));let c=null;n.startAt&&(c=function(g){let w=!!g.before,E=g.values||[];return new Zr(E,w)}(n.startAt));let l=null;return n.endAt&&(l=function(g){let w=!g.before,E=g.values||[];return new Zr(E,w)}(n.endAt)),jx(e,i,s,o,a,"F",c,l)}function XU(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Nu(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Nu(n.unaryFilter.field);return Me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Nu(n.unaryFilter.field);return Me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Nu(n.unaryFilter.field);return Me.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Nu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ge.create(n.compositeFilter.filters.map(r=>fM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function e$(t){return GU[t]}function t$(t){return WU[t]}function n$(t){return KU[t]}function Pu(t){return{fieldPath:t.canonicalString()}}function Nu(t){return Et.fromServerFormat(t.fieldPath)}function pM(t){return t instanceof Me?function(n){if(n.op==="=="){if(DS(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NAN"}};if(IS(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(DS(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NOT_NAN"}};if(IS(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(n.field),op:t$(n.op),value:n.value}}}(t):t instanceof Ge?function(n){let r=n.getFilters().map(i=>pM(i));return r.length===1?r[0]:{compositeFilter:{op:n$(n.op),filters:r}}}(t):ee()}function r$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Gu=class t{constructor(e,n,r,i,o=ue.min(),s=ue.min(),a=Gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var lg=class{constructor(e){this.ct=e}};function i$(t,e){let n;if(e.document)n=cM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=G.fromSegments(e.noDocument.path),i=Js(e.noDocument.readTime);n=Pt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ee();{let r=G.fromSegments(e.unknownDocument.path),i=Js(e.unknownDocument.version);n=Pt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new ct(i[0],i[1]);return ue.fromTimestamp(o)}(e.readTime)),n}function $S(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:dg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Jl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:zu(o,s.version.toTimestamp()),createTime:zu(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zs(e.version)};else{if(!e.isUnknownDocument())return ee();r.unknownDocument={path:n.path.toArray(),version:Zs(e.version)}}return r}function dg(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zs(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Js(t){let e=new ct(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function Us(t,e){let n=(e.baseMutations||[]).map(o=>pE(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>pE(t.ct,o)),i=ct.fromMillis(e.localWriteTimeMs);return new Kl(e.batchId,i,n,r)}function Ol(t){let e=Js(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Js(t.lastLimboFreeSnapshotVersion):ue.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return oe(o.documents.length===1),wn(rc(aM(o.documents[0])))}(t.query):function(o){return wn(hM(o))}(t.query),new Gu(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Gt.fromBase64String(t.resumeToken))}function mM(t,e){let n=Zs(e.snapshotVersion),r=Zs(e.lastLimboFreeSnapshotVersion),i;i=ig(e.target)?lM(t.ct,e.target):dM(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qs(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function j0(t){let e=hM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sg(e,e.limit,"L"):e}function x_(t,e){return new Ql(e.largestBatchId,pE(t.ct,e.overlayMutation))}function qS(t,e){let n=e.path.lastSegment();return[t,vn(e.path.popLast()),n]}function HS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Zs(r.readTime),documentKey:vn(r.documentKey.path),largestBatchId:r.largestBatchId}}var gE=class{getBundleMetadata(e,n){return zS(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Js(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return zS(e).put(function(i){return{bundleId:i.id,createTime:Zs(bt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return GS(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:j0(o.bundledQuery),readTime:Js(o.readTime)}}(r)})}saveNamedQuery(e,n){return GS(e).put(function(i){return{name:i.name,readTime:Zs(bt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function zS(t){return Wt(t,"bundles")}function GS(t){return Wt(t,"namedQueries")}var hg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Ml(e).get(qS(this.userId,n)).next(r=>r?x_(this.serializer,r):null)}getOverlays(e,n){let r=Gr();return k.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Ql(n,s);i.push(this.ht(e,a))}),k.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(vn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ml(e).j("collectionPathOverlayIndex",a))}),k.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Gr(),o=vn(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ml(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=x_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Gr(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ml(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,f)=>{let g=x_(this.serializer,l);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):f.done()}).next(()=>o)}ht(e,n){return Ml(e).put(function(i,o,s){let[a,c,l]=qS(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Xl(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Ml(t){return Wt(t,"documentOverlays")}var Ri=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ht(e.integerValue));else if("doubleValue"in e){let r=ht(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),$l(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Ni(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Mo(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Px(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ee()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),G.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Ri.bt=new Ri;function o$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function WS(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=o$(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var mE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=WS(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=WS(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},yE=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},vE=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},$s=class{constructor(){this.Gt=new mE,this.zt=new yE(this.Gt),this.jt=new vE(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var qs=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function bo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=KS(t.arrayValue,e.arrayValue),n!==0?n:(n=KS(t.directionalValue,e.directionalValue),n!==0?n:G.comparator(t.documentKey,e.documentKey)))}function KS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var fg=class{constructor(e){this.Yt=new Ye((n,r)=>Et.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(oe(e.collectionGroup===this.collectionId),this.en)return!1;let n=B_(e);if(n!==void 0&&!this.nn(n))return!1;let r=js(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ye(Et.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Fu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Fu(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Fu(r.field,r.dir==="asc"?0:1)));return new Bu(Bu.UNKNOWN_ID,this.collectionId,n,Ul.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function yM(t){var e,n;if(oe(t instanceof Me||t instanceof Ge),t instanceof Me){if(t instanceof rg){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Me.create(t.field,"==",o)))||[];return Ge.create(i,"or")}return t}let r=t.filters.map(i=>yM(i));return Ge.create(r,t.op)}function s$(t){if(t.getFilters().length===0)return[];let e=EE(yM(t));return oe(vM(e)),wE(e)||_E(e)?[e]:e.getFilters()}function wE(t){return t instanceof Me}function _E(t){return t instanceof Ge&&O0(t)}function vM(t){return wE(t)||_E(t)||function(n){if(n instanceof Ge&&K_(n)){for(let r of n.getFilters())if(!wE(r)&&!_E(r))return!1;return!0}return!1}(t)}function EE(t){if(oe(t instanceof Me||t instanceof Ge),t instanceof Me)return t;if(t.filters.length===1)return EE(t.filters[0]);let e=t.filters.map(r=>EE(r)),n=Ge.create(e,t.op);return n=pg(n),vM(n)?n:(oe(n instanceof Ge),oe($u(n)),oe(n.filters.length>1),n.filters.reduce((r,i)=>B0(r,i)))}function B0(t,e){let n;return oe(t instanceof Me||t instanceof Ge),oe(e instanceof Me||e instanceof Ge),n=t instanceof Me?e instanceof Me?function(i,o){return Ge.create([i,o],"and")}(t,e):QS(t,e):e instanceof Me?QS(e,t):function(i,o){if(oe(i.filters.length>0&&o.filters.length>0),$u(i)&&$u(o))return Fx(i,o.getFilters());let s=K_(i)?i:o,a=K_(i)?o:i,c=s.filters.map(l=>B0(l,a));return Ge.create(c,"or")}(t,e),pg(n)}function QS(t,e){if($u(e))return Fx(e,t.getFilters());{let n=e.filters.map(r=>B0(t,r));return Ge.create(n,"or")}}function pg(t){if(oe(t instanceof Me||t instanceof Ge),t instanceof Me)return t;let e=t.getFilters();if(e.length===1)return pg(e[0]);if(kx(t))return t;let n=e.map(i=>pg(i)),r=[];return n.forEach(i=>{i instanceof Me?r.push(i):i instanceof Ge&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ge.create(r,t.op)}var bE=class{constructor(){this._n=new ed}addToCollectionParentIndex(e,n){return this._n.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(tr.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},ed=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ye(Ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ye(Ne.comparator)).toArray()}};var jp=new Uint8Array(0),IE=class{constructor(e,n){this.databaseId=n,this.an=new ed,this.un=new Jr(r=>Qs(r),(r,i)=>ld(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:vn(i)};return YS(e).put(o)}return k.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[wx(n),""],!1,!0);return YS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(zr(s.parent))}return r})}addFieldIndex(e,n){let r=Rl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=Su(e);return o.next(a=>{s.put(HS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Rl(e),i=Su(e),o=Au(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Rl(e),r=Au(e),i=Su(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return k.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new fg(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Au(e),i=!0,o=new Map;return k.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ye(),a=[];return k.forEach(o,(c,l)=>{$("IndexedDbIndexManager",`Using index ${function(q){return`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(c)} to execute ${Qs(n)}`);let f=function(q,K){let se=B_(K);if(se===void 0)return null;for(let ie of og(q,se.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(l,c),g=function(q,K){let se=new Map;for(let ie of js(K))for(let T of og(q,ie.fieldPath))switch(T.op){case"==":case"in":se.set(ie.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return se.set(ie.fieldPath.canonicalString(),T.value),Array.from(se.values())}return null}(l,c),w=function(q,K){let se=[],ie=!0;for(let T of js(K)){let b=T.kind===0?xS(q,T.fieldPath,q.startAt):MS(q,T.fieldPath,q.startAt);se.push(b.value),ie&&(ie=b.inclusive)}return new Zr(se,ie)}(l,c),E=function(q,K){let se=[],ie=!0;for(let T of js(K)){let b=T.kind===0?MS(q,T.fieldPath,q.endAt):xS(q,T.fieldPath,q.endAt);se.push(b.value),ie&&(ie=b.inclusive)}return new Zr(se,ie)}(l,c),M=this.hn(c,l,w),N=this.hn(c,l,E),R=this.Pn(c,l,g),B=this.In(c.indexId,f,M,w.inclusive,N,E.inclusive,R);return k.forEach(B,W=>r.G(W,n.limit).next(q=>{q.forEach(K=>{let se=G.fromSegments(K.documentKey);s.has(se)||(s=s.add(se),a.push(se))})}))}).next(()=>a)}return k.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=s$(Ge.create(e.filters,"and")).map(r=>rE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),l=c/(n!=null?n.length:1),f=[];for(let g=0;g<c;++g){let w=n?this.Tn(n[g/l]):jp,E=this.En(e,w,r[g%l],i),M=this.dn(e,w,o[g%l],s),N=a.map(R=>this.En(e,w,R,!0));f.push(...this.createRange(E,M,N))}return f}En(e,n,r,i){let o=new qs(e,G.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new qs(e,G.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new fg(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return k.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ye(Et.comparator),f=!1;for(let g of c.filters)for(let w of g.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?f=!0:l=l.add(w.field));for(let g of c.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new $s;for(let i of js(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Ri.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new $s;return Ri.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new $s;return Ri.bt.Pt(Ws(this.databaseId,n),r.Ht(function(o){let s=js(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new $s);let o=0;for(let s of js(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&Gl(a))i=this.mn(i,s,a);else{let l=c.Ht(s.kind);Ri.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new $s;c.seed(a.Wt()),Ri.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Rl(e),i=Su(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return k.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(f,g){let w=g?new Ul(g.sequenceNumber,new tr(Js(g.readTime),new G(zr(g.documentKey)),g.largestBatchId)):Ul.empty(),E=f.fields.map(([M,N])=>new Fu(Et.fromServerFormat(M),N));return new Bu(f.indexId,f.collectionGroup,E,w)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:me(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Rl(e),o=Su(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>k.forEach(a,c=>o.put(HS(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return k.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?k.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),k.forEach(a,c=>this.pn(e,i,c).next(l=>{let f=this.yn(o,c);return l.isEqual(f)?k.resolve():this.wn(e,o,c,l,f)}))))})}Sn(e,n,r,i){return Au(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Au(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Au(e),o=new Ye(bo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new qs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new Ye(bo),i=this.An(n,e);if(i==null)return r;let o=B_(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Gl(s))for(let a of s.arrayValue.values||[])r=r.add(new qs(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new qs(n.indexId,e.key,jp,i));return r}wn(e,n,r,i,o){$("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,f,g,w){let E=c.getIterator(),M=l.getIterator(),N=Tu(E),R=Tu(M);for(;N||R;){let B=!1,W=!1;if(N&&R){let q=f(N,R);q<0?W=!0:q>0&&(B=!0)}else N!=null?W=!0:B=!0;B?(g(R),R=Tu(M)):W?(w(N),N=Tu(E)):(N=Tu(E),R=Tu(M))}}(i,o,bo,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),k.waitFor(s)}gn(e){let n=1;return Su(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>bo(s,a)).filter((s,a,c)=>!a||bo(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=bo(s,e),c=bo(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,jp,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,jp,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return bo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ZS)}getMinOffset(e,n){return k.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||ee())).next(ZS)}};function YS(t){return Wt(t,"collectionParents")}function Au(t){return Wt(t,"indexEntries")}function Rl(t){return Wt(t,"indexConfiguration")}function Su(t){return Wt(t,"indexState")}function ZS(t){oe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;P0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new tr(e.readTime,e.documentKey,n)}var JS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function wM(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:s},(f,g,w)=>(a++,w.delete()));o.push(c.next(()=>{oe(a===1)}));let l=[];for(let f of n.mutations){let g=Cx(e,f.key.path,n.batchId);o.push(i.delete(g)),l.push(f.key)}return k.waitFor(o).next(()=>l)}function gg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ee();e=t.noDocument}return JSON.stringify(e).length}Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(41943040,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);var mg=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){oe(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Io(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=ku(e),s=Io(e);return s.add({}).next(a=>{oe(typeof a=="number");let c=new Kl(a,n,r,i),l=function(E,M,N){let R=N.baseMutations.map(W=>Xl(E.ct,W)),B=N.mutations.map(W=>Xl(E.ct,W));return{userId:M,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:R,mutations:B}}(this.serializer,this.userId,c),f=[],g=new Ye((w,E)=>me(w.canonicalString(),E.canonicalString()));for(let w of i){let E=Cx(this.userId,w.key.path,a);g=g.add(w.key.path.popLast()),f.push(s.put(l)),f.push(o.put(E,fU))}return g.forEach(w=>{f.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),k.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return Io(e).get(n).next(r=>r?(oe(r.userId===this.userId),Us(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?k.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Io(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=r),o=Us(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Io(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Io(e).U("userMutationsIndex",n).next(r=>r.map(i=>Us(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=qp(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return ku(e).J({range:i},(s,a,c)=>{let[l,f,g]=s,w=zr(f);if(l===this.userId&&n.path.isEqual(w))return Io(e).get(g).next(E=>{if(!E)throw ee();oe(E.userId===this.userId),o.push(Us(this.serializer,E))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(me),i=[];return n.forEach(o=>{let s=qp(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ku(e).J({range:a},(l,f,g)=>{let[w,E,M]=l,N=zr(E);w===this.userId&&o.path.isEqual(N)?r=r.add(M):g.done()});i.push(c)}),k.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=qp(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ye(me);return ku(e).J({range:s},(c,l,f)=>{let[g,w,E]=c,M=zr(w);g===this.userId&&r.isPrefixOf(M)?M.length===i&&(a=a.add(E)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Io(e).get(o).next(s=>{if(s===null)throw ee();oe(s.userId===this.userId),r.push(Us(this.serializer,s))}))}),k.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return wM(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),k.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return k.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ku(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=zr(o[1]);i.push(c)}else a.done()}).next(()=>{oe(i.length===0)})})}containsKey(e,n){return _M(e,this.userId,n)}xn(e){return EM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function _M(t,e,n){let r=qp(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ku(t).J({range:o,H:!0},(a,c,l)=>{let[f,g,w]=a;f===e&&g===i&&(s=!0),l.done()}).next(()=>s)}function Io(t){return Wt(t,"mutations")}function ku(t){return Wt(t,"documentMutations")}function EM(t){return Wt(t,"mutationQueues")}var Wu=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var DE=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Wu(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ue.fromTimestamp(new ct(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>xu(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(oe(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return xu(e).J((s,a)=>{let c=Ol(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>k.waitFor(o)).next(()=>i)}forEachTarget(e,n){return xu(e).J((r,i)=>{let o=Ol(i);n(o)})}Bn(e){return XS(e).get("targetGlobalKey").next(n=>(oe(n!==null),n))}kn(e,n){return XS(e).put("targetGlobalKey",n)}qn(e,n){return xu(e).put(mM(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Qs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return xu(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Ol(a);ld(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=Do(e);return n.forEach(s=>{let a=vn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),k.waitFor(i)}removeMatchingKeys(e,n,r){let i=Do(e);return k.forEach(n,o=>{let s=vn(o.path);return k.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=Do(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Do(e),o=ye();return i.J({range:r,H:!0},(s,a,c)=>{let l=zr(s[1]),f=new G(l);o=o.add(f)}).next(()=>o)}containsKey(e,n){let r=vn(n.path),i=IDBKeyRange.bound([r],[wx(r)],!1,!0),o=0;return Do(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,n){return xu(e).get(n).next(r=>r?Ol(r):null)}};function xu(t){return Wt(t,"targets")}function XS(t){return Wt(t,"targetGlobal")}function Do(t){return Wt(t,"targetDocuments")}function ex([t,e],[n,r]){let i=me(t,n);return i===0?me(e,r):i}var CE=class{constructor(e){this.Kn=e,this.buffer=new Ye(ex),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();ex(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},TE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){$("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>O(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){jo(n)?$("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Lo(n)}yield this.zn(3e5)}))}},AE=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return k.resolve(jn.oe);let r=new CE(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(JS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JS):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),Mu()<=kr.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(l-c)+`ms
Total Duration: ${l-f}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}};function a$(t,e){return new AE(t,e)}var SE=class{constructor(e,n){this.db=e,this.garbageCollector=a$(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Bp(e,r)}removeReference(e,n,r){return Bp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Bp(e,n)}er(e,n){return function(i,o){let s=!1;return EM(i).Y(a=>_M(i,a,o).next(c=>(c&&(s=!0),k.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ue.min()),Do(e).delete(function(g){return[0,vn(g.path)]}(s))))});i.push(c)}}).next(()=>k.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Bp(e,n)}Xn(e,n){let r=Do(e),i,o=jn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==jn.oe&&n(new G(zr(i)),o),o=l,i=c):o=jn.oe}).next(()=>{o!==jn.oe&&n(new G(zr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Bp(t,e){return Do(t).put(function(r,i){return{targetId:0,path:vn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var yg=class{constructor(){this.changes=new Jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var xE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ls(e).put(r)}removeEntry(e,n,r){return Ls(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dg(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Pt.newInvalidDocument(n);return Ls(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pl(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Pt.newInvalidDocument(n)};return Ls(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pl(n))},(i,o)=>{r={document:this.nr(n,o),size:gg(o)}}).next(()=>r)}getEntries(e,n){let r=Rn();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Rn(),i=new tt(G.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,gg(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return k.resolve();let i=new Ye(rx);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Pl(i.first()),Pl(i.last())),s=i.getIterator(),a=s.getNext();return Ls(e).J({index:"documentKeyIndex",range:o},(c,l,f)=>{let g=G.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&rx(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.$(Pl(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),dg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ls(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=Rn();for(let g of l){let w=this.nr(G.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);w.isFoundDocument()&&(hd(n,w)||i.has(w.key))&&(f=f.insert(w.key,w))}return f})}getAllFromCollectionGroup(e,n,r,i){let o=Rn(),s=nx(n,r),a=nx(n,tr.max());return Ls(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,f)=>{let g=this.nr(G.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(g.key,g),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new ME(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return tx(e).get("remoteDocumentGlobalKey").next(n=>(oe(!!n),n))}tr(e,n){return tx(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=i$(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return Pt.newInvalidDocument(e)}};function bM(t){return new xE(t)}var ME=class extends yg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Jr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ye((o,s)=>me(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=$S(this.ar.serializer,s);i=i.add(o.path.popLast());let l=gg(c);r+=l-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=$S(this.ar.serializer,s.convertToNoDocument(ue.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),k.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function tx(t){return Wt(t,"remoteDocumentGlobal")}function Ls(t){return Wt(t,"remoteDocumentsV14")}function Pl(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nx(t,e){let n=e.documentKey.path.toArray();return[t,dg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function rx(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=me(n[o],r[o]),i)return i;return i=me(n.length,r.length),i||(i=me(n[n.length-2],r[r.length-2]),i||me(n[n.length-1],r[r.length-1]))}var RE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var vg=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ll(r.mutation,i,Bn.empty(),ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){let i=Gr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=kl();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Gr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Rn(),s=Vl(),a=function(){return Vl()}();return n.forEach((c,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof br)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Ll(f.mutation,l,f.mutation.getFieldMask(),ct.now())):s.set(l.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>{var g;return a.set(l,new RE(f,(g=s.get(l))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Vl(),i=new tt((s,a)=>s-a),o=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let f=r.get(c)||Bn.empty();f=a.applyToLocalView(l,f),r.set(c,f);let g=(i.get(a.batchId)||ye()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,f=c.value,g=zx();f.forEach(w=>{if(!o.has(w)){let E=Xx(n.get(w),r.get(w));E!==null&&g.set(w,E),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,g))}return k.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):F0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):k.resolve(Gr()),a=-1,c=o;return s.next(l=>k.forEach(l,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(f)?k.resolve():this.remoteDocumentCache.getEntry(e,f).next(w=>{c=c.insert(f,w)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ye())).next(f=>({batchId:a,changes:Hx(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=kl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=kl();return this.indexManager.getCollectionParents(e,o).next(a=>k.forEach(a,c=>{let l=function(g,w){return new Er(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((g,w)=>{s=s.insert(g,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Pt.newInvalidDocument(f)))});let a=kl();return s.forEach((c,l)=>{let f=o.get(c);f!==void 0&&Ll(f.mutation,l,Bn.empty(),ct.now()),hd(n,l)&&(a=a.insert(c,l))}),a})}};var PE=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return k.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:bt(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:j0(i.bundledQuery),readTime:bt(i.readTime)}}(n)),k.resolve()}};var NE=class{constructor(){this.overlays=new tt(G.comparator),this.hr=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Gr();return k.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=Gr(),o=n.length+1,s=new G(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new tt((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=Gr(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=Gr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ql(n,r));let o=this.hr.get(n);o===void 0&&(o=ye(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var td=class{constructor(){this.Pr=new Ye(xt.Ir),this.Tr=new Ye(xt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new xt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new xt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new G(new Ne([])),r=new xt(n,e),i=new xt(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new G(new Ne([])),r=new xt(n,e),i=new xt(n,e+1),o=ye();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new xt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},xt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return G.comparator(e.key,n.key)||me(e.pr,n.pr)}static Er(e,n){return me(e.pr,n.pr)||G.comparator(e.key,n.key)}};var kE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ye(xt.Ir)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Kl(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new xt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(s)}lookupMutationBatch(e,n){return k.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return k.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new xt(n,0),i=new xt(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),k.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(me);return n.forEach(i=>{let o=new xt(i,0),s=new xt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),k.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new xt(new G(o),0),a=new Ye(me);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),k.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return k.forEach(n.mutations,i=>{let o=new xt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new xt(n,0),i=this.wr.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var OE=class{constructor(e){this.vr=e,this.docs=function(){return new tt(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pt.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Rn(),s=n.path,a=new G(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:f}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||P0(Ex(f),r)<=0||(i.has(f.key)||hd(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return k.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ee()}Fr(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FE(this)}getSize(e){return k.resolve(this.size)}},FE=class extends yg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var VE=class{constructor(e){this.persistence=e,this.Mr=new Jr(n=>Qs(n),ld),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new td,this.targetCount=0,this.Lr=Wu.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),k.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Wu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.qn(n),k.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(o).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),k.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Nr.containsKey(n))}};var wg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new jn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new VE(this),this.indexManager=new bE,this.remoteDocumentCache=function(i){return new OE(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new lg(n),this.$r=new PE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new kE(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let i=new LE(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return k.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},LE=class extends Jp{constructor(e){super(),this.currentSequenceNumber=e}},_g=class t{constructor(e){this.persistence=e,this.zr=new td,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ee()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),k.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Jr,r=>{let i=G.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return k.or([()=>k.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var jE=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new Xp("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_S,{unique:!0}),c.createObjectStore("documentMutations")}(e),ix(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=k.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),ix(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_S,{unique:!0});let g=l.store("mutations"),w=f.map(E=>g.put(E));return k.waitFor(w)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:CU});l.createIndex("collectionPathOverlayIndex",TU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",AU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:pU});l.createIndex("documentKeyIndex",gU),l.createIndex("collectionGroupIndex",mU)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:EU}).createIndex("sequenceNumberIndex",bU,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:IU}).createIndex("documentKeyIndex",DU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=gg(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>k.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>k.forEach(a,c=>{oe(c.userId===o.userId);let l=Us(this.serializer,c);return wM(e,o.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new Ne(s),l=function(g){return[0,vn(g)]}(c);o.push(n.get(l).next(f=>f?k.resolve():(g=>n.put({targetId:0,path:vn(g),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>k.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:_U});let r=n.store("collectionParents"),i=new ed,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:vn(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new Ne(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],l)=>{let f=zr(a);return o(f.popLast())}))}ri(e){let n=e.store("targets");return n.J((r,i)=>{let o=Ol(i),s=mM(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(g){return g.document?new G(Ne.fromString(g.document.name).popFirst(5)):g.noDocument?G.fromSegments(g.noDocument.path):g.unknownDocument?G.fromSegments(g.unknownDocument.path):ee()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>k.waitFor(i))}si(e,n){let r=n.store("mutations"),i=bM(this.serializer),o=new wg(_g.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let f=(l=a.get(c.userId))!==null&&l!==void 0?l:ye();Us(this.serializer,c).keys().forEach(g=>f=f.add(g)),a.set(c.userId,f)}),k.forEach(a,(c,l)=>{let f=new Mt(l),g=hg.lt(this.serializer,f),w=o.getIndexManager(f),E=mg.lt(f,this.serializer,w,o.referenceDelegate);return new vg(i,E,g,w).recalculateAndSaveOverlaysForDocumentKeys(new ql(n,jn.oe),c).next()})})}};function ix(t){t.createObjectStore("targetDocuments",{keyPath:vU}).createIndex("documentTargetsIndex",wU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yU,{unique:!0}),t.createObjectStore("targetGlobal")}var M_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",BE=class t{constructor(e,n,r,i,o,s,a,c,l,f,g=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=f,this.ui=g,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=w=>Promise.resolve(),!t.D())throw new U(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SE(this,i),this.Ti=n+"main",this.serializer=new lg(c),this.Ei=new xo(this.Ti,this.ui,new jE(this.serializer)),this.Qr=new DE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bM(this.serializer),this.$r=new gE,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,f===!1&&_t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U(V.FAILED_PRECONDITION,M_);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new jn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>O(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>O(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>O(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Up(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(jo(e))return $("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Nl(e).get("owner").next(n=>k.resolve(this.Si(n)))}bi(e){return Up(e).delete(this.clientId)}Di(){return O(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Wt(n,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return k.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?k.resolve(!0):Nl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new U(V.FAILED_PRECONDITION,M_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Up(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&$("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return O(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new ql(e,jn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Up(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return mg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new IE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){$("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?xU:c===15?xx:c===14?Sx:c===13?Ax:c===12?SU:c===11?Tx:void ee()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new ql(a,this.kr?this.kr.next():jn.oe),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw _t(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new U(V.FAILED_PRECONDITION,bx);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Nl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new U(V.FAILED_PRECONDITION,M_)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nl(e).put("owner",n)}static D(){return xo.D()}yi(e){let n=Nl(e);return n.get("owner").next(r=>this.Si(r)?($("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):k.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(_t(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Um()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return $("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return _t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){_t("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Nl(t){return Wt(t,"owner")}function Up(t){return Wt(t,"clientMetadata")}function U0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var UE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ye(),i=ye();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var $E=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Eg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Um()?8:Ix(Rc())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new $E;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Mu()<=kr.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Ru(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),k.resolve()):(Mu()<=kr.DEBUG&&$("QueryEngine","Query:",Ru(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Mu()<=kr.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Ru(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):k.resolve())}ji(e,n){if(RS(n))return k.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sg(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ye(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,s,c.readTime)?this.ji(e,sg(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return RS(n)||i.isEqual(ue.min())?k.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?k.resolve(null):(Mu()<=kr.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ru(n)),this.es(e,s,n,_x(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ye($x(e));return n.forEach((i,o)=>{hd(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Mu()<=kr.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Ru(n)),this.zi.getDocumentsMatchingQuery(e,n,tr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var qE=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new tt(me),this.rs=new Jr(o=>Qs(o),ld),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function IM(t,e,n,r){return new qE(t,e,n,r)}function DM(t,e){return O(this,null,function*(){let n=Q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ye();for(let l of i){s.push(l.batchId);for(let f of l.mutations)c=c.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function u$(t,e){let n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,f){let g=l.batch,w=g.keys(),E=k.resolve();return w.forEach(M=>{E=E.next(()=>f.getEntry(c,M)).next(N=>{let R=l.docVersions.get(M);oe(R!==null),N.version.compareTo(R)<0&&(g.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),f.addEntry(N)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ye();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function CM(t){let e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function c$(t,e){let n=Q(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((f,g)=>{let w=i.get(g);if(!w)return;a.push(n.Qr.removeMatchingKeys(o,f.removedDocuments,g).next(()=>n.Qr.addMatchingKeys(o,f.addedDocuments,g)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(Gt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(g,E),function(N,R,B){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(w,E,f)&&a.push(n.Qr.updateTargetData(o,E))});let c=Rn(),l=ye();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(TM(o,s,e.documentUpdates).next(f=>{c=f.cs,l=f.ls})),!r.isEqual(ue.min())){let f=n.Qr.getLastRemoteSnapshotVersion(o).next(g=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return k.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ns=i,o))}function TM(t,e,n){let r=ye(),i=ye();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Rn();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function l$(t,e){let n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ku(t,e){let n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,k.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new Gu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Qu(t,e,n){return O(this,null,function*(){let r=Q(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!jo(s))throw s;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function bg(t,e,n){let r=Q(t),i=ue.min(),o=ye();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,f){let g=Q(c),w=g.rs.get(f);return w!==void 0?k.resolve(g.ns.get(w)):g.Qr.getTargetData(l,f)}(r,s,wn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:ue.min(),n?o:ye())).next(a=>(xM(r,Ux(e),a),{documents:a,hs:o})))}function AM(t,e){let n=Q(t),r=Q(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function SM(t,e){let n=Q(t),r=n.ss.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,_x(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(xM(n,e,i),i))}function xM(t,e,n){let r=t.ss.get(e)||ue.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function d$(t,e,n,r){return O(this,null,function*(){let i=Q(t),o=ye(),s=Rn();for(let l of n){let f=e.Ps(l.metadata.name);l.document&&(o=o.add(f));let g=e.Is(l);g.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(f,g)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Ku(i,function(f){return wn(rc(Ne.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>TM(l,a,s).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))})}function h$(r,i){return O(this,arguments,function*(t,e,n=ye()){let o=yield Ku(t,wn(j0(e.bundledQuery))),s=Q(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=bt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(Gt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function ox(t,e){return`firestore_clients_${t}_${e}`}function sx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function R_(t,e){return`firestore_targets_${t}_${e}`}var Ig=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new U(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(_t("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},jl=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new U(r.error.code,r.error.message))),o?new t(e,r.state,i):(_t("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Dg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=V0();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Dx(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(_t("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},HE=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(_t("SharedClientState",`Failed to parse online state: ${e}`),null)}},nd=class{constructor(){this.activeTargetIds=V0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Bl=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new tt(me),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=ox(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new nd),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return O(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(ox(this.persistenceKey,r));if(i){let o=Dg.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(R_(this.persistenceKey,e));if(r){let i=jl.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(R_(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return $("SharedClientState","READ",e,n),n}setItem(e,n){$("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){$("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if($("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void _t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>O(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=jn.oe;if(o!=null)try{let a=JSON.parse(o);oe(typeof a=="number"),s=a}catch(a){_t("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==jn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new Ig(this.currentUser,e,n,r),o=sx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let n=sx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=R_(this.persistenceKey,e),o=new jl(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Dg.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Ig.Es(new Mt(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return jl.Es(i,n)}xs(e){return HE.Es(e)}Js(e){return JSON.parse(e)}zs(e){return O(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);$("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=V0();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Cg=class{constructor(){this.no=new nd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zE=class{io(e){}shutdown(){}};var Tg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $p=null;function P_(){return $p===null?$p=function(){return 268435456+Math.round(2147483648*Math.random())}():$p++,"0x"+$p.toString(16)}var f$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var GE=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var rn="WebChannelConnection",WE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(n,r,i,o,s){let a=P_(),c=this.vo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(n,c,l,i).then(f=>($("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw er("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(n,r,i,o,s,a){return this.Co(n,r,i,o,s)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}vo(n,r){let i=f$[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let o=P_();return new Promise((s,a)=>{let c=new I_;c.setWithCredentials(!0),c.listenOnce(C_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xl.NO_ERROR:let f=c.getResponseJson();$(rn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case xl.TIMEOUT:$(rn,`RPC '${e}' ${o} timed out`),a(new U(V.DEADLINE_EXCEEDED,"Request time out"));break;case xl.HTTP_ERROR:let g=c.getStatus();if($(rn,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);let E=w?.error;if(E&&E.status&&E.message){let M=function(R){let B=R.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(B)>=0?B:V.UNKNOWN}(E.status);a(new U(M,E.message))}else a(new U(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new U(V.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{$(rn,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);$(rn,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=P_(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=S_(),a=A_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new D_({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let f=o.join("");$(rn,`Creating RPC '${e}' stream ${i}: ${f}`,c);let g=s.createWebChannel(f,c),w=!1,E=!1,M=new GE({lo:R=>{E?$(rn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(w||($(rn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),w=!0),$(rn,`RPC '${e}' stream ${i} sending:`,R),g.send(R))},ho:()=>g.close()}),N=(R,B,W)=>{R.listen(B,q=>{try{W(q)}catch(K){setTimeout(()=>{throw K},0)}})};return N(g,Cu.EventType.OPEN,()=>{E||($(rn,`RPC '${e}' stream ${i} transport opened.`),M.mo())}),N(g,Cu.EventType.CLOSE,()=>{E||(E=!0,$(rn,`RPC '${e}' stream ${i} transport closed`),M.po())}),N(g,Cu.EventType.ERROR,R=>{E||(E=!0,er(rn,`RPC '${e}' stream ${i} transport errored:`,R),M.po(new U(V.UNAVAILABLE,"The operation could not be completed")))}),N(g,Cu.EventType.MESSAGE,R=>{var B;if(!E){let W=R.data[0];oe(!!W);let q=W,K=q.error||((B=q[0])===null||B===void 0?void 0:B.error);if(K){$(rn,`RPC '${e}' stream ${i} received error:`,K);let se=K.status,ie=function(C){let A=St[C];if(A!==void 0)return nM(A)}(se),T=K.message;ie===void 0&&(ie=V.INTERNAL,T="Unknown error status: "+se+" with message "+K.message),E=!0,M.po(new U(ie,T)),g.close()}else $(rn,`RPC '${e}' stream ${i} received:`,W),M.yo(W)}}),N(a,T_.STAT_EVENT,R=>{R.stat===Lp.PROXY?$(rn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Lp.NOPROXY&&$(rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}};function MM(){return typeof window<"u"?window:null}function Wp(){return typeof document<"u"?document:null}function fd(t){return new lE(t,!0)}var rd=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Ag=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new rd(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return O(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return O(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return O(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new U(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>O(this,null,function*(){this.state=0,this.start()}))}c_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},KE=class extends Ag{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=ZU(this.serializer,e),r=function(o){if(!("targetChange"in o))return ue.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ue.min():s.readTime?bt(s.readTime):ue.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=fE(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=ig(c)?{documents:lM(o,c)}:{query:dM(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=iM(o,s.resumeToken);let l=dE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ue.min())>0){a.readTime=zu(o,s.snapshotVersion.toTimestamp());let l=dE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=XU(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=fE(this.serializer),n.removeTarget=e,this.i_(n)}},QE=class extends Ag{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=JU(e.writeResults,e.commitTime),r=bt(e.commitTime);return this.listener.A_(r,n)}return oe(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=fE(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Xl(this.serializer,r))};this.i_(n)}};var YE=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new U(V.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,hE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(V.UNKNOWN,o.toString())})}xo(e,n,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,hE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(V.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},ZE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(_t(n),this.y_=!1):$("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var JE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>O(this,null,function*(){Bo(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(c){return O(this,null,function*(){let l=Q(c);l.M_.add(4),yield ic(l),l.N_.set("Unknown"),l.M_.delete(4),yield pd(l)})}(this))}))}),this.N_=new ZE(r,i)}};function pd(t){return O(this,null,function*(){if(Bo(t))for(let e of t.x_)yield e(!0)})}function ic(t){return O(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Gg(t,e){let n=Q(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),H0(n)?q0(n):sc(n).Xo()&&$0(n,e))}function Yu(t,e){let n=Q(t),r=sc(n);n.F_.delete(e),r.Xo()&&RM(n,e),n.F_.size===0&&(r.Xo()?r.n_():Bo(n)&&n.N_.set("Unknown"))}function $0(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sc(t).P_(e)}function RM(t,e){t.L_.xe(e),sc(t).I_(e)}function q0(t){t.L_=new cE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),sc(t).start(),t.N_.w_()}function H0(t){return Bo(t)&&!sc(t).Zo()&&t.F_.size>0}function Bo(t){return Q(t).M_.size===0}function PM(t){t.L_=void 0}function p$(t){return O(this,null,function*(){t.N_.set("Online")})}function g$(t){return O(this,null,function*(){t.F_.forEach((e,n)=>{$0(t,e)})})}function m$(t,e){return O(this,null,function*(){PM(t),H0(t)?(t.N_.D_(e),q0(t)):t.N_.set("Unknown")})}function y$(t,e,n){return O(this,null,function*(){if(t.N_.set("Online"),e instanceof ug&&e.state===2&&e.cause)try{yield function(i,o){return O(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sg(t,r)}else if(e instanceof Lu?t.L_.Ke(e):e instanceof ag?t.L_.He(e):t.L_.We(e),!n.isEqual(ue.min()))try{let r=yield CM(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let f=o.F_.get(l);f&&o.F_.set(l,f.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let f=o.F_.get(c);if(!f)return;o.F_.set(c,f.withResumeToken(Gt.EMPTY_BYTE_STRING,f.snapshotVersion)),RM(o,c);let g=new Gu(f.target,c,l,f.sequenceNumber);$0(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield Sg(t,r)}})}function Sg(t,e,n){return O(this,null,function*(){if(!jo(e))throw e;t.M_.add(1),yield ic(t),t.N_.set("Offline"),n||(n=()=>CM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>O(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield pd(t)}))})}function NM(t,e){return e().catch(n=>Sg(t,n,e))}function oc(t){return O(this,null,function*(){let e=Q(t),n=Vo(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;v$(e);)try{let i=yield l$(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,w$(e,i)}catch(i){yield Sg(e,i)}kM(e)&&OM(e)})}function v$(t){return Bo(t)&&t.v_.length<10}function w$(t,e){t.v_.push(e);let n=Vo(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function kM(t){return Bo(t)&&!Vo(t).Zo()&&t.v_.length>0}function OM(t){Vo(t).start()}function _$(t){return O(this,null,function*(){Vo(t).V_()})}function E$(t){return O(this,null,function*(){let e=Vo(t);for(let n of t.v_)e.d_(n.mutations)})}function b$(t,e,n){return O(this,null,function*(){let r=t.v_.shift(),i=sE.from(r,e,n);yield NM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield oc(t)})}function I$(t,e){return O(this,null,function*(){e&&Vo(t).E_&&(yield function(r,i){return O(this,null,function*(){if(function(s){return tM(s)&&s!==V.ABORTED}(i.code)){let o=r.v_.shift();Vo(r).t_(),yield NM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield oc(r)}})}(t,e)),kM(t)&&OM(t)})}function ax(t,e){return O(this,null,function*(){let n=Q(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=Bo(n);n.M_.add(3),yield ic(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield pd(n)})}function XE(t,e){return O(this,null,function*(){let n=Q(t);e?(n.M_.delete(2),yield pd(n)):e||(n.M_.add(2),yield ic(n),n.N_.set("Unknown"))})}function sc(t){return t.B_||(t.B_=function(n,r,i){let o=Q(n);return o.f_(),new KE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:p$.bind(null,t),To:g$.bind(null,t),Ao:m$.bind(null,t),h_:y$.bind(null,t)}),t.x_.push(e=>O(this,null,function*(){e?(t.B_.t_(),H0(t)?q0(t):t.N_.set("Unknown")):(yield t.B_.stop(),PM(t))}))),t.B_}function Vo(t){return t.k_||(t.k_=function(n,r,i){let o=Q(n);return o.f_(),new QE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:_$.bind(null,t),Ao:I$.bind(null,t),R_:E$.bind(null,t),A_:b$.bind(null,t)}),t.x_.push(e=>O(this,null,function*(){e?(t.k_.t_(),yield oc(t)):(yield t.k_.stop(),t.v_.length>0&&($("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var e0=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ac(t,e){if(_t("AsyncQueue",`${e}: ${t}`),jo(t))return new U(V.UNAVAILABLE,`${e}: ${t}`);throw t}var xg=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=kl(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Mg=class{constructor(){this.q_=new tt(G.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ee():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Zu=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,xg.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var t0=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},n0=class{constructor(){this.queries=new Jr(e=>Bx(e),dd),this.onlineState="Unknown",this.z_=new Set}};function z0(t,e){return O(this,null,function*(){let n=Q(t),r=3,i=e.query,o=n.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new t0,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield n.onListen(i,!0);break;case 1:o.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=ac(s,`Initialization of query '${Ru(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&W0(n)})}function G0(t,e){return O(this,null,function*(){let n=Q(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function D$(t,e){let n=Q(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&W0(n)}function C$(t,e,n){let r=Q(t),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(n);r.queries.delete(e)}function W0(t){t.z_.forEach(e=>{e.next()})}var r0,ux;(ux=r0||(r0={})).J_="default",ux.Cache="cache";var id=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Zu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==r0.Cache}};var i0=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Rg=class{constructor(e){this.serializer=e}Ps(e){return Kr(this.serializer,e)}Is(e){return e.metadata.exists?cM(this.serializer,e.document,!1):Pt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return bt(e)}},o0=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=FM(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=Ne.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new Rg(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||ye()).add(o);n.set(s,a)}}return n}complete(){return O(this,null,function*(){let e=yield d$(this.localStore,new Rg(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield h$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function FM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Pg=class{constructor(e){this.key=e}},Ng=class{constructor(e){this.key=e}},kg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ye(),this.mutatedKeys=ye(),this.Ia=$x(e),this.Ta=new xg(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Mg,i=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{let w=i.get(f),E=hd(this.query,g)?g:null,M=!!w&&this.mutatedKeys.has(w.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),R=!1;w&&E?w.data.isEqual(E.data)?M!==N&&(r.track({type:3,doc:E}),R=!0):this.Ra(w,E)||(r.track({type:2,doc:E}),R=!0,(c&&this.Ia(E,c)>0||l&&this.Ia(E,l)<0)&&(a=!0)):!w&&E?(r.track({type:0,doc:E}),R=!0):w&&!E&&(r.track({type:1,doc:w}),R=!0,(c||l)&&(a=!0)),R&&(E?(s=s.add(E),o=N?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((f,g)=>function(E,M){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return N(E)-N(M)}(f.type,g.type)||this.Ia(f.doc,g.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,s.length!==0||l?{snapshot:new Zu(this.query,e.Ta,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Mg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ye(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Ng(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Pg(r))}),n}pa(e){this.la=e.hs,this.Pa=ye();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Zu.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},s0=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},a0=class{constructor(e){this.key=e,this.wa=!1}},u0=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Jr(a=>Bx(a),dd),this.Da=new Map,this.Ca=new Set,this.va=new tt(G.comparator),this.Fa=new Map,this.Ma=new td,this.xa={},this.Oa=new Map,this.Na=Wu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function T$(t,e,n=!0){return O(this,null,function*(){let r=Wg(t),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield VM(r,e,n,!0),i})}function A$(t,e){return O(this,null,function*(){let n=Wg(t);yield VM(n,e,!0,!1)})}function VM(t,e,n,r){return O(this,null,function*(){let i=yield Ku(t.localStore,wn(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield K0(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Gg(t.remoteStore,i),a})}function K0(t,e,n,r,i){return O(this,null,function*(){t.Ba=(g,w,E)=>function(N,R,B,W){return O(this,null,function*(){let q=R.view.da(B);q.Xi&&(q=yield bg(N.localStore,R.query,!1).then(({documents:T})=>R.view.da(T,q)));let K=W&&W.targetChanges.get(R.targetId),se=W&&W.targetMismatches.get(R.targetId)!=null,ie=R.view.applyChanges(q,N.isPrimaryClient,K,se);return c0(N,R.targetId,ie.fa),ie.snapshot})}(t,g,w,E);let o=yield bg(t.localStore,e,!0),s=new kg(e,o.hs),a=s.da(o.documents),c=Zl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);c0(t,n,l.fa);let f=new s0(e,n,s);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function S$(t,e,n){return O(this,null,function*(){let r=Q(t),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!dd(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Qu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yu(r.remoteStore,i.targetId),Ju(r,i.targetId)}).catch(Lo))):(Ju(r,i.targetId),yield Qu(r.localStore,i.targetId,!0))})}function x$(t,e){return O(this,null,function*(){let n=Q(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yu(n.remoteStore,r.targetId))})}function M$(t,e,n){return O(this,null,function*(){let r=J0(t);try{let i=yield function(s,a){let c=Q(s),l=ct.now(),f=a.reduce((E,M)=>E.add(M.key),ye()),g,w;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let M=Rn(),N=ye();return c.os.getEntries(E,f).next(R=>{M=R,M.forEach((B,W)=>{W.isValidDocument()||(N=N.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,M)).next(R=>{g=R;let B=[];for(let W of a){let q=HU(W,g.get(W.key).overlayedDocument);q!=null&&B.push(new br(W.key,q,Nx(q.value.mapValue),ft.exists(!0)))}return c.mutationQueue.addMutationBatch(E,l,B,a)}).next(R=>{w=R;let B=R.applyToLocalDocumentSet(g,N);return c.documentOverlayCache.saveOverlays(E,R.batchId,B)})}).then(()=>({batchId:w.batchId,changes:Hx(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.xa[s.currentUser.toKey()];l||(l=new tt(me)),l=l.insert(a,c),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Li(r,i.changes),yield oc(r.remoteStore)}catch(i){let o=ac(i,"Failed to persist write");n.reject(o)}})}function LM(t,e){return O(this,null,function*(){let n=Q(t);try{let r=yield c$(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Fa.get(o);s&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?oe(s.wa):i.removedDocuments.size>0&&(oe(s.wa),s.wa=!1))}),yield Li(n,r,e)}catch(r){yield Lo(r)}})}function cx(t,e,n){let r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Q(s);c.onlineState=a;let l=!1;c.queries.forEach((f,g)=>{for(let w of g.U_)w.j_(a)&&(l=!0)}),l&&W0(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function R$(t,e,n){return O(this,null,function*(){let r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new tt(G.comparator);s=s.insert(o,Pt.newNoDocument(o,ue.min()));let a=ye().add(o),c=new Yl(ue.min(),new Map,new tt(me),s,a);yield LM(r,c),r.va=r.va.remove(o),r.Fa.delete(e),Z0(r)}else yield Qu(r.localStore,e,!1).then(()=>Ju(r,e,n)).catch(Lo)})}function P$(t,e){return O(this,null,function*(){let n=Q(t),r=e.batch.batchId;try{let i=yield u$(n.localStore,e);Y0(n,r,null),Q0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Li(n,i)}catch(i){yield Lo(i)}})}function N$(t,e,n){return O(this,null,function*(){let r=Q(t);try{let i=yield function(s,a){let c=Q(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return c.mutationQueue.lookupMutationBatch(l,a).next(g=>(oe(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(l,g))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>c.localDocuments.getDocuments(l,f))})}(r.localStore,e);Y0(r,e,n),Q0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Li(r,i)}catch(i){yield Lo(i)}})}function k$(t,e){return O(this,null,function*(){let n=Q(t);Bo(n.remoteStore)||$("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=Q(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=ac(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Q0(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function Y0(t,e,n){let r=Q(t),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Ju(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||jM(t,r)})}function jM(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Yu(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Z0(t))}function c0(t,e,n){for(let r of n)r instanceof Pg?(t.Ma.addReference(r.key,e),O$(t,r)):r instanceof Ng?($("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||jM(t,r.key)):ee()}function O$(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||($("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Z0(t))}function Z0(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new G(Ne.fromString(e)),r=t.Na.next();t.Fa.set(r,new a0(n)),t.va=t.va.insert(n,r),Gg(t.remoteStore,new Gu(wn(rc(n.path)),r,"TargetPurposeLimboResolution",jn.oe))}}function Li(t,e,n){return O(this,null,function*(){let r=Q(t),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l&&!l.fromCache;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=UE.Ki(c.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(c,l){return O(this,null,function*(){let f=Q(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>k.forEach(l,w=>k.forEach(w.qi,E=>f.persistence.referenceDelegate.addReference(g,w.targetId,E)).next(()=>k.forEach(w.Qi,E=>f.persistence.referenceDelegate.removeReference(g,w.targetId,E)))))}catch(g){if(!jo(g))throw g;$("LocalStore","Failed to update sequence numbers: "+g)}for(let g of l){let w=g.targetId;if(!g.fromCache){let E=f.ns.get(w),M=E.snapshotVersion,N=E.withLastLimboFreeSnapshotVersion(M);f.ns=f.ns.insert(w,N)}}})}(r.localStore,o))})}function F$(t,e){return O(this,null,function*(){let n=Q(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield DM(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new U(V.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Li(n,r.us)}})}function V$(t,e){let n=Q(t),r=n.Fa.get(e);if(r&&r.wa)return ye().add(r.key);{let i=ye(),o=n.Da.get(e);if(!o)return i;for(let s of o){let a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function L$(t,e){return O(this,null,function*(){let n=Q(t),r=yield bg(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&c0(n,e.targetId,i.fa),i})}function j$(t,e){return O(this,null,function*(){let n=Q(t);return SM(n.localStore,e).then(r=>Li(n,r))})}function B$(t,e,n,r){return O(this,null,function*(){let i=Q(t),o=yield function(a,c){let l=Q(a),f=Q(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>f.vn(g,c).next(w=>w?l.localDocuments.getDocuments(g,w):k.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield oc(i.remoteStore):n==="acknowledged"||n==="rejected"?(Y0(i,e,r||null),Q0(i,e),function(a,c){Q(Q(a).mutationQueue).Mn(c)}(i.localStore,e)):ee(),yield Li(i,o)):$("SyncEngine","Cannot apply mutation batch with id: "+e)})}function U$(t,e){return O(this,null,function*(){let n=Q(t);if(Wg(n),J0(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield lx(n,r.toArray());n.La=!0,yield XE(n.remoteStore,!0);for(let o of i)Gg(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ju(n,s),Qu(n.localStore,s,!0))),Yu(n.remoteStore,s)}),yield i,yield lx(n,r),function(s){let a=Q(s);a.Fa.forEach((c,l)=>{Yu(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new tt(G.comparator)}(n),n.La=!1,yield XE(n.remoteStore,!1)}})}function lx(t,e,n){return O(this,null,function*(){let r=Q(t),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield Ku(r.localStore,wn(c[0]));for(let l of c){let f=r.ba.get(l),g=yield L$(r,f);g.snapshot&&o.push(g.snapshot)}}else{let l=yield AM(r.localStore,s);a=yield Ku(r.localStore,l),yield K0(r,BM(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function BM(t){return jx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $$(t){return function(n){return Q(Q(n).persistence).Bi()}(Q(t).localStore)}function q$(t,e,n,r){return O(this,null,function*(){let i=Q(t);if(i.La)return void $("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield SM(i.localStore,Ux(o[0])),a=Yl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Gt.EMPTY_BYTE_STRING);yield Li(i,s,a);break}case"rejected":yield Qu(i.localStore,e,!0),Ju(i,e,r);break;default:ee()}})}function H$(t,e,n){return O(this,null,function*(){let r=Wg(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){$("SyncEngine","Adding an already active target "+i);continue}let o=yield AM(r.localStore,i),s=yield Ku(r.localStore,o);yield K0(r,BM(o),s.targetId,!1,s.resumeToken),Gg(r.remoteStore,s)}for(let i of n)r.Da.has(i)&&(yield Qu(r.localStore,i,!1).then(()=>{Yu(r.remoteStore,i),Ju(r,i)}).catch(Lo))}})}function Wg(t){let e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R$.bind(null,e),e.Sa.h_=D$.bind(null,e.eventManager),e.Sa.ka=C$.bind(null,e.eventManager),e}function J0(t){let e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N$.bind(null,e),e}function z$(t,e,n){let r=Q(t);(function(o,s,a){return O(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(E,M){let N=Q(E),R=bt(M.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",B=>N.$r.getBundleMetadata(B,M.id)).then(B=>!!B&&B.createTime.compareTo(R)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(FM(c));let l=new o0(c,o.localStore,s.serializer),f=yield s.qa();for(;f;){let w=yield l._a(f);w&&a._updateProgress(w),f=yield s.qa()}let g=yield l.complete();return yield Li(o,g.ca,void 0),yield function(E,M){let N=Q(E);return N.persistence.runTransaction("Save bundle","readwrite",R=>N.$r.saveBundleMetadata(R,M))}(o.localStore,c),a._completeWith(g.progress),Promise.resolve(g.ua)}catch(c){return er("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var od=class{constructor(){this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){this.serializer=fd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return IM(this.persistence,new Eg,e.initialUser,this.serializer)}createPersistence(e){return new wg(_g.Hr,this.serializer)}createSharedClientState(e){return new Cg}terminate(){return O(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Og=class t extends od{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return O(this,null,function*(){yield jm(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield J0(this.Qa.syncEngine),yield oc(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return IM(this.persistence,new Eg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new TE(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new H_(n,this.persistence);return new q_(e.asyncQueue,r)}createPersistence(e){let n=U0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new BE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,MM(),Wp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Cg}},l0=class t extends Og{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return O(this,null,function*(){yield jm(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Bl&&(this.sharedClientState.syncEngine={Zs:B$.bind(null,n),Xs:q$.bind(null,n),eo:H$.bind(null,n),Bi:$$.bind(null,n),Ys:j$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>O(this,null,function*(){yield U$(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=MM();if(!Bl.D(n))throw new U(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=U0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bl(n,e.asyncQueue,r,e.clientId,e.initialUser)}},sd=class{initialize(e,n){return O(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F$.bind(null,this.syncEngine),yield XE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new n0}()}createDatastore(e){let n=fd(e.databaseInfo.databaseId),r=function(o){return new WE(o)}(e.databaseInfo);return function(o,s,a,c){return new YE(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new JE(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>cx(this.syncEngine,n,0),function(){return Tg.D()?new Tg:new zE}())}createSyncEngine(e,n){return function(i,o,s,a,c,l,f){let g=new u0(i,o,s,a,c,l);return f&&(g.La=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return O(this,null,function*(){var e;yield function(r){return O(this,null,function*(){let i=Q(r);$("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ic(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function dx(t,e=10240){let n=0;return{read(){return O(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return O(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Xu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var d0=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Rt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return O(this,null,function*(){return this.metadata.promise})}qa(){return O(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return O(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new i0(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return O(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return O(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return O(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var h0=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new U(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return O(this,null,function*(){let s=Q(i),a={documents:o.map(g=>Jl(s.serializer,g))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,Ne.emptyPath(),a,o.length),l=new Map;c.forEach(g=>{let w=YU(s.serializer,g);l.set(w.key.toString(),w)});let f=[];return o.forEach(g=>{let w=l.get(g.toString());oe(!!w),f.push(w)}),f})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return O(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=G.fromPath(r);this.mutations.push(new Wl(i,this.precondition(i)))}),yield function(r,i){return O(this,null,function*(){let o=Q(r),s={writes:i.map(a=>Xl(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,Ne.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ee();n=ue.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new U(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?ft.exists(!1):ft.updateTime(n):ft.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new U(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(n)}return ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var f0=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new rd(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>O(this,null,function*(){let e=new h0(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!cd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!tM(n)}return!1}};var p0=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=Yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>O(this,null,function*(){$("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ac(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Kp(t,e){return O(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>O(this,null,function*(){r.isEqual(i)||(yield DM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function g0(t,e){return O(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield X0(t);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ax(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ax(e.remoteStore,i)),t._onlineComponents=e})}function UM(t){return t.name==="FirebaseError"?t.code===V.FAILED_PRECONDITION||t.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function X0(t){return O(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kp(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!UM(n))throw n;er("Error using user provided cache. Falling back to memory cache: "+n),yield Kp(t,new od)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield Kp(t,new od);return t._offlineComponents})}function Kg(t){return O(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield g0(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield g0(t,new sd))),t._onlineComponents})}function $M(t){return X0(t).then(e=>e.persistence)}function eb(t){return X0(t).then(e=>e.localStore)}function qM(t){return Kg(t).then(e=>e.remoteStore)}function tb(t){return Kg(t).then(e=>e.syncEngine)}function G$(t){return Kg(t).then(e=>e.datastore)}function ec(t){return O(this,null,function*(){let e=yield Kg(t),n=e.eventManager;return n.onListen=T$.bind(null,e.syncEngine),n.onUnlisten=S$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=A$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x$.bind(null,e.syncEngine),n})}function W$(t){return t.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield $M(t),n=yield qM(t);return e.setNetworkEnabled(!0),function(i){let o=Q(i);return o.M_.delete(0),pd(o)}(n)}))}function K$(t){return t.asyncQueue.enqueue(()=>O(this,null,function*(){let e=yield $M(t),n=yield qM(t);return e.setNetworkEnabled(!1),function(i){return O(this,null,function*(){let o=Q(i);o.M_.add(0),yield ic(o),o.N_.set("Offline")})}(n)}))}function Q$(t,e){let n=new Rt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,o,s){return O(this,null,function*(){try{let a=yield function(l,f){let g=Q(l);return g.persistence.runTransaction("read document","readonly",w=>g.localDocuments.getDocument(w,f))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new U(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ac(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield eb(t),e,n)})),n.promise}function HM(t,e,n={}){let r=new Rt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,c,l){let f=new Xu({next:w=>{s.enqueueAndForget(()=>G0(o,g));let E=w.docs.has(a);!E&&w.fromCache?l.reject(new U(V.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&c&&c.source==="server"?l.reject(new U(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(w)},error:w=>l.reject(w)}),g=new id(rc(a.path),f,{includeMetadataChanges:!0,ra:!0});return z0(o,g)}(yield ec(t),t.asyncQueue,e,n,r)})),r.promise}function Y$(t,e){let n=new Rt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,o,s){return O(this,null,function*(){try{let a=yield bg(i,o,!0),c=new kg(o,a.hs),l=c.da(a.documents),f=c.applyChanges(l,!1);s.resolve(f.snapshot)}catch(a){let c=ac(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield eb(t),e,n)})),n.promise}function zM(t,e,n={}){let r=new Rt;return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(o,s,a,c,l){let f=new Xu({next:w=>{s.enqueueAndForget(()=>G0(o,g)),w.fromCache&&c.source==="server"?l.reject(new U(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(w)},error:w=>l.reject(w)}),g=new id(a,f,{includeMetadataChanges:!0,ra:!0});return z0(o,g)}(yield ec(t),t.asyncQueue,e,n,r)})),r.promise}function Z$(t,e){let n=new Xu(e);return t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,o){Q(i).z_.add(o),o.next()}(yield ec(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return function(i,o){Q(i).z_.delete(o)}(yield ec(t),n)}))}}function J$(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?rM().encode(s):s,function(f,g){return new d0(f,g)}(function(f,g){if(f instanceof Uint8Array)return dx(f,g);if(f instanceof ArrayBuffer)return dx(new Uint8Array(f),g);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,fd(e));t.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){z$(yield tb(t),i,r)}))}function X$(t,e){return t.asyncQueue.enqueue(()=>O(this,null,function*(){return function(r,i){let o=Q(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield eb(t),e)}))}function GM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var hx=new Map;function nb(t,e,n){if(!n)throw new U(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rb(t,e,n,r){if(e===!0&&r===!0)throw new U(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fx(t){if(!G.isDocumentKey(t))throw new U(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function px(t){if(G.isDocumentKey(t))throw new U(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function ke(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Qg(t);throw new U(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WM(t,e){if(e<=0)throw new U(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Fg=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new U(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new U(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new U(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new U(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new U(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new N_;switch(r.type){case"firstParty":return new V_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=hx.get(n);r&&($("ComponentProvider","Removing Datastore"),hx.delete(n),r.terminate())}(this),Promise.resolve()}};function KM(t,e,n,r={}){var i;let o=(t=ke(t,Xs))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Mt.MOCK_USER;else{a=hI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new U(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Mt(l)}t._authCredentials=new k_(new Qp(a,c))}}var Yt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Je=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Qr=class t extends Yt{constructor(e,n,r){super(e,n,rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function ib(t,e,...n){if(t=at(t),nb("collection","path",e),t instanceof Xs){let r=Ne.fromString(e,...n);return px(r),new Qr(t,null,r)}{if(!(t instanceof Je||t instanceof Qr))throw new U(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return px(r),new Qr(t.firestore,null,r)}}function QM(t,e){if(t=ke(t,Xs),nb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new U(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yt(t,null,function(r){return new Er(Ne.emptyPath(),r)}(e))}function gd(t,e,...n){if(t=at(t),arguments.length===1&&(e=Yp.newId()),nb("doc","path",e),t instanceof Xs){let r=Ne.fromString(e,...n);return fx(r),new Je(t,null,new G(r))}{if(!(t instanceof Je||t instanceof Qr))throw new U(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return fx(r),new Je(t.firestore,t instanceof Qr?t.converter:null,new G(r))}}function ob(t,e){return t=at(t),e=at(e),(t instanceof Je||t instanceof Qr)&&(e instanceof Je||e instanceof Qr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function sb(t,e){return t=at(t),e=at(e),t instanceof Yt&&e instanceof Yt&&t.firestore===e.firestore&&dd(t._query,e._query)&&t.converter===e.converter}var m0=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new rd(this,"async_queue_retry"),this.hu=()=>{let n=Wp();n&&$("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Wp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Wp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Rt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return O(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!jo(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw _t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=e0.createAndSchedule(this,e,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&ee()}verifyOperationInProgress(){}du(){return O(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function y0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var v0=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var YM=-1,it=class extends Xs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new m0}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZM(this),this._firestoreClient.terminate()}};function Ut(t){return t._firestoreClient||ZM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ZM(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,f){return new z_(a,c,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,GM(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new p0(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function JM(t,e){aR(t=ke(t,it));let n=Ut(t);if(n._uninitializedComponentsProvider)throw new U(V.FAILED_PRECONDITION,"SDK cache is already specified.");er("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new sd;return eR(n,i,new Og(i,r.cacheSizeBytes,e?.forceOwnership))}function XM(t){aR(t=ke(t,it));let e=Ut(t);if(e._uninitializedComponentsProvider)throw new U(V.FAILED_PRECONDITION,"SDK cache is already specified.");er("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new sd;return eR(e,r,new l0(r,n.cacheSizeBytes))}function eR(t,e,n){let r=new Rt;return t.asyncQueue.enqueue(()=>O(this,null,function*(){try{yield Kp(t,n),yield g0(t,e),r.resolve()}catch(i){let o=i;if(!UM(o))throw o;er("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function tR(t){if(t._initialized&&!t._terminated)throw new U(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Rt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>O(this,null,function*(){try{yield function(r){return O(this,null,function*(){if(!xo.D())return Promise.resolve();let i=r+"main";yield xo.delete(i)})}(U0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function nR(t){return function(n){let r=new Rt;return n.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return k$(yield tb(n),r)})),r.promise}(Ut(t=ke(t,it)))}function rR(t){return W$(Ut(t=ke(t,it)))}function iR(t){return K$(Ut(t=ke(t,it)))}function oR(t,e){let n=Ut(t=ke(t,it)),r=new v0;return J$(n,t._databaseId,e,r),r}function sR(t,e){return X$(Ut(t=ke(t,it)),e).then(n=>n?new Yt(t,null,n.query):null)}function aR(t){if(t._initialized||t._terminated)throw new U(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Xr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Gt.fromBase64String(e))}catch(n){throw new U(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ir=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Fi=class{constructor(e){this._methodName=e}};var ea=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var e4=/^__.*__$/,w0=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new br(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oo(e,this.data,n,this.fieldTransforms)}},Vg=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new br(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function uR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}var Lg=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return jg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(uR(this.fu)&&e4.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},_0=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fd(e)}Fu(e,n,r,i=!1){return new Lg({fu:e,methodName:n,vu:r,path:Et.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ia(t){let e=t._freezeSettings(),n=fd(t._databaseId);return new _0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yg(t,e,n,r,i,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,i);cb("Data must be an object, but it was:",s,r);let a=dR(r,s),c,l;if(o.merge)c=new Bn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let g of o.mergeFields){let w=C0(e,g,n);if(!s.contains(w))throw new U(V.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);fR(f,w)||f.push(w)}c=new Bn(f),l=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,l=s.fieldTransforms;return new w0(new on(a),c,l)}var ad=class t extends Fi{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function cR(t,e,n){return new Lg({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var E0=class t extends Fi{_toFieldTransform(e){return new Ys(e.path,new No)}isEqual(e){return e instanceof t}},b0=class t extends Fi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=cR(this,e,!0),r=this.Mu.map(o=>oa(o,n)),i=new ki(r);return new Ys(e.path,i)}isEqual(e){return e instanceof t&&$m(this.Mu,e.Mu)}},I0=class t extends Fi{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=cR(this,e,!0),r=this.Mu.map(o=>oa(o,n)),i=new Oi(r);return new Ys(e.path,i)}isEqual(e){return e instanceof t&&$m(this.Mu,e.Mu)}},D0=class t extends Fi{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new ko(e.serializer,Kx(e.serializer,this.xu));return new Ys(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function ab(t,e,n,r){let i=t.Fu(1,e,n);cb("Data must be an object, but it was:",i,r);let o=[],s=on.empty();ra(r,(c,l)=>{let f=lb(e,c,n);l=at(l);let g=i.Su(f);if(l instanceof ad)o.push(f);else{let w=oa(l,g);w!=null&&(o.push(f),s.set(f,w))}});let a=new Bn(o);return new Vg(s,a,i.fieldTransforms)}function ub(t,e,n,r,i,o){let s=t.Fu(1,e,n),a=[C0(e,r,n)],c=[i];if(o.length%2!=0)throw new U(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(C0(e,o[w])),c.push(o[w+1]);let l=[],f=on.empty();for(let w=a.length-1;w>=0;--w)if(!fR(l,a[w])){let E=a[w],M=c[w];M=at(M);let N=s.Su(E);if(M instanceof ad)l.push(E);else{let R=oa(M,N);R!=null&&(l.push(E),f.set(E,R))}}let g=new Bn(l);return new Vg(f,g,s.fieldTransforms)}function lR(t,e,n,r=!1){return oa(n,t.Fu(r?4:3,e))}function oa(t,e){if(hR(t=at(t)))return cb("Unsupported field value:",e,t),dR(t,e);if(t instanceof Fi)return function(r,i){if(!uR(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=oa(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kx(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ct.fromDate(r);return{timestampValue:zu(i.serializer,o)}}if(r instanceof ct){let o=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zu(i.serializer,o)}}if(r instanceof ea)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xr)return{bytesValue:iM(i.serializer,r._byteString)};if(r instanceof Je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:L0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Qg(r)}`)}(t,e)}function dR(t,e){let n={};return Mx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(t,(r,i)=>{let o=oa(i,e.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function hR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof ea||t instanceof Xr||t instanceof Je||t instanceof Fi)}function cb(t,e,n){if(!hR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Qg(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function C0(t,e,n){if((e=at(e))instanceof Ir)return e._internalPath;if(typeof e=="string")return lb(t,e);throw jg("Field path arguments must be of type string or ",t,!1,void 0,n)}var t4=new RegExp("[~\\*/\\[\\]]");function lb(t,e,n){if(e.search(t4)>=0)throw jg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ir(...e.split("."))._internalPath}catch{throw jg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jg(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new U(V.INVALID_ARGUMENT,a+t+c)}function fR(t,e){return t.some(n=>n.isEqual(e))}var ta=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new T0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Zg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},T0=class extends ta{data(){return super.data()}};function Zg(t,e){return typeof e=="string"?lb(t,e):e instanceof Ir?e._internalPath:e._delegate._internalPath}function pR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ud=class{},na=class extends ud{};function ji(t,e,...n){let r=[];e instanceof ud&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof A0).length,a=o.filter(c=>c instanceof Bg).length;if(s>1||s>0&&a>0)throw new U(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Bg=class t extends na{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return DR(e._query,n),new Yt(e.firestore,e.converter,iE(e._query,n))}_parse(e){let n=ia(e.firestore);return function(o,s,a,c,l,f,g){let w;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new U(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){mx(g,f);let E=[];for(let M of g)E.push(gx(c,o,M));w={arrayValue:{values:E}}}else w=gx(c,o,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||mx(g,f),w=lR(a,s,g,f==="in"||f==="not-in");return Me.create(l,f,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function gR(t,e,n){let r=e,i=Zg("where",t);return Bg._create(i,r,n)}var A0=class t extends ud{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ge.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)DR(s,c),s=iE(s,c)}(e._query,n),new Yt(e.firestore,e.converter,iE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var S0=class t extends na{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new U(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ks(o,s)}(e._query,this._field,this._direction);return new Yt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Er(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function mR(t,e="asc"){let n=e,r=Zg("orderBy",t);return S0._create(r,n)}var Ug=class t extends na{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Yt(e.firestore,e.converter,sg(e._query,this._limit,this._limitType))}};function yR(t){return WM("limit",t),Ug._create("limit",t,"F")}function vR(t){return WM("limitToLast",t),Ug._create("limitToLast",t,"L")}var $g=class t extends na{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=IR(e,this.type,this._docOrFields,this._inclusive);return new Yt(e.firestore,e.converter,function(i,o){return new Er(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function wR(...t){return $g._create("startAt",t,!0)}function _R(...t){return $g._create("startAfter",t,!1)}var qg=class t extends na{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=IR(e,this.type,this._docOrFields,this._inclusive);return new Yt(e.firestore,e.converter,function(i,o){return new Er(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function ER(...t){return qg._create("endBefore",t,!1)}function bR(...t){return qg._create("endAt",t,!0)}function IR(t,e,n,r){if(n[0]=at(n[0]),n[0]instanceof ta)return function(o,s,a,c,l){if(!c)throw new U(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let f=[];for(let g of Vu(o))if(g.field.isKeyField())f.push(Ws(s,c.key));else{let w=c.data.field(g.field);if(zg(w))throw new U(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let E=g.field.canonicalString();throw new U(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(w)}return new Zr(f,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=ia(t.firestore);return function(s,a,c,l,f,g){let w=s.explicitOrderBy;if(f.length>w.length)throw new U(V.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let E=[];for(let M=0;M<f.length;M++){let N=f[M];if(w[M].field.isKeyField()){if(typeof N!="string")throw new U(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof N}`);if(!F0(s)&&N.indexOf("/")!==-1)throw new U(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${N}' contains a slash.`);let R=s.path.child(Ne.fromString(N));if(!G.isDocumentKey(R))throw new U(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let B=new G(R);E.push(Ws(a,B))}else{let R=lR(c,l,N);E.push(R)}}return new Zr(E,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function gx(t,e,n){if(typeof(n=at(n))=="string"){if(n==="")throw new U(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F0(e)&&n.indexOf("/")!==-1)throw new U(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ne.fromString(n));if(!G.isDocumentKey(r))throw new U(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ws(t,new G(r))}if(n instanceof Je)return Ws(t,n._key);throw new U(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qg(n)}.`)}function mx(t,e){if(!Array.isArray(t)||t.length===0)throw new U(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new U(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var tc=class{convertValue(e,n="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ra(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new ea(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=k0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hl(e));default:return null}}convertTimestamp(e){let n=Ni(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);oe(gM(r));let i=new Ro(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||_t(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Jg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var x0=class extends tc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}};var Pi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nr=class extends ta{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ao(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Zg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ao=class extends nr{data(e={}){return super.data(e)}},Dr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ao(this._firestore,this._userDataWriter,r.key,r,new Pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ao(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ao(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:n4(a.type),doc:c,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function n4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}function db(t,e){return t instanceof nr&&e instanceof nr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Dr&&e instanceof Dr&&t._firestore===e._firestore&&sb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function CR(t){t=ke(t,Je);let e=ke(t.firestore,it);return HM(Ut(e),t._key).then(n=>gb(e,t,n))}var Vi=class extends tc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}};function TR(t){t=ke(t,Je);let e=ke(t.firestore,it),n=Ut(e),r=new Vi(e);return Q$(n,t._key).then(i=>new nr(e,r,t._key,i,new Pi(i!==null&&i.hasLocalMutations,!0),t.converter))}function AR(t){t=ke(t,Je);let e=ke(t.firestore,it);return HM(Ut(e),t._key,{source:"server"}).then(n=>gb(e,t,n))}function SR(t){t=ke(t,Yt);let e=ke(t.firestore,it),n=Ut(e),r=new Vi(e);return pR(t._query),zM(n,t._query).then(i=>new Dr(e,r,t,i))}function xR(t){t=ke(t,Yt);let e=ke(t.firestore,it),n=Ut(e),r=new Vi(e);return Y$(n,t._query).then(i=>new Dr(e,r,t,i))}function MR(t){t=ke(t,Yt);let e=ke(t.firestore,it),n=Ut(e),r=new Vi(e);return zM(n,t._query,{source:"server"}).then(i=>new Dr(e,r,t,i))}function hb(t,e,n){t=ke(t,Je);let r=ke(t.firestore,it),i=Jg(t.converter,e,n);return uc(r,[Yg(ia(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ft.none())])}function fb(t,e,n,...r){t=ke(t,Je);let i=ke(t.firestore,it),o=ia(i),s;return s=typeof(e=at(e))=="string"||e instanceof Ir?ub(o,"updateDoc",t._key,e,n,r):ab(o,"updateDoc",t._key,e),uc(i,[s.toMutation(t._key,ft.exists(!0))])}function RR(t){return uc(ke(t.firestore,it),[new Fo(t._key,ft.none())])}function PR(t,e){let n=ke(t.firestore,it),r=gd(t),i=Jg(t.converter,e);return uc(n,[Yg(ia(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ft.exists(!1))]).then(()=>r)}function pb(t,...e){var n,r,i;t=at(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||y0(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(y0(e[s])){let g=e[s];e[s]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[s+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[s+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let c,l,f;if(t instanceof Je)l=ke(t.firestore,it),f=rc(t._key.path),c={next:g=>{e[s]&&e[s](gb(l,t,g))},error:e[s+1],complete:e[s+2]};else{let g=ke(t,Yt);l=ke(g.firestore,it),f=g._query;let w=new Vi(l);c={next:E=>{e[s]&&e[s](new Dr(l,w,g,E))},error:e[s+1],complete:e[s+2]},pR(t._query)}return function(w,E,M,N){let R=new Xu(N),B=new id(E,R,M);return w.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return z0(yield ec(w),B)})),()=>{R.$a(),w.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return G0(yield ec(w),B)}))}}(Ut(l),f,a,c)}function NR(t,e){return Z$(Ut(t=ke(t,it)),y0(e)?e:{next:e})}function uc(t,e){return function(r,i){let o=new Rt;return r.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){return M$(yield tb(r),i,o)})),o.promise}(Ut(t),e)}function gb(t,e,n){let r=n.docs.get(e._key),i=new Vi(t);return new nr(t,i,e._key,r,new Pi(n.hasPendingWrites,n.fromCache),e.converter)}var r4={maxAttempts:5};var Hg=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ia(e)}set(e,n,r){this._verifyNotCommitted();let i=Co(e,this._firestore),o=Jg(i.converter,n,r),s=Yg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ft.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Co(e,this._firestore),s;return s=typeof(n=at(n))=="string"||n instanceof Ir?ub(this._dataReader,"WriteBatch.update",o._key,n,r,i):ab(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,ft.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Co(e,this._firestore);return this._mutations=this._mutations.concat(new Fo(n._key,ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Co(t,e){if((t=at(t)).firestore!==e)throw new U(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var M0=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ia(n)}get(n){let r=Co(n,this._firestore),i=new x0(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ee();let s=o[0];if(s.isFoundDocument())return new ta(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new ta(this._firestore,i,r._key,null,r.converter);throw ee()})}set(n,r,i){let o=Co(n,this._firestore),s=Jg(o.converter,r,i),a=Yg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Co(n,this._firestore),a;return a=typeof(r=at(r))=="string"||r instanceof Ir?ub(this._dataReader,"Transaction.update",s._key,r,i,o):ab(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Co(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Co(e,this._firestore),r=new Vi(this._firestore);return super.get(e).then(i=>new nr(this._firestore,r,n._key,i._document,new Pi(!1,!1),n.converter))}};function kR(t,e,n){t=ke(t,it);let r=Object.assign(Object.assign({},r4),n);return function(o){if(o.maxAttempts<1)throw new U(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Rt;return o.asyncQueue.enqueueAndForget(()=>O(this,null,function*(){let l=yield G$(o);new f0(o.asyncQueue,l,a,s,c).Xa()})),c.promise}(Ut(t),i=>e(new M0(t,i)),r)}function OR(){return new ad("deleteField")}function FR(){return new E0("serverTimestamp")}function VR(...t){return new b0("arrayUnion",t)}function LR(...t){return new I0("arrayRemove",t)}function jR(t){return new D0("increment",t)}(function(e,n=!0){(function(i){nc=i})(gI),Pc(new ss("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new it(new O_(r.getProvider("auth-internal")),new j_(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Xi(yS,"4.6.3",e),Xi(yS,"4.6.3","esm2017")})();var i4="@firebase/firestore-compat",o4="0.3.32";function Eb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new U("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function BR(){if(typeof Uint8Array>"u")throw new U("unimplemented","Uint8Arrays are not available in this environment.")}function UR(){if(!Rx())throw new U("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xg=class t{constructor(e){this._delegate=e}static fromBase64String(e){return UR(),new t(Xr.fromBase64String(e))}static fromUint8Array(e){return BR(),new t(Xr.fromUint8Array(e))}toBase64(){return UR(),this._delegate.toBase64()}toUint8Array(){return BR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function mb(t){return s4(t,["next","error","complete"])}function s4(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var yb=class{enableIndexedDbPersistence(e,n){return JM(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return XM(e._delegate)}clearIndexedDbPersistence(e){return tR(e._delegate)}},em=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ro||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&er("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){KM(this._delegate,e,n,r)}enableNetwork(){return rR(this._delegate)}disableNetwork(){return iR(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,rb("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return nR(this._delegate)}onSnapshotsInSync(e){return NR(this._delegate,e)}get app(){if(!this._appCompat)throw new U("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dc(this,ib(this._delegate,e))}catch(n){throw _n(n,"collection()","Firestore.collection()")}}doc(e){try{return new ei(this,gd(this._delegate,e))}catch(n){throw _n(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ca(this,QM(this._delegate,e))}catch(n){throw _n(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return kR(this._delegate,n=>e(new tm(this,n)))}batch(){return Ut(this._delegate),new nm(new Hg(this._delegate,e=>uc(this._delegate,e)))}loadBundle(e){return oR(this._delegate,e)}namedQuery(e){return sR(this._delegate,e).then(n=>n?new ca(this,n):null)}},cc=class extends tc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xg(new Xr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return ei.forKey(n,this.firestore,null)}};function a4(t){yx(t)}var tm=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new cc(e)}get(e){let n=sa(e);return this._delegate.get(n).then(r=>new aa(this._firestore,new nr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=sa(e);return r?(Eb("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=sa(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=sa(e);return this._delegate.delete(n),this}},nm=class{constructor(e){this._delegate=e}set(e,n,r){let i=sa(e);return r?(Eb("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=sa(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=sa(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},lc=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Ao(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ua(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new cc(e),n),i.set(n,o)),o}};lc.INSTANCES=new WeakMap;var ei=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new U("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Je(n._delegate,r,new G(e)))}static forKey(e,n,r){return new t(n,new Je(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new dc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dc(this.firestore,ib(this._delegate,e))}catch(n){throw _n(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=at(e),e instanceof Je?ob(this._delegate,e):!1}set(e,n){n=Eb("DocumentReference.set",n);try{return n?hb(this._delegate,e,n):hb(this._delegate,e)}catch(r){throw _n(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?fb(this._delegate,e):fb(this._delegate,e,n,...r)}catch(i){throw _n(i,"updateDoc()","DocumentReference.update()")}}delete(){return RR(this._delegate)}onSnapshot(...e){let n=$R(e),r=qR(e,i=>new aa(this.firestore,new nr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return pb(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=TR(this._delegate):e?.source==="server"?n=AR(this._delegate):n=CR(this._delegate),n.then(r=>new aa(this.firestore,new nr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(lc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function _n(t,e,n){return t.message=t.message.replace(e,n),t}function $R(t){for(let e of t)if(typeof e=="object"&&!mb(e))return e;return{}}function qR(t,e){var n,r;let i;return mb(t[0])?i=t[0]:mb(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var aa=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ei(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return db(this._delegate,e._delegate)}},ua=class extends aa{data(e){let n=this._delegate.data(e);return this._delegate._converter||vx(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},ca=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cc(e)}where(e,n,r){try{return new t(this.firestore,ji(this._delegate,gR(e,n,r)))}catch(i){throw _n(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,ji(this._delegate,mR(e,n)))}catch(r){throw _n(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,ji(this._delegate,yR(e)))}catch(n){throw _n(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,ji(this._delegate,vR(e)))}catch(n){throw _n(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,ji(this._delegate,wR(...e)))}catch(n){throw _n(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,ji(this._delegate,_R(...e)))}catch(n){throw _n(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,ji(this._delegate,ER(...e)))}catch(n){throw _n(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,ji(this._delegate,bR(...e)))}catch(n){throw _n(n,"endAt()","Query.endAt()")}}isEqual(e){return sb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=xR(this._delegate):e?.source==="server"?n=MR(this._delegate):n=SR(this._delegate),n.then(r=>new md(this.firestore,new Dr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=$R(e),r=qR(e,i=>new md(this.firestore,new Dr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return pb(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(lc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},vb=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ua(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},md=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ca(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ua(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new vb(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ua(this._firestore,r))})}isEqual(e){return db(this._delegate,e._delegate)}},dc=class t extends ca{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ei(this.firestore,e):null}doc(e){try{return e===void 0?new ei(this.firestore,gd(this._delegate)):new ei(this.firestore,gd(this._delegate,e))}catch(n){throw _n(n,"doc()","CollectionReference.doc()")}}add(e){return PR(this._delegate,e).then(n=>new ei(this.firestore,n))}isEqual(e){return ob(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(lc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function sa(t){return ke(t,Je)}var wb=class t{constructor(...e){this._delegate=new Ir(...e)}static documentId(){return new t(Et.keyField().canonicalString())}isEqual(e){return e=at(e),e instanceof Ir?this._delegate._internalPath.isEqual(e._internalPath):!1}};var _b=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=FR();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=OR();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=VR(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=LR(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=jR(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var u4={Firestore:em,GeoPoint:ea,Timestamp:ct,Blob:Xg,Transaction:tm,WriteBatch:nm,DocumentReference:ei,DocumentSnapshot:aa,Query:ca,QueryDocumentSnapshot:ua,QuerySnapshot:md,CollectionReference:dc,FieldPath:wb,FieldValue:_b,setLogLevel:a4,CACHE_SIZE_UNLIMITED:YM};function c4(t,e){t.INTERNAL.registerComponent(new ss("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},u4)))}function l4(t){c4(t,(e,n)=>new em(e,n,new yb)),t.registerVersion(i4,o4)}l4(Dn);function d4(t,e=Fc){return new we(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function HR(t,e){return d4(t,e)}function h4(t,e){return HR(t,e).pipe(ds(void 0),Lc(),ae(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Db(t,e){return HR(t,e).pipe(ae(n=>({payload:n,type:"query"})))}var rm=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=QR(r,n);return new om(i,o,this.afs)}snapshotChanges(){return h4(this.ref,this.afs.schedulers.outsideAngular).pipe(Mn)}valueChanges(e={}){return this.snapshotChanges().pipe(ae(({payload:n})=>e.idField?qe(ne({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Fe(this.ref.get(e)).pipe(Mn)}};function im(t,e){return Db(t,e).pipe(ds(void 0),Lc(),ae(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(g=>g.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function zR(t,e,n){return im(t,n).pipe(ls((r,i)=>f4(r,i.map(o=>o.payload),e),[]),cy(),ae(r=>r.map(i=>({type:i.type,payload:i}))))}function f4(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=p4(t,r))}),t}function bb(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function p4(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return bb(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return bb(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bb(t,e.oldIndex,1);break}return t}function GR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var om=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=im(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ae(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(ds(void 0),Lc(),qt(([r,i])=>i.length>0||!r),ae(([,r])=>r),Mn)}auditTrail(e){return this.stateChanges(e).pipe(ls((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=GR(e);return zR(this.query,n,this.afs.schedulers.outsideAngular).pipe(Mn)}valueChanges(e={}){return Db(this.query,this.afs.schedulers.outsideAngular).pipe(ae(n=>n.payload.docs.map(r=>e.idField?qe(ne({},r.data()),{[e.idField]:r.id}):r.data())),Mn)}get(e){return Fe(this.query.get(e)).pipe(Mn)}add(e){return this.ref.add(e)}doc(e){return new rm(this.ref.doc(e),this.afs)}},Ib=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?im(this.query,this.afs.schedulers.outsideAngular).pipe(Mn):im(this.query,this.afs.schedulers.outsideAngular).pipe(ae(n=>n.filter(r=>e.indexOf(r.type)>-1)),qt(n=>n.length>0),Mn)}auditTrail(e){return this.stateChanges(e).pipe(ls((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=GR(e);return zR(this.query,n,this.afs.schedulers.outsideAngular).pipe(Mn)}valueChanges(e={}){return Db(this.query,this.afs.schedulers.outsideAngular).pipe(ae(r=>r.payload.docs.map(i=>e.idField?ne({[e.idField]:i.id},i.data()):i.data())),Mn)}get(e){return Fe(this.query.get(e)).pipe(Mn)}},WR=new te("angularfire2.enableFirestorePersistence"),KR=new te("angularfire2.firestore.persistenceSettings"),g4=new te("angularfire2.firestore.settings"),m4=new te("angularfire2.firestore.use-emulator");function QR(t,e=n=>n){return{query:e(t),ref:t}}var yd=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,l,f,g,w,E,M,N,R,B,W){this.schedulers=c;let q=Sl(n,a,r),K=f;g&&E_(q,a,w,M,N,R,E,B),[this.firestore,this.persistenceEnabled$]=Fp(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{let se=a.runOutsideAngular(()=>q.firestore());if(o&&se.settings(o),K&&se.useEmulator(...K),i&&!go(s)){let ie=()=>{try{return Fe(se.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(T){return typeof console<"u"&&console.warn(T),ce(!1)}};return[se,a.runOutsideAngular(ie)]}else return[se,ce(!1)]},[o,K,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=QR(i,r),a=this.schedulers.ngZone.run(()=>o);return new om(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new Ib(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new rm(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(z(Iu),z(Du,8),z(WR,8),z(g4,8),z(Sn),z(He),z(Np),z(KR,8),z(m4,8),z(pS,8),z(g_,8),z(m_,8),z(y_,8),z(v_,8),z(w_,8),z(__,8),z(Vs,8))};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),YR=(()=>{class t{constructor(){Dn.registerVersion("angularfire",bu.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:WR,useValue:!0},{provide:KR,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=pn({type:t});static \u0275inj=fn({providers:[yd]})}return t})();var sm=(()=>{let e=class e{constructor(r){this.firestore=r,this.peliculasCollection=this.firestore.collection("peliculas")}getPeliculas(){return this.peliculasCollection.valueChanges({idField:"id"})}addPelicula(r){let i=this.firestore.createId();return r.id=i,this.peliculasCollection.doc(i).set(r)}};e.\u0275fac=function(i){return new(i||e)(z(yd))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var y4=()=>[],XR=(()=>{let e=class e{constructor(r){this.peliculasService=r,this.peliculas$=new we,this.peliculaSeleccionada=null}ngOnInit(){this.peliculas$=this.peliculasService.getPeliculas().pipe(dr(()=>ce([])))}mostrarDetalle(r){this.peliculaSeleccionada=r}};e.\u0275fac=function(i){return new(i||e)(de(sm))},e.\u0275cmp=Ct({type:e,selectors:[["app-busqueda"]],standalone:!0,features:[Tt],decls:6,vars:5,consts:[[3,"peliculaSeleccionada","peliculas"],[3,"pelicula"]],template:function(i,o){if(i&1&&(Y(0,"div")(1,"h1"),ge(2,"Busqueda de Pel\xEDculas"),X(),Y(3,"app-tabla-pelicula",0),au(4,"async"),et("peliculaSeleccionada",function(a){return o.mostrarDetalle(a)}),X(),mn(5,"app-detalle-pelicula",1),X()),i&2){let s;pe(3),Lt("peliculas",(s=uu(4,2,o.peliculas$))!==null&&s!==void 0?s:AT(4,y4)),pe(2),Lt("pelicula",o.peliculaSeleccionada)}},dependencies:[ZA,Rp,rl,KT]});let t=e;return t})();var uP=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(de(As),de(uo))},e.\u0275dir=Ht({type:e});let t=e;return t})(),Tb=(()=>{let e=class e extends uP{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Cs(e)))(o||e)}})(),e.\u0275dir=Ht({type:e,features:[yr]});let t=e;return t})(),fm=new te("");var v4={provide:fm,useExisting:bi(()=>ti),multi:!0};function w4(){let t=xi()?xi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var _4=new te(""),ti=(()=>{let e=class e extends uP{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!w4())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(de(As),de(uo),de(_4,8))},e.\u0275dir=Ht({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&et("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Ms([v4]),yr]});let t=e;return t})();function E4(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var Ab=new te(""),cP=new te("");function b4(t){return E4(t.value)?{required:!0}:null}function eP(t){return null}function lP(t){return t!=null}function dP(t){return ho(t)?Fe(t):t}function hP(t){let e={};return t.forEach(n=>{e=n!=null?ne(ne({},e),n):e}),Object.keys(e).length===0?null:e}function fP(t,e){return e.map(n=>n(t))}function I4(t){return!t.validate}function pP(t){return t.map(e=>I4(e)?e:n=>e.validate(n))}function D4(t){if(!t)return null;let e=t.filter(lP);return e.length==0?null:function(n){return hP(fP(n,e))}}function Sb(t){return t!=null?D4(pP(t)):null}function C4(t){if(!t)return null;let e=t.filter(lP);return e.length==0?null:function(n){let r=fP(n,e).map(dP);return sy(r).pipe(ae(hP))}}function xb(t){return t!=null?C4(pP(t)):null}function tP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function T4(t){return t._rawValidators}function A4(t){return t._rawAsyncValidators}function Cb(t){return t?Array.isArray(t)?t:[t]:[]}function um(t,e){return Array.isArray(t)?t.includes(e):t===e}function nP(t,e){let n=Cb(e);return Cb(t).forEach(i=>{um(n,i)||n.push(i)}),n}function rP(t,e){return Cb(e).filter(n=>!um(t,n))}var cm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Sb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},fc=class extends cm{get formDirective(){return null}get path(){return null}},pc=class extends cm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},lm=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},S4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},X7=qe(ne({},S4),{"[class.ng-submitted]":"isSubmitted"}),Uo=(()=>{let e=class e extends lm{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(de(pc,2))},e.\u0275dir=Ht({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&lo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[yr]});let t=e;return t})(),pm=(()=>{let e=class e extends lm{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(de(fc,10))},e.\u0275dir=Ht({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&lo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[yr]});let t=e;return t})();var vd="VALID",am="INVALID",hc="PENDING",wd="DISABLED";function gP(t){return(gm(t)?t.validators:t)||null}function x4(t){return Array.isArray(t)?Sb(t):t||null}function mP(t,e){return(gm(e)?e.asyncValidators:t)||null}function M4(t){return Array.isArray(t)?xb(t):t||null}function gm(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function R4(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new le(1e3,"");if(!r[n])throw new le(1001,"")}function P4(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new le(1002,"")})}var dm=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vd}get invalid(){return this.status===am}get pending(){return this.status==hc}get disabled(){return this.status===wd}get enabled(){return this.status!==wd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(nP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rP(e,this._rawAsyncValidators))}hasValidator(e){return um(this._rawValidators,e)}hasAsyncValidator(e){return um(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=wd,this.errors=null,this._forEachChild(r=>{r.disable(qe(ne({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(qe(ne({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=vd,this._forEachChild(r=>{r.enable(qe(ne({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(qe(ne({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vd||this.status===hc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wd:vd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hc,this._hasOwnPendingAsyncValidator=!0;let n=dP(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?wd:this.errors?am:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hc)?hc:this._anyControlsHaveStatus(am)?am:vd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=x4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=M4(this._rawAsyncValidators)}},hm=class extends dm{constructor(e,n,r){super(gP(n),mP(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){P4(this,!0,e),Object.keys(e).forEach(r=>{R4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ed=new te("CallSetDisabledState",{providedIn:"root",factory:()=>bd}),bd="always";function N4(t,e){return[...e.path,t]}function yP(t,e,n=bd){vP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),O4(t,e),V4(t,e),F4(t,e),k4(t,e)}function iP(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function k4(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function vP(t,e){let n=T4(t);e.validator!==null?t.setValidators(tP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=A4(t);e.asyncValidator!==null?t.setAsyncValidators(tP(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();iP(e._rawValidators,i),iP(e._rawAsyncValidators,i)}function O4(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&wP(t,e)})}function F4(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&wP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function wP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function V4(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function L4(t,e){t==null,vP(t,e)}function j4(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function B4(t){return Object.getPrototypeOf(t.constructor)===Tb}function U4(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $4(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===ti?n=o:B4(o)?r=o:i=o}),i||r||n||null}var q4={provide:fc,useExisting:bi(()=>Id)},_d=Promise.resolve(),Id=(()=>{let e=class e extends fc{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new dt,this.form=new hm({},Sb(r),xb(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){_d.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),yP(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){_d.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){_d.then(()=>{let i=this._findContainer(r.path),o=new hm({});L4(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){_d.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){_d.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,U4(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(de(Ab,10),de(cP,10),de(Ed,8))},e.\u0275dir=Ht({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&et("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[kn.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ms([q4]),yr]});let t=e;return t})();function oP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var H4=class extends dm{constructor(e=null,n,r){super(gP(n),mP(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var z4={provide:pc,useExisting:bi(()=>Bi)},aP=Promise.resolve(),Bi=(()=>{let e=class e extends pc{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new H4,this._registered=!1,this.name="",this.update=new dt,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=$4(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),j4(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){yP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){aP.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&tl(i);aP.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?N4(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(de(fc,9),de(Ab,10),de(cP,10),de(fm,10),de(fo,8),de(Ed,8))},e.\u0275dir=Ht({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[kn.None,"disabled","isDisabled"],model:[kn.None,"ngModel","model"],options:[kn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ms([z4]),yr,Ds]});let t=e;return t})(),mm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ht({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),G4={provide:fm,useExisting:bi(()=>Mb),multi:!0},Mb=(()=>{let e=class e extends Tb{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Cs(e)))(o||e)}})(),e.\u0275dir=Ht({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&et("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[Ms([G4]),yr]});let t=e;return t})(),W4={provide:fm,useExisting:bi(()=>Rb),multi:!0};var K4=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rb=(()=>{let e=class e extends Tb{constructor(r,i,o,s){super(r,i),this._registry=o,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Z(Ed,{optional:!0})??bd}ngOnInit(){this._control=this._injector.get(pc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(de(As),de(uo),de(K4),de(Ts))},e.\u0275dir=Ht({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,o){i&1&&et("change",function(){return o.onChange()})("blur",function(){return o.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ms([W4]),yr]});let t=e;return t})();var Q4=new te("");var Y4=(()=>{let e=class e{constructor(){this._validator=eP}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):eP,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ht({type:e,features:[Ds]});let t=e;return t})();var Z4={provide:Ab,useExisting:bi(()=>Pb),multi:!0};var Pb=(()=>{let e=class e extends Y4{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=tl,this.createValidator=r=>b4}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Cs(e)))(o||e)}})(),e.\u0275dir=Ht({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&Uf("required",o._enabled?"":null)},inputs:{required:"required"},features:[Ms([Z4]),yr]});let t=e;return t})();var _P=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=fn({});let t=e;return t})();var ni=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Ed,useValue:r.callSetDisabledState??bd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=fn({imports:[_P]});let t=e;return t})(),EP=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Q4,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Ed,useValue:r.callSetDisabledState??bd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pn({type:e}),e.\u0275inj=fn({imports:[_P]});let t=e;return t})();var _m=aI(kb());var bP=(()=>{let e=class e{constructor(r){this.http=r,this.baseUrl="https://restcountries.com/v3.1/all",this.countryUrl="https://restcountries.com/v3.1/name/"}getAllCountries(){return this.http.get(this.baseUrl)}getCountryByName(r){return O(this,null,function*(){return this.http.get(this.countryUrl+r)})}};e.\u0275fac=function(i){return new(i||e)(z(dw))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function X4(t,e){if(t&1){let n=su();Y(0,"div",4),et("click",function(){let i=tu(n).$implicit,o=Qn();return nu(o.selectCountry(i))}),mn(1,"img",5),Y(2,"p"),ge(3),X()()}if(t&2){let n=e.$implicit,r=Qn();lo("selected",n===r.selectedCountry),pe(),xs("alt",n.name.common),Lt("src",n.flags.svg,co),pe(2),Yn(n.name.common)}}var vm=(()=>{let e=class e{constructor(r){this.restcountriesService=r,this.countries=[],this.filteredCountries=[],this.searchTerm="",this.selectedCountry=null,this.listWidth=0,this.paisSeleccionado=new dt}ngOnInit(){this.restcountriesService.getAllCountries().subscribe(r=>{this.countries=r,this.filteredCountries=r,this.listWidth=r.length*320})}filterCountries(){this.filteredCountries=this.countries.filter(r=>r.name.common.toLowerCase().includes(this.searchTerm.toLowerCase()))}selectCountry(r){this.selectedCountry===r?this.selectedCountry=null:this.selectedCountry=r,this.OnSelectCountry()}OnSelectCountry(){this.paisSeleccionado.emit(this.selectedCountry.name.common)}};e.\u0275fac=function(i){return new(i||e)(de(bP))},e.\u0275cmp=Ct({type:e,selectors:[["app-tabla-paises"]],outputs:{paisSeleccionado:"paisSeleccionado"},standalone:!0,features:[Tt],decls:5,vars:2,consts:[["type","text","placeholder","Buscar pa\xEDs",3,"ngModelChange","input","ngModel"],[1,"country-list-container"],[1,"country-list"],["class","country-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"country-card",3,"click"],[3,"src","alt"]],template:function(i,o){i&1&&(Y(0,"div")(1,"input",0),Bt("ngModelChange",function(a){return zt(o.searchTerm,a)||(o.searchTerm=a),a}),et("input",function(){return o.filterCountries()}),X()(),Y(2,"div",1)(3,"div",2),vr(4,X4,4,5,"div",3),X()()),i&2&&(pe(),jt("ngModel",o.searchTerm),pe(3),Lt("ngForOf",o.filteredCountries))},dependencies:[du,ni,ti,Uo,Bi],styles:["input[_ngcontent-%COMP%]{background-color:#2e2c28;border:none;outline:none;padding:10px;border-radius:10px;margin:10px 0;width:100%}.country-list-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:scroll;display:flex;flex-direction:column;padding:20px}.country-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.country-card[_ngcontent-%COMP%]{flex-basis:calc(33.33% - 16px);padding:16px;border:1px solid #ccc;border-radius:8px;cursor:pointer;text-align:center;margin-bottom:16px;transition:background-color .3s}.country-card.selected[_ngcontent-%COMP%]{background-color:#2e2c28;color:#fff}.country-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;margin-bottom:8px}.country-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]});let t=e;return t})();var wm=(()=>{let e=class e{constructor(r){this.firestore=r,this.actoresCollection=this.firestore.collection("actores")}addActor(r){return this.actoresCollection.add(r).then(()=>{console.log("Actor agregado correctamente")}).catch(i=>{throw console.error("Error al agregar actor:",i),i})}getActores(){return this.actoresCollection.valueChanges({idField:"id"})}};e.\u0275fac=function(i){return new(i||e)(z(yd))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ob=(()=>{let e=class e{constructor(r){this.actorService=r,this.nombre="",this.apellido="",this.edad=null,this.pais=""}agregarActor(){return O(this,null,function*(){if(this.nombre&&this.apellido&&this.pais)try{let r={id:"",nombre:this.nombre,apellido:this.apellido,edad:this.edad!==null?this.edad:0,pais:this.pais};yield this.actorService.addActor(r),this.resetForm(),_m.default.fire("\xA1\xC9xito!","Actor agregado correctamente","success")}catch(r){console.error("Error al agregar actor:",r),_m.default.fire("\xA1Error!","El actor no pudo agregarse correctamente","error")}else _m.default.fire("\xA1Advertencia!","Completa todos los campos","warning")})}onPaisSeleccionado(r){this.pais=r}resetForm(){this.nombre="",this.apellido="",this.pais="",this.edad=null,this.bandera=null}};e.\u0275fac=function(i){return new(i||e)(de(wm))},e.\u0275cmp=Ct({type:e,selectors:[["app-actor-alta"]],standalone:!0,features:[Tt],decls:21,vars:4,consts:[[1,"container"],[1,"formulario"],["novalidate","",3,"ngSubmit"],["for","nombre"],["id","nombre","name","nombre","required","",3,"ngModelChange","ngModel"],["for","apellido"],["id","apellido","name","apellido","required","",3,"ngModelChange","ngModel"],["for","edad"],["id","edad","name","edad","type","number","required","",3,"ngModelChange","ngModel"],["for","pais"],["type","text","readonly","","name","pais",1,"login-input",3,"ngModelChange","ngModel"],["type","submit"],[1,"tabla-paises"],[3,"paisSeleccionado"]],template:function(i,o){i&1&&(Y(0,"div",0)(1,"div",1)(2,"h1"),ge(3,"Alta de Actores"),X(),Y(4,"form",2),et("ngSubmit",function(){return o.agregarActor()}),Y(5,"label",3),ge(6,"Nombre:"),X(),Y(7,"input",4),Bt("ngModelChange",function(a){return zt(o.nombre,a)||(o.nombre=a),a}),X(),Y(8,"label",5),ge(9,"Apellido:"),X(),Y(10,"input",6),Bt("ngModelChange",function(a){return zt(o.apellido,a)||(o.apellido=a),a}),X(),Y(11,"label",7),ge(12,"Edad:"),X(),Y(13,"input",8),Bt("ngModelChange",function(a){return zt(o.edad,a)||(o.edad=a),a}),X(),Y(14,"label",9),ge(15,"Pa\xEDs:"),X(),Y(16,"input",10),Bt("ngModelChange",function(a){return zt(o.pais,a)||(o.pais=a),a}),X(),Y(17,"button",11),ge(18,"Agregar Actor"),X()()(),Y(19,"div",12)(20,"app-tabla-paises",13),et("paisSeleccionado",function(a){return o.onPaisSeleccionado(a)}),X()()()),i&2&&(pe(7),jt("ngModel",o.nombre),pe(3),jt("ngModel",o.apellido),pe(3),jt("ngModel",o.edad),pe(3),jt("ngModel",o.pais))},dependencies:[ni,mm,ti,Mb,Uo,pm,Pb,Bi,Id,vm]});let t=e;return t})();var DP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["app-actor-listado"]],standalone:!0,features:[Tt],decls:2,vars:0,template:function(i,o){i&1&&(Y(0,"p"),ge(1,"actor-listado works!"),X())}});let t=e;return t})();var Fb=aI(kb());var Em=class{constructor(e,n,r,i,o,s,a){this.id=e,this.nombre=n,this.tipo=r,this.fechaEstreno=i,this.actor=o,this.cantidadPublico=s,this.foto=a}};function eq(t,e){if(t&1){let n=su();Y(0,"div",4),et("click",function(){let i=tu(n).$implicit,o=Qn();return nu(o.selectActor(i))}),Y(1,"h1"),ge(2),X(),Y(3,"p"),ge(4),X(),Y(5,"p"),ge(6),X(),Y(7,"p"),ge(8),X()()}if(t&2){let n=e.$implicit,r=Qn();lo("selected",n===r.selectedActor),pe(2),Yn(n.nombre),pe(2),Yn(n.apellido),pe(2),Yn(n.edad),pe(2),Yn(n.pais)}}var CP=(()=>{let e=class e{constructor(r){this.actorService=r,this.actors=[],this.filteredActors=[],this.searchTerm="",this.selectedActor=null,this.listWidth=0,this.actorsData=new dt}ngOnInit(){return O(this,null,function*(){this.actorService.getActores().subscribe({next:r=>{this.actors=r,this.filteredActors=r,this.listWidth=r.length*320},error:r=>{console.error("Error al obtener actores:",r)}})})}filterActors(){this.filteredActors=this.actors.filter(r=>r.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()))}selectActor(r){this.selectedActor===r?this.selectedActor=null:this.selectedActor=r,this.OnSelectCountry()}OnSelectCountry(){this.selectedActor!==null&&this.actorsData.emit(this.selectedActor)}};e.\u0275fac=function(i){return new(i||e)(de(wm))},e.\u0275cmp=Ct({type:e,selectors:[["app-tabla-actores"]],outputs:{actorsData:"actorsData"},standalone:!0,features:[Tt],decls:5,vars:2,consts:[["type","text","placeholder","Buscar actor",3,"ngModelChange","input","ngModel"],[1,"country-list-container"],[1,"country-list"],["class","country-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"country-card",3,"click"]],template:function(i,o){i&1&&(Y(0,"div")(1,"input",0),Bt("ngModelChange",function(a){return zt(o.searchTerm,a)||(o.searchTerm=a),a}),et("input",function(){return o.filterActors()}),X()(),Y(2,"div",1)(3,"div",2),vr(4,eq,9,6,"div",3),X()()),i&2&&(pe(),jt("ngModel",o.searchTerm),pe(3),Lt("ngForOf",o.filteredActors))},dependencies:[du,ni,ti,Uo,Bi],styles:["input[_ngcontent-%COMP%]{background-color:#2e2c28;border:none;outline:none;padding:10px;border-radius:10px;margin:10px 0;width:100%}.country-list-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:scroll;display:flex;flex-direction:column;padding:20px}.country-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.country-card[_ngcontent-%COMP%]{flex-basis:calc(33.33% - 16px);padding:16px;border:1px solid #ccc;border-radius:8px;cursor:pointer;text-align:center;margin-bottom:16px;transition:background-color .3s}.country-card.selected[_ngcontent-%COMP%]{background-color:#2e2c28;color:#fff}.country-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:auto;margin-bottom:8px}.country-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]});let t=e;return t})();function tq(t,e){if(t&1&&(Y(0,"div",26),mn(1,"img",27),X()),t&2){let n=Qn();pe(),Lt("src",n.foto,co)}}var Vb=(()=>{let e=class e{constructor(r,i){this.router=r,this.peliculasService=i,this.nombre="",this.tipo="",this.fechaEstreno=new Date,this.cantidadPublico="",this.foto="",this.actor=""}OnSaveClick(){return O(this,null,function*(){try{let r=this.convertStringToEnum(this.tipo),i=new Em("",this.nombre,r,this.fechaEstreno,this.actor,parseInt(this.cantidadPublico),this.foto);yield this.peliculasService.addPelicula(i),Fb.default.fire("\xA1\xC9xito!","Pel\xEDcula agregada correctamente","success"),this.router.navigateByUrl("busqueda")}catch{Fb.default.fire("\xA1Error!","La pel\xEDcula no pudo agregarse correctamente","error")}})}OnCancelClick(){this.router.navigateByUrl("busqueda")}convertStringToEnum(r){return r}onImageSelected(r){let i=r.target.files[0];if(i){let o=new FileReader;o.onload=s=>{this.foto=s.target.result},o.readAsDataURL(i)}}receiveActors(r){r?this.actor=r.nombre+" "+r.apellido:this.actor=""}};e.\u0275fac=function(i){return new(i||e)(de(Mp),de(sm))},e.\u0275cmp=Ct({type:e,selectors:[["app-peliculas-alta"]],standalone:!0,features:[Tt],decls:56,vars:9,consts:[[1,"container","screen-container"],[1,"screen"],[1,"field"],[1,"text-feild"],["type","text","placeholder","Nombre","name","nombre",1,"login-input",3,"ngModelChange","ngModel"],[1,"radio-button"],["type","radio","id","amor-radio","name","radios","value","Amor","checked","",3,"ngModelChange","ngModel"],["for","amor-radio"],["type","radio","id","terror-radio","name","radios","value","Terror",3,"ngModelChange","ngModel"],["for","terror-radio"],["type","radio","id","comedia-radio","name","radios","value","Comedia",3,"ngModelChange","ngModel"],["for","comedia-radio"],["type","radio","id","otros-radio","name","radios","value","Otros",3,"ngModelChange","ngModel"],["for","otros-radio"],["type","date","name","fechaEstreno",1,"login-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Cantidad publico","name","cantidadPublico",1,"login-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Actor","name","actor",1,"login-input",3,"ngModelChange","ngModel"],["type","file","accept","image/*",1,"input-group-prepend",3,"change"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-dark"],[1,"button__text",3,"click"],["type","button",1,"btn","btn-success"],[1,"screen-container","col-sm-12"],[1,"screen",2,"width","600px"],[3,"actorsData"],[1,"d-flex","justify-content-center","align-items-center"],["alt","Imagen seleccionada",1,"image",3,"src"]],template:function(i,o){i&1&&(Y(0,"div",0)(1,"div",1)(2,"form")(3,"h2"),ge(4,"Peliculas"),X(),Y(5,"div",2)(6,"span",3),ge(7,"Nombre "),X(),Y(8,"input",4),Bt("ngModelChange",function(a){return zt(o.nombre,a)||(o.nombre=a),a}),X()(),Y(9,"div",2)(10,"span",3),ge(11,"Tipo "),X(),Y(12,"div",5)(13,"div")(14,"input",6),Bt("ngModelChange",function(a){return zt(o.tipo,a)||(o.tipo=a),a}),X(),Y(15,"label",7),ge(16,"Amor"),X()(),Y(17,"div")(18,"input",8),Bt("ngModelChange",function(a){return zt(o.tipo,a)||(o.tipo=a),a}),X(),Y(19,"label",9),ge(20,"Terror"),X()(),Y(21,"div")(22,"input",10),Bt("ngModelChange",function(a){return zt(o.tipo,a)||(o.tipo=a),a}),X(),Y(23,"label",11),ge(24,"Comedia"),X()(),Y(25,"div")(26,"input",12),Bt("ngModelChange",function(a){return zt(o.tipo,a)||(o.tipo=a),a}),X(),Y(27,"label",13),ge(28,"Otros"),X()()()(),Y(29,"div",2)(30,"span",3),ge(31,"Fecha de estreno "),X(),Y(32,"input",14),Bt("ngModelChange",function(a){return zt(o.fechaEstreno,a)||(o.fechaEstreno=a),a}),X()(),Y(33,"div",2)(34,"span",3),ge(35,"Cantidad de publico "),X(),Y(36,"input",15),Bt("ngModelChange",function(a){return zt(o.cantidadPublico,a)||(o.cantidadPublico=a),a}),X()(),Y(37,"div",2)(38,"span",3),ge(39,"Actor "),X(),Y(40,"input",16),Bt("ngModelChange",function(a){return zt(o.actor,a)||(o.actor=a),a}),X()(),Y(41,"div",2)(42,"span",3),ge(43,"Imagen "),X(),Y(44,"input",17),et("change",function(a){return o.onImageSelected(a)}),X()(),vr(45,tq,2,1,"div",18),Y(46,"div",19)(47,"button",20)(48,"span",21),et("click",function(){return o.OnCancelClick()}),ge(49,"Cancelar"),X()(),Y(50,"button",22)(51,"span",21),et("click",function(){return o.OnSaveClick()}),ge(52,"Guardar"),X()()()()(),Y(53,"div",23)(54,"div",24)(55,"app-tabla-actores",25),et("actorsData",function(a){return o.receiveActors(a)}),X()()()()),i&2&&(pe(8),jt("ngModel",o.nombre),pe(6),jt("ngModel",o.tipo),pe(4),jt("ngModel",o.tipo),pe(4),jt("ngModel",o.tipo),pe(4),jt("ngModel",o.tipo),pe(6),jt("ngModel",o.fechaEstreno),pe(4),jt("ngModel",o.cantidadPublico),pe(4),jt("ngModel",o.actor),pe(5),Lt("ngIf",o.foto))},dependencies:[ip,ni,mm,ti,Rb,Uo,pm,Bi,Id,CP],styles:['.screen[_ngcontent-%COMP%]{margin-top:30px;background-color:#5b5750;padding:30px;color:#f5f5f5;border-radius:13px 13px 0 0;border-bottom:solid 7px #2E2C28}.screen-container[_ngcontent-%COMP%]{width:500px}.field[_ngcontent-%COMP%]{margin:15px 0;display:flex;justify-content:space-between}.login-input[_ngcontent-%COMP%]{padding:10px;background-color:#43403b;border:none;border-bottom:solid 3px #2E2C28}.login-input[_ngcontent-%COMP%]:focus{border-bottom:solid 3px #151412;outline:none}.btn[_ngcontent-%COMP%]{margin-left:20px;border-radius:0 0 5px 5px}.btn-style[_ngcontent-%COMP%]{background-color:#43403b;border:none;border-bottom:solid 3px #151412;width:80px;border-radius:0;font-size:13px;display:flex;justify-content:space-between;align-items:center;flex-direction:column;padding:10px}.btn-style[_ngcontent-%COMP%]:hover{background-color:#2e2c28}.radio[_ngcontent-%COMP%]{margin-bottom:15px}.radio-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.radio-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#43403b;border:none;border-bottom:solid 3px #151412;width:80px;border-radius:0;font-size:13px;display:flex;justify-content:space-between;align-items:center;flex-direction:column;padding:10px;cursor:pointer}.radio-button[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#2e2c28}.radio-button[_ngcontent-%COMP%]{display:flex;flex-direction:row}.input-group-prepend[_ngcontent-%COMP%]{outline:none;border:none;border-radius:0 10px;background-color:#43403b;padding:10px;width:190px;color:transparent;border-bottom:solid 3px #151412;transition:.2s ease-out}.input-group-prepend[_ngcontent-%COMP%]:hover{background-color:#2b2926}.input-group-prepend[_ngcontent-%COMP%]:active{background-color:#1f1e1c}.input-group-prepend[_ngcontent-%COMP%]:before{content:"Seleccionar archivo";display:inline-block;color:#757575;padding:5px 10px;cursor:pointer}.input-group-prepend[_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}.image[_ngcontent-%COMP%]{width:400px;border-radius:10px 10px 0;margin-bottom:10px}']});let t=e;return t})();var TP=[{path:"bienvenido",pathMatch:"full",redirectTo:"/busqueda"},{path:"busqueda",component:XR},{path:"peliculas/alta",component:Vb},{path:"actor/alta",component:Ob},{path:"actor/listado",component:DP},{path:"tabla/pelicula",component:Rp},{path:"tabla/paises",component:vm},{path:"actor/actorpelicula",component:Ob},{path:"peliculas/listado",component:Vb}];var AP={firebase:{apiKey:"AIzaSyA9aV7Z8r5in1UJ61BgKeo0vI0SfoAh2Zk",authDomain:"simulacro-18912.firebaseapp.com",projectId:"simulacro-18912",storageBucket:"simulacro-18912.appspot.com",messagingSenderId:"196774474873",appId:"1:196774474873:web:0b77bf3a737cfe0803d0a8"},production:!1,firebaseConfig:{apiKey:"AIzaSyA9aV7Z8r5in1UJ61BgKeo0vI0SfoAh2Zk",authDomain:"simulacro-18912.firebaseapp.com",projectId:"simulacro-18912",storageBucket:"simulacro-18912.appspot.com",messagingSenderId:"196774474873",appId:"1:196774474873:web:0b77bf3a737cfe0803d0a8"}};var SP={providers:[YA(TP),wv(aA,rl,ni,EP,fS.initializeApp(AP.firebaseConfig),YR)]};var xP=(()=>{let e=class e{constructor(){this.title="simulacrolabo"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["app-root"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(i,o){i&1&&mn(0,"router-outlet")},dependencies:[e_]});let t=e;return t})();gA(xP,SP).catch(t=>console.error(t));
